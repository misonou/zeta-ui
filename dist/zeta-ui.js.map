{"version":3,"sources":["webpack://zeta-ui/webpack/universalModuleDefinition","webpack://zeta-ui/./build/locale|eager|/en/|groupOptions: {}|strict namespace object","webpack://zeta-ui/./build/core/ArgumentIterator.js","webpack://zeta-ui/./build/include/zeta-dom/events.js","webpack://zeta-ui/./build/core/DisplayValue.js","webpack://zeta-ui/./build/core/UIContext.js","webpack://zeta-ui/./build/core/UIToolsetState.js","webpack://zeta-ui/./build/core/UIControl.js","webpack://zeta-ui/./build/core/UIControlSpecies.js","webpack://zeta-ui/./build/core/UIToolset.js","webpack://zeta-ui/./build/core/define.js","webpack://zeta-ui/./build/core/flags.js","webpack://zeta-ui/./build/include/zeta-dom/index.js","webpack://zeta-ui/./build/util/cssUtil.js","webpack://zeta-ui/./build/util/defineUtil.js","webpack://zeta-ui/./build/Overlay.js","webpack://zeta-ui/./build/Dialog.js","webpack://zeta-ui/./build/Label.js","webpack://zeta-ui/./build/Button.js","webpack://zeta-ui/./build/SubmitButton.js","webpack://zeta-ui/./build/ButtonSet.js","webpack://zeta-ui/./build/Generic.js","webpack://zeta-ui/./build/renderer/default/contenteditable.js","webpack://zeta-ui/./build/TextBoxLike.js","webpack://zeta-ui/./build/TextBox.js","webpack://zeta-ui/./build/promptFactory.js","webpack://zeta-ui/./build/ButtonList.js","webpack://zeta-ui/./build/ButtonLike.js","webpack://zeta-ui/./build/Callout.js","webpack://zeta-ui/./build/Checkbox.js","webpack://zeta-ui/./build/Menu.js","webpack://zeta-ui/./build/Dropdown.js","webpack://zeta-ui/./build/DatePicker.js","webpack://zeta-ui/./build/Fieldset.js","webpack://zeta-ui/./build/FileInput.js","webpack://zeta-ui/./build/Form.js","webpack://zeta-ui/./build/KeywordInput.js","webpack://zeta-ui/./build/LinkButton.js","webpack://zeta-ui/./build/NumberInput.js","webpack://zeta-ui/./build/RichTextInput.js","webpack://zeta-ui/./build/entry.js","webpack://zeta-ui/./build/globalContext.js","webpack://zeta-ui/./build/include/external/jquery.js","webpack://zeta-ui/./build/include/external/promise-polyfill.js","webpack://zeta-ui/./build/include/external/waterpipe.js","webpack://zeta-ui/./build/include/external/zeta-editor.js","webpack://zeta-ui/./build/include/zeta-dom/cssUtil.js","webpack://zeta-ui/./build/include/zeta-dom/dom.js","webpack://zeta-ui/./build/include/zeta-dom/domLock.js","webpack://zeta-ui/./build/include/zeta-dom/domUtil.js","webpack://zeta-ui/./build/include/zeta-dom/env.js","webpack://zeta-ui/./build/include/zeta-dom/util.js","webpack://zeta-ui/./build/index.js","webpack://zeta-ui/./build/locale/en.js","webpack://zeta-ui/./build/util/formatShortcut.js","webpack://zeta-ui/./build/renderer/default/effects.js","webpack://zeta-ui/./build/renderer/default/index.js","webpack://zeta-ui/./build/util/common.js","webpack://zeta-ui/external \"jQuery\"","webpack://zeta-ui/external \"promise-polyfill\"","webpack://zeta-ui/external \"waterpipe\"","webpack://zeta-ui/external {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta-ui/external {\"commonjs\":\"zeta-editor\",\"commonjs2\":\"zeta-editor\",\"amd\":\"zeta-editor\",\"root\":[\"zeta\",\"Editor\"]}","webpack://zeta-ui/webpack/bootstrap","webpack://zeta-ui/webpack/runtime/create fake namespace object","webpack://zeta-ui/webpack/runtime/define property getters","webpack://zeta-ui/webpack/runtime/hasOwnProperty shorthand","webpack://zeta-ui/webpack/runtime/make namespace object","webpack://zeta-ui/webpack/startup"],"names":["ArgumentIterator","args","value","done","length","definePrototype","next","type","arr","isPlainObject","is","shift","nextAll","push","fn","string","ZetaEventContainer","zeta","getValue","self","control","prop","fireEvent","needEvaluate","waterpipe","displayValue","getTemplateContext","lastValue","emitPropertyChange","DisplayValue","rawValue","_","createPrivateStore","UIContext","getContainer","values","extend","toJSON","update","container","each","toolsetStates","i","v","clearFlag","FLAG_ENABLED","emitAsync","foreachControl","FLAG_ACTIVE","FLAG_VISIBLE","isDisabledByToolset","flushEvents","validate","reset","UIToolsetState","toolset","context","state","options","initFlagState","name","all","add","pick","isFunction","enabled","isEnabled","setFlag","on","event","handler","CONST_PROPS","RE_PIPE","speciesMap","WeakMap","executingControls","Set","importedControls","Map","exportedControls","inheritedValues","eventHandlers","unhandlaebleOption","Object","freeze","handleable","invalidElements","getUniqueName","setEventHandlers","kv","createEventContainer","element","captureDOMEvents","normalizeTouchEvents","tap","e","cur","target","parentNode","getContexts","emit","undefined","matchWord","focusedBy","source","emitStateChange","createContext","getSpeciesSpec","species","renderer","parentContext","dom","parentElement","parentControl","any","parentContainer","$","addClass","appendControls","createInnerContext","childContext","defineGetterProperty","oldValue","parent","allowExport","spec","mapGet","ctor","append","makeArray","controls","defaultOrder","set","sort","a","b","m","mult","a1","a2","b1","b2","either","get","callback","enabledOnly","setInitial","initialValues","getOwnPropertyNames","copy","defineHiddenProperty","setValue","newValue","suppressEvent","inited","inited2","emitEvent","currentEvent","promise","errors","validateOnSetValue","result","required","reject","then","obj","validateAll","focusOnFailed","failed","promises","catch","w","containsOrEquals","resolveAll","comparePosition","getLabel","labels","String","globalContext","default","wrapValue","test","defineInheritedProperty","defaultValue","listenProperty","UIControl","prototype","getInheritProperty","dict","proto","hasOwnProperty","dv","isInherited","notifyChildren","exportProperty","isDefault","ucfirst","bind","defineAliasProperty","exports","exportControls","id","prev","len","arguments","newControls","slice","hasRole","role","single","data","bubble","emitAsyncEvent","recursive","requireChildControls","property","oldValues","newValues","handlePropertyChange","delete","handlers","getRoles","extraOptions","requireScope","toolsetState","watch","getPrototypeOf","label","execute","shortcut","icon","randomId","defaultExport","previousSibling","nextSibling","focused","pending","active","isActive","visible","isHidden","contains","raw","copyValue","forEach","getElementForRole","fireInit","call","focus","resolve","has","finish","resolved","bubbles","run","command","console","error","waitForExecution","isThenable","lock","always","clear","destroy","cancelLock","mapRemove","splice","indexOf","remove","setTimeout","removeNode","autoDestroy","defineObservableProperty","showIcon","showText","hideDisabledChild","hideCalloutOnBlur","hideCalloutOnExecute","enableChildren","UIControlSpecies","baseClass","createNamedFunction","replace","clone","initData","inherit","cloneData","render","props","document","createElement","UIToolset","exportedLabels","addLabels","language","key","use","i18n","import","export","define","definedType","defineInternal","Error","specs","defaultOptions","setDefaultTemplate","template","templates","defineLayout","create","iter","parseOptions","FLAG_NAMES","split","computeFn","component","getFlag","flag","bit","flags","some","every","noop","hiddenWhenDisabled","realm","_defaultExport","FLIP_POS","top","left","right","bottom","DIR_SIGN","root","documentElement","snaps","cssFromPoint","x","y","origin","refRect","getRect","Node","window","dirX","dirY","style","clientY","clientX","width","height","position","to","dir","within","offset","body","appendChild","css","maxWidth","maxHeight","oDirX","oDirY","inset","toPlainRect","expand","winRect","elmRect","margin","point","transform","p","pSize","pMax","sTransform","center","rDir","Math","abs","elmRectNoMargin","keys","snapToElement","isVisible","scrollParent","getScrollParent","rect","area","max","apply","snap","setZIndexOver","unsnap","getZIndex","pseudo","getComputedStyle","zIndex","parseInt","getZIndexOver","over","maxZIndex","iterator","createTreeWalker","iterateNode","updateSnaps","setTimeoutOnce","passive","parseExecute","parseControlsAndExecute","parseIconAndExecute","shouldExecuteOnClick","elm","getOverlayElement","init","runCSSTransition","focusreturn","beforeDestroy","closeDialog","Dialog","buttonset","pinnable","modal","title","description","errorMessage","snapTo","screen","availWidth","availHeight","activeElement","message","handled","focusout","escape","afterExecute","enter","T_SHOWICON","T_SHOWTEXT","T_ICON","Label","executeButton","Button","danger","click","SubmitButton","ButtonSet","textbox","GenericComponent","editor","include","editorOptions","enable","stateChange","focusin","matchSelector","PRESET_KEY","DEFAULT_PRESET","overrides","extractText","initOptions","preset","presetDefinition","originalInit","inline","disallowedElement","widgets","presetWidget","typer","getStaticWidget","TextBox","preventLeave","placeholder","ui","currentNotify","action","cancel","leaveForm","dialog","submit","button","generic","timeout","initPrompt","targetUI","valueEnabled","valueLabel","cancelVisible","dialogTitle","dialogDescription","dialogData","alert","confirm","prompt","notify","kind","factory","getNextVisible","ButtonList","showSeparatorBefore","showSeparatorAfter","prevVisible","nextVisible","Callout","alwaysShowCallout","checkboxToggleValue","Checkbox","space","getNextItem","getButtonList","showCallout","callout","setClass","calloutParent","getClass","catchAsync","hideCallout","activeButton","isSubMenu","Menu","mouseenter","mouseleave","old","keystroke","RegExp","$1","childExecuted","setDropdownValue","dropdown","forceUpdate","choices","defaultChoice","match","allowEmpty","hintValue","selectedText","valueAsLabel","selected","updateDropdownChoices","choiceObj","isArray","Array","parseTemplateConstant","choiceButton","newButtons","Dropdown","choice","MS_PER_DAY","TIMEZONE_OFFSET","Date","getTimezoneOffset","INPUT_TYPES","datetime","day","week","month","MONTH_NAMES","WEEKDAYS_NAMES","defaultLocale","activeTyper","range","count","loadLabels","lang","locale","monthFormatter","Intl","DateTimeFormat","weekdayFormatter","weekday","importDefaultLabels","str","format","date","getDay","getFullYear","d","getMonth","getDate","getHours","getMinutes","sameMonth","parseMaxima","stepDate","$2","isNaN","makeTime","h","setHours","toNumericValue","mode","fromNumericValue","normalizeDate","min","setDate","setSeconds","step","formatDate","end","monthPart","showMonth","currentMonth","year","firstDay","$buttons","removeClass","numDays","numDaysLast","children","text","today","eq","toggle","isMinMonth","isMaxMonth","prevMonth","nextMonth","filter","toggleClass","initControls","dropdownOptions","monthChoices","setToday","hour","number","loop","minute","timeSeperator","digits","meridiem","propertyChange","initDatepickerCallout","executed","calendar","clock","calender","contextChange","minuteStep","okButton","hideMenu","menu","stepValue","tx","widget","commandName","Calendar","selectedDate","updateValue","$table","repeat","appendTo","find","monthDelta","hasClass","textContent","mousewheel","Clock","mousedown","rad","atan2","centerY","centerX","PI","curM","curH","getAttribute","round","deltaH","floor","mousewheelTimeout","preventDefault","DatePicker","IS_TOUCH","nativeInput","valueAsNumber","softSelectedDate","invoke","selection","selectAll","insertText","commands","stepUp","stepDown","contentChange","showMenu","retainFocus","softDate","updateFlag","optional","FieldSet","resetFileInput","input","originalParent","form","prependTo","FileInput","autoReset","multiple","files","guards","deferreds","ensureFormPromise","store","Promise","settleFormPromise","resolveOrReject","deferred","initForm","Form","beforeExecute","cancelled","SHOW_DIALOG","activeInput","activeDialog","initCallout","insertItem","suggestions","encode","keepWS","createTextNode","innerHTML","toValue","toValueObject","sortValues","localeCompare","valueChanged","fuzzyMatch","haystack","needle","vector","toLowerCase","j","lastpos","l","charAt","firstIndex","Infinity","consecutiveMatches","formattedText","join","substr","getSuggestions","exclude","allowedValues","map","knownValues","processSuggestions","concat","matches","showSuggestions","suggestionCount","allowFreeInput","showSuggestionDialog","list","checkbox","entry","before","buttonlist","currentValues","allValues","checked","span","lastChild","rootNode","baseCaret","moveTo","insertHtml","KeywordInput","tag","editable","detach","setup","select","upArrow","downArrow","textInput","getSelection","LinkButton","isKeyboardEvent","numOfDigits","currentText","NumberInput","validation","allowChars","RichTextInput","toolbar","UI","process","jQuery","require","module","waterpipe_","pipes","varargs","o","hasArgs","Editor","parseCSS","isCssUrlValue","textInputAllowed","beginDrag","beginPinchZoom","getShortcut","setShortcut","focusable","setModal","releaseFocus","locked","domReady","tagName","connected","acceptNode","combineNodeFilters","iterateNodeToArray","getCommonAncestor","parentsAndSelf","selectIncludeSelf","selectClosestRelative","createNodeIterator","bindUntil","dispatchDOMMouseEvent","getScrollOffset","getContentRect","scrollBy","scrollIntoView","makeSelection","getRects","rectEquals","rectCovers","rectIntersects","pointInRect","mergeRect","elementFromPoint","IS_IOS","IS_IE10","IS_IE","IS_MAC","isUndefinedOrNull","isArrayLike","grep","setAdd","equal","combineFn","setImmediate","setImmediateOnce","throwNotFunction","getOwnPropertyDescriptors","defineOwnProperty","watchOnce","watchable","deepFreeze","iequal","camel","hyphenate","lcfirst","trim","htmlDecode","setPromiseTimeout","defaultRenderer","zeta_ui_datepicker","zeta_ui_keyword","MAC_CTRLKEY","ctrl","alt","tab","pageUp","pageDown","backspace","leftArrow","rightArrow","home","formatShortcutWin","formatShortcutMac","formatShortcut","createRipple","until","p1","pow","p2","p3","p4","scalePercent","sqrt","parseFloat","$overlay","$anim","closest","touches","BOOL_ATTRS","states","parsedTemplates","defaultTemplates","overrideTemplates","DOMState","current","layouts","createDocumentFragment","content","DocumentFragment","parseTemplate","cacheKeyObj","parentTemplateName","cached","index","binds","roles","addBind","expression","extractPartialBinds","attr","partialBind","nodeName","hasOverrideTemplate","includeTemplate","node","tmp","childNodes","attributes","cloneNode","$controls","eachAttr","replaceWith","outerHTML","cache","expr","evalAsObject","nodeCount","processDOM","nodeToReplace","nodeType","evalTemplate","globals","UIControlDOM","layoutType","nodes","bindedNode","positions","UIControlDOMPosition","cssClass","appendControl","reBold","reItalic","loading","disabled","hidden","k","start","insertBefore","display","condition","of","layout","parentState","prevPos","nextPos","removeControl","insertAfter","pos","dst","src","Function"],"mappings":"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,gB;IAAkBC,S,aAAAA,S;IAAWC,c,aAAAA,c;IAAgBC,W,aAAAA,W;IAAaC,W,aAAAA,W;IAAaC,S,aAAAA,S;IAAWvjB,O,aAAAA,O;IAASwjB,Q,aAAAA,Q;IAAUxH,W,aAAAA,W;IAAayH,Y,aAAAA,Y;IAAc5iB,K,aAAAA,K;;;;;;;;;;;;;;;ACAnO;gBAAiEvO,yC;IAA7BmP,I,aAAAA,I;IAAMiiB,M,aAAAA,M;IAAQ7hB,U,aAAAA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAlD;iBAA2kBvP,0C;IAAviBqxB,Q,cAAAA,Q;IAAUC,O,cAAAA,O;IAASza,S,cAAAA,S;IAAWuE,a,cAAAA,a;IAAevR,e,cAAAA,e;IAAiB0nB,S,cAAAA,S;IAAW5nB,gB,cAAAA,gB;IAAkB6nB,U,cAAAA,U;IAAYC,kB,cAAAA,kB;IAAoBxZ,W,cAAAA,W;IAAayZ,kB,cAAAA,kB;IAAoBC,iB,cAAAA,iB;IAAmBC,c,cAAAA,c;IAAgBC,iB,cAAAA,iB;IAAmBC,qB,cAAAA,qB;IAAuBC,kB,cAAAA,kB;IAAoB/Z,gB,cAAAA,gB;IAAkB5M,I,cAAAA,I;IAAM4mB,S,cAAAA,S;IAAWC,qB,cAAAA,qB;IAAuBpiB,U,cAAAA,U;IAAYkP,Q,cAAAA,Q;IAAUF,Q,cAAAA,Q;IAAUqT,e,cAAAA,e;IAAiBnb,e,cAAAA,e;IAAiBob,c,cAAAA,c;IAAgBC,Q,cAAAA,Q;IAAUC,c,cAAAA,c;IAAgBC,a,cAAAA,a;IAAele,O,cAAAA,O;IAASme,Q,cAAAA,Q;IAAU5c,W,cAAAA,W;IAAa6c,U,cAAAA,U;IAAYC,U,cAAAA,U;IAAYC,c,cAAAA,c;IAAgBC,W,cAAAA,W;IAAaC,S,cAAAA,S;IAAWC,gB,cAAAA,gB;;;;;;;;;;;;;;;ACAtjB;IAAoCC,M,GAA6C9yB,4C;IAArC+yB,O,GAAqC/yB,6C;IAA5BgzB,K,GAA4BhzB,2C;IAArBizB,M,GAAqBjzB,4C;IAAb6oB,Q,GAAa7oB,8C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAjF;iBAAyuBA,0C;IAArsBkT,I,cAAAA,I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","file":"zeta-ui.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"zeta-dom\"), require(\"waterpipe\"), require(\"jQuery\"), (function webpackLoadOptionalExternalModule() { try { return require(\"zeta-editor\"); } catch(e) {} }()), require(\"promise-polyfill\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"zeta-dom\", \"waterpipe\", \"jQuery\", \"zeta-editor\", \"promise-polyfill\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"zeta-dom\"), require(\"waterpipe\"), require(\"jQuery\"), (function webpackLoadOptionalExternalModule() { try { return require(\"zeta-editor\"); } catch(e) {} }()), require(\"promise-polyfill\")) : factory(root[\"zeta\"], root[\"waterpipe\"], root[\"jQuery\"], root[\"zeta\"][\"Editor\"], root[\"promise-polyfill\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function(__WEBPACK_EXTERNAL_MODULE__163__, __WEBPACK_EXTERNAL_MODULE__160__, __WEBPACK_EXTERNAL_MODULE__609__, __WEBPACK_EXTERNAL_MODULE__47__, __WEBPACK_EXTERNAL_MODULE__804__) {\nreturn ","var map = {\n\t\"./en.js\": 24,\n\t\"./en/zeta.ui.datepicker.json\": 935,\n\t\"./en/zeta.ui.keyword.json\": 3\n};\nvar fakeMap = {\n\t\"3\": 1,\n\t\"24\": 9,\n\t\"935\": 1\n};\n\nfunction webpackAsyncContext(req) {\n\treturn webpackAsyncContextResolve(req).then(function(id) {\n\t\treturn __webpack_require__.t(id, fakeMap[id])\n\t});\n}\nfunction webpackAsyncContextResolve(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\t\treturn map[req];\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.resolve = webpackAsyncContextResolve;\nwebpackAsyncContext.id = 839;\nmodule.exports = webpackAsyncContext;","import { definePrototype, is, isPlainObject } from \"../include/zeta-dom/util.js\";\r\n\r\nfunction ArgumentIterator(args) {\r\n    this.value = null;\r\n    this.args = args;\r\n    this.done = !args.length;\r\n}\r\n\r\ndefinePrototype(ArgumentIterator, {\r\n    next: function (type) {\r\n        // @ts-ignore: type inference issue\r\n        var arr = this.args;\r\n        if (type === 'object' ? isPlainObject(arr[0]) : typeof type === 'string' ? typeof arr[0] === type : is(arr[0], type)) {\r\n            this.value = arr.shift();\r\n            this.done = !arr.length;\r\n            return true;\r\n        }\r\n    },\r\n    nextAll: function (type) {\r\n        var arr = [];\r\n        while (this.next(type) && arr.push(this.value));\r\n        return arr;\r\n    },\r\n    fn: function () {\r\n        // @ts-ignore: type inference issue\r\n        return this.next('function') && this.value;\r\n    },\r\n    string: function () {\r\n        // @ts-ignore: type inference issue\r\n        return this.next('string') && this.value;\r\n    }\r\n});\r\n\r\nexport default ArgumentIterator;\r\n","import zeta from \"zeta-dom\";const { EventContainer: ZetaEventContainer } = zeta; export { ZetaEventContainer };","import waterpipe from \"../include/external/waterpipe.js\";\r\nimport { definePrototype } from \"../include/zeta-dom/util.js\";\r\nimport { emitPropertyChange } from \"./UIControl.js\";\r\n\r\n/**\r\n * @param {DisplayValue} self\r\n * @param {ZetaUI.UIControl} control\r\n * @param {string} prop\r\n * @param {boolean=} fireEvent\r\n */\r\nfunction getValue(self, control, prop, fireEvent) {\r\n    if (self.needEvaluate) {\r\n        var value = waterpipe(self.displayValue, control.getTemplateContext(true));\r\n        if (fireEvent !== false && value !== self.lastValue) {\r\n            emitPropertyChange(control, prop, self.lastValue, value);\r\n        }\r\n        self.lastValue = value;\r\n        return value;\r\n    }\r\n    return self.displayValue;\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {string} prop\r\n * @param {any} rawValue\r\n * @param {any} displayValue\r\n * @param {boolean=} needEvaluate\r\n * @param {boolean=} fireEvent\r\n */\r\nfunction DisplayValue(control, prop, rawValue, displayValue, needEvaluate, fireEvent) {\r\n    var self = this;\r\n    self.rawValue = rawValue;\r\n    self.displayValue = displayValue;\r\n    self.lastValue = displayValue;\r\n    self.needEvaluate = needEvaluate;\r\n    getValue(self, control, prop, fireEvent);\r\n}\r\n\r\ndefinePrototype(DisplayValue, {\r\n    getValue: function (control, prop, fireEvent) {\r\n        // @ts-ignore: type inference issue\r\n        return getValue(this, control, prop, fireEvent);\r\n    }\r\n});\r\n\r\nexport default DisplayValue;\r\n","import { createPrivateStore, definePrototype, each, extend } from \"../include/zeta-dom/util.js\";\r\nimport { clearFlag, FLAG_ACTIVE, FLAG_ENABLED, FLAG_VISIBLE, isDisabledByToolset } from \"./flags.js\";\r\nimport { foreachControl } from \"./UIControl.js\";\r\n\r\n/** @type {Zeta.PrivateStore<UIContext, (a: UIContext) => Internal.UIEventContainer>} */\r\nconst _ = createPrivateStore();\r\n\r\n/** @class */\r\nfunction UIContext(getContainer, values) {\r\n    extend(this, values);\r\n    _(this, getContainer);\r\n}\r\n\r\ndefinePrototype(UIContext, {\r\n    toJSON: function () {\r\n        return extend({}, this);\r\n    },\r\n    update: function (values) {\r\n        var container = _(this)(this);\r\n        extend(this, values);\r\n        each(container.toolsetStates, function (i, v) {\r\n            clearFlag(v, FLAG_ENABLED);\r\n            container.emitAsync('contextChange', v);\r\n        });\r\n        foreachControl(container.control, function (v) {\r\n            clearFlag(v, FLAG_ENABLED | FLAG_ACTIVE | FLAG_VISIBLE);\r\n            if (!isDisabledByToolset(v)) {\r\n                container.emitAsync('contextChange', v);\r\n            }\r\n        });\r\n        container.flushEvents();\r\n    },\r\n    validate: function () {\r\n        return _(this)(this).control.validate();\r\n    },\r\n    reset: function () {\r\n        _(this)(this).control.reset();\r\n    }\r\n});\r\n\r\nexport default UIContext;\r\n","import { FLAG_ENABLED, initFlagState, isEnabled, setFlag } from \"./flags.js\";\r\nimport { createPrivateStore, definePrototype, isFunction, pick } from \"../include/zeta-dom/util.js\";\r\n\r\nconst _ = createPrivateStore();\r\n\r\n/** @type {(...args: ConstructorParameters<typeof ZetaUI.UIToolsetState>) => void} */\r\nfunction UIToolsetState(container, toolset, context) {\r\n    var self = this;\r\n    var state = _(self, {\r\n        container: container,\r\n        options: toolset.options\r\n    });\r\n    initFlagState(self, state);\r\n    self.name = toolset.name;\r\n    self.context = context;\r\n    self.all = {};\r\n    // @ts-ignore: type inference issue\r\n    container.add(self, pick(toolset.options, isFunction));\r\n    container.emitAsync('contextChange', self);\r\n}\r\n\r\ndefinePrototype(UIToolsetState, {\r\n    get enabled() {\r\n        return isEnabled(this);\r\n    },\r\n    set enabled(value) {\r\n        setFlag(this, FLAG_ENABLED, value);\r\n    },\r\n    on: function (event, handler) {\r\n        return _(this).container.add(this, event, handler);\r\n    }\r\n});\r\n\r\nexport default UIToolsetState;\r\n","import dom from \"../include/zeta-dom/dom.js\";\r\nimport $ from \"../include/external/jquery.js\";\r\nimport { cancelLock, lock } from \"../include/zeta-dom/domLock.js\";\r\nimport { comparePosition, containsOrEquals, removeNode } from \"../include/zeta-dom/domUtil.js\";\r\nimport { ZetaEventContainer } from \"../include/zeta-dom/events.js\";\r\nimport { always, any, createPrivateStore, defineAliasProperty, defineGetterProperty, defineHiddenProperty, defineObservableProperty, definePrototype, each, either, extend, hasOwnProperty, is, isFunction, isPlainObject, isThenable, kv, makeArray, mapGet, mapRemove, matchWord, pick, randomId, reject, resolve, resolveAll, single, ucfirst, watch } from \"../include/zeta-dom/util.js\";\r\nimport { copy } from \"../util/common.js\";\r\nimport { clearFlag, FLAG_ACTIVE, FLAG_ENABLED, FLAG_VISIBLE, initFlagState, isActive, isEnabled, isHidden, setFlag } from \"./flags.js\";\r\nimport DisplayValue from \"./DisplayValue.js\";\r\nimport UIContext from \"./UIContext.js\";\r\nimport UIToolsetState from \"./UIToolsetState.js\";\r\nimport globalContext from \"../globalContext.js\";\r\n\r\nconst CONST_PROPS = 'element name type parent all controls context previousSibling nextSibling';\r\nconst RE_PIPE = /\\{\\{((?:[^\\}]|\\}(?!\\}))+)\\}\\}/;\r\n\r\nconst speciesMap = new WeakMap();\r\nconst executingControls = new Set();\r\nconst importedControls = new Map();\r\nconst exportedControls = {};\r\nconst inheritedValues = {};\r\nconst eventHandlers = {};\r\nconst unhandlaebleOption = Object.freeze({\r\n    handleable: false\r\n});\r\n\r\n/** @type {Zeta.PrivateStore<ZetaUI.UIControl, Internal.UIControlState> & Zeta.PrivateStore<UIContext, Internal.UIEventContainer>} */\r\n// @ts-ignore: type inference issue\r\nconst _ = createPrivateStore();\r\n\r\nvar invalidElements;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction getUniqueName(all, name) {\r\n    for (var i = 0; all[name + (i || '')]; i++);\r\n    return name + (i || '');\r\n}\r\n\r\n/**\r\n * @param {string} type\r\n * @param {string | object} event\r\n * @param {Zeta.AnyFunction=} handler\r\n */\r\nfunction setEventHandlers(type, event, handler) {\r\n    eventHandlers[type] = isPlainObject(event) || kv(event, handler);\r\n}\r\n\r\n/**\r\n * @param {Element} element\r\n * @param {UIContext} context\r\n * @returns {Internal.UIEventContainer}\r\n */\r\nfunction createEventContainer(element, context) {\r\n    /** @type {Internal.UIEventContainer} */\r\n    // @ts-ignore: type inference issue\r\n    var container = new ZetaEventContainer(element, context, {\r\n        captureDOMEvents: true,\r\n        normalizeTouchEvents: true\r\n    });\r\n    container.tap(function (e) {\r\n        var control;\r\n        // @ts-ignore: type inference issue\r\n        for (var cur = e.target; !control && cur && cur !== element; cur = cur.parentNode) {\r\n            control = container.getContexts(cur)[0];\r\n        }\r\n        if (control && isEnabled(control)) {\r\n            container.emit(e, e.target === element ? control.element : undefined);\r\n            if (matchWord(e.type, 'focusin focusout')) {\r\n                // @ts-ignore: internal update read-only property\r\n                control.focusedBy = e.source;\r\n                emitStateChange(control);\r\n            } else if (matchWord(e.type, 'asyncStart asyncEnd')) {\r\n                foreachControl(control, function (v) {\r\n                    emitStateChange(v);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    return container;\r\n}\r\n\r\n/**\r\n * @param {Zeta.PrivateStore<ZetaUI.UIControlSpecies, Internal.UIControlSpeciesSpec>} getSpeciesSpec\r\n * @param {ZetaUI.UIControlSpecies} species\r\n * @param {ZetaUI.UIControlRenderer} renderer,\r\n * @param {HTMLElement} element\r\n * @param {*} values\r\n */\r\nfunction createContext(getSpeciesSpec, species, renderer, element, values) {\r\n    var context = new UIContext(_, values);\r\n    var parentContext = dom.context;\r\n    var parentElement = null;\r\n    var parentControl = any(executingControls, function (v) {\r\n        return dom.focused(v.element);\r\n    });\r\n    if (parentControl) {\r\n        parentContext = parentControl.context;\r\n        parentElement = parentControl.element;\r\n    } else if (is(parentContext, UIContext)) {\r\n        var parentContainer = _(parentContext);\r\n        // @ts-ignore: type inference issue\r\n        parentElement = parentContainer.event && parentContainer.event.context.element;\r\n    }\r\n    $(element).addClass('zui-root');\r\n\r\n    var container = createEventContainer(element, context);\r\n    extend(container, {\r\n        toolset: getSpeciesSpec(species).toolset,\r\n        toolsetStates: new Map(),\r\n        parentContext: parentContext,\r\n        parentElement: parentElement,\r\n        getSpeciesSpec: getSpeciesSpec,\r\n        renderer: renderer\r\n    });\r\n    _(context, container);\r\n    appendControls(container, null, [species], true);\r\n    container.flushEvents();\r\n    return container.context;\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction createInnerContext(control) {\r\n    var state = _(control);\r\n    if (!is(state.childContext, UIContext)) {\r\n        var context = new UIContext(_);\r\n        if (!('value' in state.options)) {\r\n            state.value = context;\r\n            defineGetterProperty(control.context, control.name, function () {\r\n                return context;\r\n            }, function (value) {\r\n                var oldValue = extend({}, context);\r\n                emitPropertyChange(control, 'value', oldValue, extend(context, value));\r\n            });\r\n        }\r\n        state.childContext = context;\r\n    }\r\n    return state.childContext;\r\n}\r\n\r\n/**\r\n * @param {Internal.UIEventContainer} container\r\n * @param {ZetaUI.UIControl | null} parent\r\n * @param {ZetaUI.UIControlSpecies[]} species\r\n * @param {boolean=} allowExport\r\n * @param {any=} options\r\n */\r\nfunction appendControls(container, parent, species, allowExport, options) {\r\n    each(species, function (i, v) {\r\n        var spec = container.getSpeciesSpec(v);\r\n        if (spec.type === 'import') {\r\n            mapGet(importedControls, parent, Object)[spec.name] = true;\r\n            appendControls(container, parent, exportedControls[spec.name] || [], true, spec.options);\r\n        } else {\r\n            var control = new spec.ctor(container, v, parent, allowExport, options);\r\n            container.renderer.append(control, parent || container, true);\r\n            appendControls(container, control, makeArray(spec.options.controls));\r\n            emitStateChange(control);\r\n            if (!parent) {\r\n                // @ts-ignore: internal update read-only property\r\n                container.control = control;\r\n            }\r\n        }\r\n    });\r\n    if (parent && species[0]) {\r\n        if (parent.controls[1]) {\r\n            var defaultOrder = new Map();\r\n            each(parent.controls, function (i, v) {\r\n                defaultOrder.set(v, i);\r\n            });\r\n            parent.controls.sort(function (a, b) {\r\n                function m(a, b, prop, mult) {\r\n                    return !a[prop] ? 0 : a[prop] === '*' || matchWord(b.name, a[prop]) ? mult : -mult;\r\n                }\r\n                var a1 = m(a, b, 'after', 1);\r\n                var a2 = m(a, b, 'before', -1);\r\n                var b1 = m(b, a, 'after', -1);\r\n                var b2 = m(b, a, 'before', 1);\r\n                if (either(!a1 && !a2, !b1 && !b2)) {\r\n                    return a1 || a2 || b1 || b2;\r\n                }\r\n                return (a1 + a2 + b1 + b2) || defaultOrder.get(a) - defaultOrder.get(b);\r\n            });\r\n        }\r\n        emitStateChange(parent);\r\n    }\r\n}\r\n\r\nfunction foreachControl(control, callback, enabledOnly) {\r\n    if (!enabledOnly || isEnabled(control)) {\r\n        callback(control);\r\n        each(control.controls, function (i, v) {\r\n            foreachControl(v, callback, enabledOnly);\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction setInitial(control) {\r\n    var state = _(control);\r\n    var values = state.initialValues;\r\n    each(Object.getOwnPropertyNames(control), function (i, v) {\r\n        if (!matchWord(v, CONST_PROPS)) {\r\n            values[v] = control[v];\r\n        }\r\n    });\r\n    copy(values, state.values);\r\n    defineHiddenProperty(values, 'value', state.value);\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {*} newValue\r\n * @param {boolean=} suppressEvent\r\n */\r\nfunction setValue(control, newValue, suppressEvent) {\r\n    var state = _(control);\r\n    if (!state.inited) {\r\n        state.value = newValue;\r\n        return true;\r\n    }\r\n    if (!state.inited2) {\r\n        emitEvent(control, 'init', null, unhandlaebleOption);\r\n    }\r\n    var oldValue = state.value;\r\n    if (oldValue === newValue) {\r\n        return false;\r\n    }\r\n    var currentEvent = state.container.event;\r\n    var promise = (!currentEvent || currentEvent.type !== 'setValue' || currentEvent.context !== control) && emitEvent(control, 'setValue', {\r\n        oldValue: oldValue,\r\n        newValue: newValue\r\n    });\r\n    if (promise) {\r\n        return state.value !== oldValue;\r\n    }\r\n    state.value = newValue;\r\n    if (!suppressEvent) {\r\n        emitPropertyChange(control, 'value', oldValue, newValue);\r\n        if (control.errors || control.validateOnSetValue) {\r\n            validate(control);\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction validate(control) {\r\n    var result;\r\n    if (isEnabled((control))) {\r\n        if (control.required && !control.value) {\r\n            result = reject('required');\r\n        } else {\r\n            result = emitEvent(control, 'validate');\r\n        }\r\n    }\r\n    if (result) {\r\n        result.then(function () {\r\n            control.errors = null;\r\n        }, function (errors) {\r\n            if (isPlainObject(errors)) {\r\n                control.errors = errors;\r\n            } else {\r\n                var obj = {};\r\n                each(makeArray(errors), function (i, v) {\r\n                    obj[v] = v;\r\n                });\r\n                control.errors = obj;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    control.errors = null;\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction validateAll(control) {\r\n    var focusOnFailed = !invalidElements && !matchWord(dom.getEventSource(control.element), 'script touch');\r\n    var failed = invalidElements || (focusOnFailed && (invalidElements = []));\r\n    var promises = [];\r\n    _(control).container.flushEvents();\r\n    foreachControl(control, function (v) {\r\n        var promise = validate(v);\r\n        if (promise) {\r\n            promise.catch(function () {\r\n                if (failed && !any(failed, function (w) {\r\n                    return containsOrEquals(v.element, w);\r\n                })) {\r\n                    failed.push(v.element);\r\n                }\r\n            });\r\n            promises.push(promise);\r\n        }\r\n    }, true);\r\n    if (focusOnFailed) {\r\n        invalidElements = null;\r\n    }\r\n    if (promises[0]) {\r\n        var promise = resolveAll(promises);\r\n        promise.catch(function () {\r\n            if (focusOnFailed && !any(failed, function (v) {\r\n                return dom.focused(v);\r\n            })) {\r\n                failed.sort(comparePosition);\r\n                dom.focus(failed[0]);\r\n            }\r\n        });\r\n        return promise;\r\n    }\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction reset(control) {\r\n    var state = _(control);\r\n    var initialValues = state.initialValues;\r\n    control.errors = null;\r\n    clearFlag(control);\r\n    if (initialValues) {\r\n        // use each() instead of extend()\r\n        // to ensure all values copied even if the value is undefined\r\n        each(initialValues, function (i, v) {\r\n            (i in state.values ? state.values : control)[i] = v;\r\n        });\r\n        setValue(control, initialValues.value, true);\r\n    }\r\n    emitEvent(control, 'reset', null, unhandlaebleOption);\r\n    emitStateChange(control);\r\n}\r\n\r\nfunction getLabel(source, name) {\r\n    var labels = source.toolset.labels;\r\n    if (name in labels) {\r\n        getLabel.value = String(labels[name][globalContext.language] || labels[name].default || '');\r\n        return true;\r\n    }\r\n}\r\ngetLabel.value = '';\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {string} prop\r\n * @param {string} value\r\n * @param {boolean=} fireEvent\r\n */\r\nfunction wrapValue(control, prop, value, fireEvent) {\r\n    if (typeof value === 'string') {\r\n        var state = _(control);\r\n        var displayValue = prop !== 'icon' && (getLabel(state.container, value) || getLabel(state, value)) ? getLabel.value : value;\r\n        var needEvaluate = RE_PIPE.test(displayValue);\r\n        if (displayValue !== value || needEvaluate) {\r\n            return new DisplayValue(control, prop, value, displayValue, needEvaluate, fireEvent);\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\n/**\r\n * @param {string | object} name\r\n * @param {any=} defaultValue\r\n */\r\nfunction defineInheritedProperty(name, defaultValue) {\r\n    each(isPlainObject(name) || kv(name, defaultValue), function (i, v) {\r\n        inheritedValues[i] = v;\r\n        listenProperty(UIControl.prototype, i);\r\n    });\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl | null} control\r\n */\r\nfunction getInheritProperty(control, name) {\r\n    for (; control; control = control.parent) {\r\n        var dict = _(control).values;\r\n        if (name in dict) {\r\n            return dict[name];\r\n        }\r\n    }\r\n    return inheritedValues[name];\r\n}\r\n\r\n/**\r\n * @param {object} proto\r\n * @param {string} prop\r\n */\r\nfunction listenProperty(proto, prop) {\r\n    if (!(prop in proto) && !matchWord(prop, CONST_PROPS)) {\r\n        defineGetterProperty(proto, prop, function () {\r\n            var self = this;\r\n            var value = hasOwnProperty(inheritedValues, prop) ? getInheritProperty(self, prop) : _(self).values[prop];\r\n            return is(value, DisplayValue) ? value.lastValue : value;\r\n        }, function (value) {\r\n            var self = this;\r\n            var dict = _(self).values;\r\n            var dv = is(dict[prop], DisplayValue);\r\n            if (value !== dict[prop] && (!dv || value !== dv.rawValue)) {\r\n                var isInherited = hasOwnProperty(inheritedValues, prop);\r\n                var oldValue = dv ? dv.lastValue : dict[prop];\r\n                if (isInherited && (value === null || value === undefined)) {\r\n                    delete dict[prop];\r\n                } else {\r\n                    dict[prop] = wrapValue(self, prop, value);\r\n                }\r\n                var newValue = self[prop];\r\n                if (_(self).inited) {\r\n                    emitPropertyChange(self, prop, oldValue, newValue);\r\n                    if (isInherited) {\r\n                        var notifyChildren = function (cur) {\r\n                            each(cur.controls, function (i, v) {\r\n                                if (!(prop in _(v).values)) {\r\n                                    emitPropertyChange(v, prop, oldValue, newValue);\r\n                                    notifyChildren(v);\r\n                                }\r\n                            });\r\n                        };\r\n                        notifyChildren(self);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        each(mapGet(speciesMap, proto), function (i, v) {\r\n            _(v).values[prop] = wrapValue(v, prop, v[prop]);\r\n            delete v[prop];\r\n            // need to also wrap value of initial values\r\n            // so that it will be properly displayed after reset\r\n            var initialValues = _(v).initialValues;\r\n            initialValues[prop] = prop in initialValues ? wrapValue(v, prop, initialValues[prop], false) : undefined;\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {ZetaUI.UIContext} context\r\n * @param {string} prop\r\n * @param {boolean=} isDefault\r\n */\r\nfunction exportProperty(control, context, prop, isDefault) {\r\n    var name = control.name + (isDefault ? '' : ucfirst(prop));\r\n    if (isFunction(control[prop])) {\r\n        defineHiddenProperty(context, name, control[prop].bind(control));\r\n    } else {\r\n        if (hasOwnProperty(context, name)) {\r\n            control[prop] = context[name];\r\n        }\r\n        defineAliasProperty(context, name, control, prop);\r\n    }\r\n    _(control).exports.push(name);\r\n}\r\n\r\n/**\r\n * @param {string} id\r\n */\r\nfunction exportControls(id) {\r\n    var arr = exportedControls[id] || (exportedControls[id] = []);\r\n    var prev = arr.length;\r\n    for (var i = 1, len = arguments.length; i < len; i++) {\r\n        arr[arr.length] = arguments[i];\r\n    }\r\n    var newControls = arr.slice(prev);\r\n    each(importedControls, function (i, v) {\r\n        if (v[id]) {\r\n            appendControls(_(i).container, i, newControls, true, {});\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * @param {Element} element\r\n * @param {string} role\r\n */\r\nfunction hasRole(element, role) {\r\n    var context = is(dom.getEventContext(element).context, UIContext);\r\n    var control = context && _(context).getContexts(element)[0];\r\n    return control && single(role, function (v) {\r\n        // @ts-ignore\r\n        return control.hasRole(v);\r\n    });\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Events\r\n * -------------------------------------- */\r\n\r\nfunction emitEvent(control, event, data, bubble) {\r\n    return _(control).container.emit(event, control, data, bubble);\r\n}\r\n\r\nfunction emitAsyncEvent(control, event, data, bubble, callback) {\r\n    return _(control).container.emitAsync(event, control, data, bubble, callback);\r\n}\r\n\r\nfunction emitStateChange(control, recursive) {\r\n    emitAsyncEvent(control, 'stateChange', null, unhandlaebleOption);\r\n    if (recursive) {\r\n        for (var cur = control.parent; cur && cur.requireChildControls; cur = cur.parent) {\r\n            clearFlag(cur);\r\n            emitAsyncEvent(cur, 'stateChange', null, unhandlaebleOption);\r\n        }\r\n    }\r\n}\r\n\r\nfunction emitPropertyChange(control, property, oldValue, newValue) {\r\n    emitAsyncEvent(control, 'propertyChange', {\r\n        oldValues: kv(property, oldValue),\r\n        newValues: kv(property, newValue)\r\n    }, false, function (v, a) {\r\n        a.oldValues = copy(a.oldValues, v.oldValues);\r\n        a.newValues = copy(v.newValues, a.newValues);\r\n        return a;\r\n    });\r\n    var state = _(control);\r\n    each(state.values, function (i, v) {\r\n        if (i !== property && is(v, DisplayValue) && v.needEvaluate) {\r\n            v.getValue(control, i, true);\r\n        }\r\n    });\r\n    clearFlag(control);\r\n    emitStateChange(control, true);\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {Partial<ZetaUI.UIControl>} oldValues\r\n * @param {Partial<ZetaUI.UIControl>} newValues\r\n */\r\nfunction handlePropertyChange(control, oldValues, newValues) {\r\n    var state = _(control);\r\n    var container = state.container;\r\n    if (oldValues.element) {\r\n        container.delete(oldValues.element);\r\n    }\r\n    if (newValues.element) {\r\n        container.add(control, 'init', function () {\r\n            state.inited2 = true;\r\n        });\r\n        container.add(control, eventHandlers[control.type]);\r\n        container.add(control, state.handlers);\r\n        each(container.renderer.getRoles(control), function (i, v) {\r\n            if (v !== control.type && eventHandlers[v]) {\r\n                container.add(control, eventHandlers[v]);\r\n            }\r\n        });\r\n        container.add(control, 'init', function () {\r\n            setInitial(control);\r\n        });\r\n        if (!oldValues.element) {\r\n            emitAsyncEvent(control, 'init', null, unhandlaebleOption);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * UIControl\r\n * -------------------------------------- */\r\n\r\n/** @type {(...args: ConstructorParameters<typeof ZetaUI.UIControl>) => void} */\r\nfunction UIControl(container, species, parent, allowExport, extraOptions) {\r\n    /** @type {ZetaUI.UIControl} */\r\n    // @ts-ignore: type inference issue\r\n    var self = this;\r\n    var spec = container.getSpeciesSpec(species);\r\n    var requireScope = !allowExport && parent && _(parent).toolset !== spec.toolset;\r\n    // @ts-ignore: checked for parent\r\n    var context = requireScope ? createInnerContext(parent) : (parent && _(parent).childContext) || (parent || container).context;\r\n    var toolsetState = mapGet(container.toolsetStates, spec.toolset, function () {\r\n        // @ts-ignore: type inference issue\r\n        return new UIToolsetState(container, spec.toolset, context);\r\n    });\r\n    var name = getUniqueName(toolsetState.all, spec.name);\r\n    var state = _(self, {\r\n        control: self,\r\n        species: species,\r\n        container: container,\r\n        handlers: spec.handlers,\r\n        options: spec.options,\r\n        toolset: spec.toolset,\r\n        toolsetState: toolsetState,\r\n        values: {},\r\n        initialValues: {},\r\n        exports: []\r\n    });\r\n    watch(self, true);\r\n    watch(self, function (e) {\r\n        handlePropertyChange(self, e.oldValues, e.newValues);\r\n    });\r\n    initFlagState(self, state);\r\n    mapGet(speciesMap, Object.getPrototypeOf(self), Set).add(self);\r\n\r\n    self.required = false;\r\n    each(spec.options, function (i, v) {\r\n        if (!isFunction(v) && !isFunction(self[i])) {\r\n            self[i] = v;\r\n        }\r\n    });\r\n    each(extraOptions, function (i, v) {\r\n        if (!isFunction(v) && !isFunction(self[i])) {\r\n            self[i] = v;\r\n        }\r\n    });\r\n    if (self.label === undefined) {\r\n        self.label = spec.name;\r\n    }\r\n    if (typeof spec.options.execute === 'string') {\r\n        self.shortcut = dom.getShortcut(spec.options.execute)[0];\r\n    }\r\n    extend(self, {\r\n        name: name,\r\n        type: spec.type,\r\n        icon: self.icon || '',\r\n        parent: parent || null,\r\n        state: toolsetState,\r\n        context: context,\r\n        parentContext: container.parentContext || null,\r\n        parentElement: container.parentElement || null,\r\n        controls: [],\r\n        errors: null,\r\n        id: randomId(),\r\n        all: toolsetState.all\r\n    })\r\n    self.all[name] = self;\r\n    if (parent) {\r\n        parent.controls.push(self);\r\n        if (allowExport && parent.all !== self.all) {\r\n            parent.all[name] = self;\r\n        }\r\n    }\r\n    if (spec.defaultExport) {\r\n        exportProperty(self, context, spec.defaultExport, true);\r\n    }\r\n    each(spec.options.exports, function (i, v) {\r\n        exportProperty(self, context, v);\r\n    });\r\n    state.inited = true;\r\n}\r\n\r\ndefinePrototype(UIControl, {\r\n    get previousSibling() {\r\n        var element = this.element;\r\n        return element && _(this).container.getContexts(element.previousSibling)[0] || null;\r\n    },\r\n    get nextSibling() {\r\n        var element = this.element;\r\n        return element && _(this).container.getContexts(element.nextSibling)[0] || null;\r\n    },\r\n    get focused() {\r\n        return dom.focused(this.element);\r\n    },\r\n    get pending() {\r\n        return dom.locked(this.element);\r\n    },\r\n    get enabled() {\r\n        return isEnabled(this);\r\n    },\r\n    set enabled(value) {\r\n        setFlag(this, FLAG_ENABLED, value);\r\n    },\r\n    get active() {\r\n        return isActive(this);\r\n    },\r\n    set active(value) {\r\n        setFlag(this, FLAG_ACTIVE, value);\r\n    },\r\n    get visible() {\r\n        return !isHidden(this);\r\n    },\r\n    set visible(value) {\r\n        setFlag(this, FLAG_VISIBLE, value);\r\n    },\r\n    get value() {\r\n        return _(this).value;\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    set value(value) {\r\n        setValue(this, value);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    setValue: function (value) {\r\n        return setValue(this, value);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    contains: function (control) {\r\n        for (var cur = control; cur && cur !== this; cur = cur.parent);\r\n        return !!cur;\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    getTemplateContext: function (raw) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var proto = Object.getPrototypeOf(self);\r\n        var values = {};\r\n        if (raw) {\r\n            var copyValue = function (prop) {\r\n                values[prop] = self[prop];\r\n            };\r\n            Object.getOwnPropertyNames(self).forEach(copyValue);\r\n            Object.getOwnPropertyNames(state.options).forEach(copyValue);\r\n            extend(values, state.values);\r\n            values.value = state.value;\r\n        } else {\r\n            extend(values, self);\r\n        }\r\n        each(values, function (i) {\r\n            if (!(i in proto) && !matchWord(i, CONST_PROPS)) {\r\n                defineGetterProperty(values, i, function () {\r\n                    listenProperty(proto, i);\r\n                    return self[i];\r\n                });\r\n            }\r\n        });\r\n        return values;\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    getElementForRole: function (role) {\r\n        return _(this).container.renderer.getElementForRole(this, role);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    hasRole: function (role) {\r\n        return !!this.getElementForRole(role);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    on: function (event, handler) {\r\n        return _(this).container.add(this, event, handler);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    watch: function (prop, handler, fireInit) {\r\n        var self = this;\r\n        listenProperty(Object.getPrototypeOf(self), prop);\r\n        if (isFunction(handler)) {\r\n            self.on('propertyChange', function (e) {\r\n                if (prop in e.oldValues) {\r\n                    handler.call(self, e.newValues[prop], e.oldValues[prop], prop, self);\r\n                }\r\n            });\r\n            if (fireInit) {\r\n                handler.call(self, self[prop], null, prop, self);\r\n            }\r\n        }\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    focus: function () {\r\n        if (isEnabled(this)) {\r\n            dom.focus(this.element);\r\n        }\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    validate: function () {\r\n        return resolve(validateAll(this));\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    execute: function (value) {\r\n        var self = this;\r\n        if (!isEnabled(self) || isHidden(self) || executingControls.has(self)) {\r\n            return reject();\r\n        }\r\n        if (value !== undefined) {\r\n            self.value = value;\r\n        }\r\n        var finish = function (resolved, data) {\r\n            executingControls.delete(self);\r\n            if (resolved) {\r\n                emitEvent(self, 'executed', { data }, unhandlaebleOption);\r\n                if (self.parent) {\r\n                    emitEvent(self.parent, 'childExecuted', { control: self }, { bubbles: true, handleable: false });\r\n                }\r\n            }\r\n            emitEvent(self, 'afterExecute', resolved, unhandlaebleOption);\r\n        };\r\n        var run = function () {\r\n            var promise;\r\n            emitEvent(self, 'beforeExecute', null, unhandlaebleOption);\r\n            executingControls.add(self);\r\n            try {\r\n                var command = _(self).options.execute;\r\n                if (typeof command === 'string') {\r\n                    promise = dom.emit(command, self.value, true);\r\n                } else if (isFunction(command)) {\r\n                    // @ts-ignore: type inference issue\r\n                    promise = command.call(self, self);\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n                promise = reject(e);\r\n            }\r\n            if (self.waitForExecution && isThenable(promise)) {\r\n                promise = lock(self.element, promise, function () {\r\n                    return emitEvent(self, 'cancel') || reject();\r\n                });\r\n                always(promise, finish);\r\n                return promise;\r\n            }\r\n            finish(true);\r\n            return resolve();\r\n        };\r\n        var promise = validateAll(self);\r\n        return promise ? promise.then(run) : run();\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    reset: function () {\r\n        foreachControl(this, reset);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    append: function (control, clear) {\r\n        var self = this;\r\n        if (clear) {\r\n            each(self.controls.slice(0), function (i, v) {\r\n                v.destroy();\r\n            });\r\n        }\r\n        appendControls(_(self).container, self, makeArray(control));\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    destroy: function () {\r\n        var self = this;\r\n        if (self.pending) {\r\n            cancelLock(self.element, true);\r\n        }\r\n        always(emitEvent(self, 'beforeDestroy'), function () {\r\n            var container = _(self).container;\r\n            mapRemove(importedControls, self);\r\n            foreachControl(self, function (v) {\r\n                var state = _(v);\r\n                var species = mapGet(speciesMap, Object.getPrototypeOf(v));\r\n                delete v.all[v.name];\r\n                if (v.parent && v.parent.all[v.name] === v) {\r\n                    delete v.parent.all[v.name];\r\n                }\r\n                each(state.exports, function (i, w) {\r\n                    delete v.context[w];\r\n                });\r\n                species.delete(v);\r\n                container.delete(self);\r\n            });\r\n            if (self.parent) {\r\n                var arr = self.parent.controls;\r\n                arr.splice(arr.indexOf(self), 1);\r\n                container.renderer.remove(self);\r\n                clearFlag(self.parent);\r\n                emitStateChange(self.parent);\r\n            } else {\r\n                // ensure all other resources can be garbage collected\r\n                setTimeout(function () {\r\n                    container.destroy();\r\n                });\r\n                removeNode(container.autoDestroy ? container.element : self.element);\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\ndefineObservableProperty(UIControl.prototype, 'element');\r\n\r\neach('icon label errors placeholder description', function (i, v) {\r\n    listenProperty(UIControl.prototype, v);\r\n});\r\n\r\ndefineInheritedProperty({\r\n    showIcon: 'auto',\r\n    showText: true,\r\n    hideDisabledChild: false,\r\n    hideCalloutOnBlur: true,\r\n    hideCalloutOnExecute: true,\r\n    waitForExecution: true,\r\n    enableChildren: true\r\n});\r\n\r\nexport default UIControl;\r\n\r\nexport {\r\n    createContext,\r\n    emitEvent,\r\n    emitStateChange,\r\n    emitPropertyChange,\r\n    defineInheritedProperty,\r\n    setEventHandlers,\r\n    exportControls,\r\n    foreachControl,\r\n    hasRole\r\n};\r\n","import $ from \"../include/external/jquery.js\";\r\nimport { createPrivateStore, definePrototype, extend, inherit, is, isFunction, isPlainObject, pick, ucfirst } from \"../include/zeta-dom/util.js\";\r\nimport { createNamedFunction } from \"../util/common.js\";\r\nimport { createContext, foreachControl } from \"./UIControl.js\";\r\nimport UIToolset from \"./UIToolset.js\";\r\n\r\nconst _ = createPrivateStore();\r\n\r\n/** @type {(...args: ConstructorParameters<typeof ZetaUI.UIControlSpecies>) => void} */\r\nfunction UIControlSpecies(toolset, type, baseClass, name, options) {\r\n    var ctor = createNamedFunction(ucfirst(name ? type + '_' + name.replace(/[^a-z0-9]+/gi, '_') : type), baseClass);\r\n    definePrototype(ctor, baseClass);\r\n    options = extend({}, options);\r\n\r\n    var self = this;\r\n    self.name = name || '';\r\n    self.type = type;\r\n    _(self, {\r\n        ctor: ctor,\r\n        toolset: toolset,\r\n        type: type,\r\n        name: name || options.name || type,\r\n        options: options,\r\n        handlers: pick(options, isFunction),\r\n        defaultExport: options.defaultExport || ('value' in options && 'value')\r\n    });\r\n}\r\n\r\ndefinePrototype(UIControlSpecies, {\r\n    all: function (control) {\r\n        var ctor = _(this).ctor;\r\n        var arr = [];\r\n        foreachControl(control, function (v) {\r\n            if (is(v, ctor)) {\r\n                arr[arr.length] = v;\r\n            }\r\n        });\r\n        return arr;\r\n    },\r\n    clone: function (initData) {\r\n        var clone = inherit(UIControlSpecies, this);\r\n        var cloneData = extend({}, _(this));\r\n        cloneData.options = extend({}, cloneData.options, initData);\r\n        _(clone, cloneData);\r\n        return clone;\r\n    },\r\n    render: function (element, props) {\r\n        if (isPlainObject(element)) {\r\n            props = element;\r\n            element = document.createElement('div');\r\n        } else if (typeof element === 'string') {\r\n            element = $(element)[0];\r\n        }\r\n        // @ts-ignore: type inference issue\r\n        return createContext(_, this, UIToolset.defaultRenderer, element, props);\r\n    }\r\n});\r\n\r\nexport default UIControlSpecies;\r\n","import { definePrototype, each, extend, isPlainObject, kv } from \"../include/zeta-dom/util.js\";\r\nimport { define } from \"./define.js\";\r\nimport UIControl, { exportControls, hasRole, setEventHandlers } from \"./UIControl.js\";\r\nimport UIControlSpecies from \"./UIControlSpecies.js\";\r\n\r\nconst exportedLabels = {};\r\n\r\nfunction addLabels(obj, language, key, value) {\r\n    if (isPlainObject(key)) {\r\n        each(key, addLabels.bind(null, obj, language));\r\n    } else {\r\n        var dict = obj[key] || (obj[key] = {});\r\n        dict[language || 'default'] = value;\r\n    }\r\n}\r\n\r\n/** @type {(...args: ConstructorParameters<typeof ZetaUI.UIToolset>) => void} */\r\nfunction UIToolset(name, options) {\r\n    var self = this;\r\n    var labels = name ? exportedLabels[name] || (exportedLabels[name] = {}) : {};\r\n    self.name = name || '';\r\n    self.labels = labels;\r\n    self.options = extend({}, options);\r\n    addLabels(labels, 'default', self.options.labels || {});\r\n}\r\n\r\ndefinePrototype(UIToolset, {\r\n    use: function () {\r\n        return this;\r\n    },\r\n    on: function (event, handler) {\r\n        extend(this.options, isPlainObject(event) || kv(event, handler));\r\n    },\r\n    i18n: function (language, key, value) {\r\n        addLabels(this.labels, language, key, value);\r\n    },\r\n    import: function (id, options) {\r\n        // @ts-ignore: type inference issue\r\n        return new UIControlSpecies(this, 'import', UIControl, id, options || {});\r\n    },\r\n    export: function () {\r\n        // @ts-ignore: type inference issue\r\n        exportControls.apply(null, arguments);\r\n    }\r\n});\r\n\r\nextend(UIToolset, {\r\n    define: define,\r\n    hasRole: hasRole,\r\n    i18n: function (toolset, language, key, value) {\r\n        var dict = exportedLabels[toolset] || (exportedLabels[toolset] = {});\r\n        addLabels(dict, language, key, value);\r\n    }\r\n});\r\n\r\nexport default UIToolset;\r\n","import { definePrototype, each, extend, is, isFunction, kv, makeArray, ucfirst } from \"../include/zeta-dom/util.js\";\r\nimport ArgumentIterator from \"./ArgumentIterator.js\";\r\nimport { setDefaultTemplate } from \"../renderer/default/index.js\";\r\nimport UIControl, { setEventHandlers } from \"./UIControl.js\";\r\nimport UIControlSpecies from \"./UIControlSpecies.js\";\r\nimport UIToolset from \"./UIToolset.js\";\r\nimport { createNamedFunction } from \"../util/common.js\";\r\n\r\nconst definedType = {};\r\n\r\nfunction defineInternal(type, options) {\r\n    if (definedType[type]) {\r\n        throw new Error(type + ' already defined');\r\n    }\r\n    var specs = extend({}, options);\r\n    var defaultOptions = {};\r\n    var handlers = {};\r\n    setDefaultTemplate(type, specs.template || '', specs.templates);\r\n    each(specs, function (i, v) {\r\n        if (isFunction(v) && i !== 'parseOptions') {\r\n            handlers[i] = v;\r\n        } else if (i !== 'template' && i !== 'parseOptions') {\r\n            defaultOptions[i] = v;\r\n            delete specs[i];\r\n        }\r\n    });\r\n    specs.defaultOptions = defaultOptions;\r\n    setEventHandlers(type, handlers);\r\n    return specs;\r\n}\r\n\r\n/**\r\n * @param {string} type\r\n * @param {ZetaUI.UIControlTypeOptions} options\r\n */\r\nexport function defineLayout(type, options) {\r\n    defineInternal(type, options);\r\n}\r\n\r\n/**\r\n * @param {string} type\r\n * @param {ZetaUI.UIControlTypeOptions} options\r\n */\r\nexport function define(type, options) {\r\n    var ctor = createNamedFunction(ucfirst(type), UIControl);\r\n    var specs = defineInternal(type, options);\r\n    var create = function () {\r\n        var iter = new ArgumentIterator(makeArray(arguments));\r\n        var name = iter.string();\r\n        var options = {};\r\n        if (specs.parseOptions) {\r\n            specs.parseOptions(options, iter);\r\n        }\r\n        extend(options, iter.next('object') && iter.value);\r\n        return new UIControlSpecies(is(this, UIToolset) || new UIToolset(), type, ctor, name || '', extend({}, specs.defaultOptions, options));\r\n    };\r\n    definePrototype(UIToolset, kv(type, create));\r\n    definePrototype(ctor, UIControl);\r\n    create.prototype = ctor.prototype;\r\n    return create;\r\n}\r\n","import { is, createPrivateStore, noop } from \"../include/zeta-dom/util.js\";\r\nimport UIControl, { emitStateChange } from \"./UIControl.js\";\r\n\r\nconst FLAG_NAMES = 'enabled active visible'.split(' ');\r\nconst FLAG_ENABLED = 1;\r\nconst FLAG_ACTIVE = 2;\r\nconst FLAG_VISIBLE = 4;\r\n\r\nconst computeFn = [isEnabled, isActive, isHidden];\r\nconst _ = createPrivateStore();\r\n\r\nfunction initFlagState(component, state) {\r\n    _(component, state);\r\n}\r\n\r\nfunction getFlag(control, flag, callback) {\r\n    var state = _(control);\r\n    var bit = state.flag;\r\n    var cur = (bit & flag) > 0;\r\n    // @ts-ignore: boolean arithmetics\r\n    if ((state.flag |= (flag << 8)) !== bit && (cur ^ !!callback(state))) {\r\n        state.flag ^= flag;\r\n        if (state.inited2) {\r\n            emitStateChange(control, true);\r\n        }\r\n        return !cur;\r\n    }\r\n    return cur;\r\n}\r\n\r\nfunction setFlag(control, flag, value) {\r\n    _(control)[FLAG_NAMES[flag >> 1]] = value;\r\n    clearFlag(control, flag);\r\n}\r\n\r\nfunction clearFlag(control, flags) {\r\n    _(control).flag &= 0xff;\r\n    if (flags) {\r\n        computeFn.forEach(function (v, i) {\r\n            return (flags & (1 << i)) && v(control);\r\n        });\r\n    }\r\n}\r\n\r\nfunction isEnabled(control) {\r\n    return getFlag(control, FLAG_ENABLED, function (state) {\r\n        if (isDisabledByToolset(control) || !state.container.renderer.isEnabled(control)) {\r\n            return false;\r\n        }\r\n        if (control.requireChildControls && (!control.controls.some(isEnabled) || control.controls.every(isHidden))) {\r\n            return false;\r\n        }\r\n        return state.enabled !== false && (state.options.enabled || noop).call(control, control) !== false;\r\n    });\r\n}\r\n\r\nfunction isActive(control) {\r\n    return getFlag(control, FLAG_ACTIVE, function (state) {\r\n        return state.active || (state.options.active || noop).call(control, control);\r\n    });\r\n}\r\n\r\nfunction isHidden(control) {\r\n    return getFlag(control, FLAG_VISIBLE, function (state) {\r\n        if (isDisabledByToolset(control)) {\r\n            return true;\r\n        }\r\n        if (!isEnabled(control)) {\r\n            var hiddenWhenDisabled = control.hiddenWhenDisabled;\r\n            if (hiddenWhenDisabled || (hiddenWhenDisabled !== false && control.parent && control.parent.hideDisabledChild)) {\r\n                return true;\r\n            }\r\n        }\r\n        return state.visible === false || (state.options.visible || noop).call(control, control) === false;\r\n    });\r\n}\r\n\r\nfunction isDisabledByToolset(control) {\r\n    return getFlag(control, 8, function (state) {\r\n        var toolsetState = state.toolsetState;\r\n        return toolsetState && (isEnabled(toolsetState) === false || (control.realm && !toolsetState[control.realm]));\r\n    });\r\n}\r\n\r\nexport {\r\n    FLAG_ENABLED,\r\n    FLAG_ACTIVE,\r\n    FLAG_VISIBLE,\r\n    initFlagState,\r\n    clearFlag,\r\n    setFlag,\r\n    isEnabled,\r\n    isActive,\r\n    isHidden,\r\n    isDisabledByToolset\r\n};\r\n","import zeta from \"zeta-dom\";const _defaultExport = zeta; export default _defaultExport;","import $ from \"../include/external/jquery.js\";\r\nimport { each, extend, is, isPlainObject, keys, matchWord, setTimeoutOnce } from \"../include/zeta-dom/util.js\";\r\nimport { bind, getRect, containsOrEquals, isVisible, getScrollParent, comparePosition, createTreeWalker, iterateNode, toPlainRect } from \"../include/zeta-dom/domUtil.js\";\r\n\r\nconst FLIP_POS = {\r\n    top: 'bottom',\r\n    left: 'right',\r\n    right: 'left',\r\n    bottom: 'top'\r\n};\r\nconst DIR_SIGN = {\r\n    top: -1,\r\n    left: -1,\r\n    right: 1,\r\n    bottom: 1\r\n};\r\nconst root = document.documentElement;\r\nconst snaps = new Map();\r\n\r\nfunction cssFromPoint(x, y, origin, parent) {\r\n    var refRect = getRect(is(parent || origin, Node) || window);\r\n    var dirX = matchWord(origin || y, 'left right') || 'left';\r\n    var dirY = matchWord(origin || y, 'top bottom') || 'top';\r\n    var style = {};\r\n    y = (((x.top || x.clientY || x.y || y) | 0) - refRect.top);\r\n    x = (((x.left || x.clientX || x.x || x) | 0) - refRect.left);\r\n    style[dirX] = (dirX === 'left' ? x : refRect.width - x) + 'px';\r\n    style[dirY] = (dirY === 'top' ? y : refRect.height - y) + 'px';\r\n    style[FLIP_POS[dirX]] = 'auto';\r\n    style[FLIP_POS[dirY]] = 'auto';\r\n    return style;\r\n}\r\n\r\nfunction position(element, to, dir, within, offset) {\r\n    if (!containsOrEquals(root, element)) {\r\n        document.body.appendChild(element);\r\n    }\r\n    $(element).css({\r\n        position: 'fixed',\r\n        maxWidth: '',\r\n        maxHeight: ''\r\n    });\r\n    var oDirX = matchWord(dir, 'left right center') || 'left';\r\n    var oDirY = matchWord(dir, 'top bottom center') || 'bottom';\r\n    var inset = matchWord(dir, 'inset-x inset-y inset') || (FLIP_POS[oDirY] ? 'inset-x' : 'inset-y');\r\n    var refRect = isPlainObject(to) || !to ? toPlainRect((to.left || to.clientX || to.x) | 0, (to.right || to.clientY || to.y) | 0) : getRect(to);\r\n    if (offset && inset !== 'inset') {\r\n        refRect = inset === 'inset-x' ? refRect.expand(0, offset) : refRect.expand(offset, 0);\r\n    }\r\n    var winRect = inset === 'inset' ? refRect.expand(-offset) : getRect(within);\r\n    var elmRect = getRect(element, true);\r\n    var margin = {};\r\n    var point = {};\r\n    var style = {\r\n        transform: ''\r\n    };\r\n    var fn = function (dir, inset, p, pSize, pMax, sTransform) {\r\n        style[pMax] = winRect[pSize] + margin[p] - margin[FLIP_POS[p]] - offset;\r\n        if (!FLIP_POS[dir]) {\r\n            var center = (refRect[FLIP_POS[p]] + refRect[p]) / 2;\r\n            dir = center - winRect[p] < elmRect[pSize] / 2 ? p : winRect[FLIP_POS[p]] - center < elmRect[pSize] / 2 ? FLIP_POS[p] : '';\r\n            if (!dir) {\r\n                style.transform += ' ' + sTransform;\r\n            }\r\n            point[p] = dir ? winRect[dir] : center + margin[p];\r\n            return dir;\r\n        }\r\n        // determine cases of 'normal', 'flip' and 'fit' by available rooms\r\n        var rDir = inset ? FLIP_POS[dir] : dir;\r\n        if (refRect[dir] * DIR_SIGN[rDir] + elmRect[pSize] <= winRect[rDir] * DIR_SIGN[rDir]) {\r\n            point[p] = refRect[dir] + margin[FLIP_POS[rDir]];\r\n        } else if (refRect[FLIP_POS[dir]] * DIR_SIGN[rDir] - elmRect[pSize] > winRect[FLIP_POS[rDir]] * DIR_SIGN[rDir]) {\r\n            dir = FLIP_POS[dir];\r\n            point[p] = refRect[dir] + margin[rDir];\r\n        } else {\r\n            point[p] = winRect[dir];\r\n            style[pMax] = inset ? style[pMax] : Math.abs(refRect[dir] - point[p]) - (DIR_SIGN[dir] * margin[dir]);\r\n            return dir;\r\n        }\r\n        if (!inset) {\r\n            dir = FLIP_POS[dir];\r\n        }\r\n        style[pMax] = Math.abs(winRect[FLIP_POS[dir]] - point[p]);\r\n        return dir;\r\n    };\r\n\r\n    var elmRectNoMargin = getRect(element);\r\n    keys(FLIP_POS).forEach(function (v) {\r\n        margin[v] = elmRect[v] - elmRectNoMargin[v];\r\n    });\r\n    var dirX = fn(oDirX, FLIP_POS[oDirY] && inset === 'inset-x', 'left', 'width', 'maxWidth', 'translateX(-50%)');\r\n    var dirY = fn(oDirY, FLIP_POS[oDirX] && inset === 'inset-y', 'top', 'height', 'maxHeight', 'translateY(-50%)');\r\n    $(element).css(extend(style, cssFromPoint(point, dirX + ' ' + dirY)));\r\n}\r\n\r\nfunction snapToElement(element, options) {\r\n    if (isVisible(element) && (options.to === window || isVisible(options.to))) {\r\n        var dir = options.dir;\r\n        if (dir === 'auto') {\r\n            if (options.to === window) {\r\n                dir = 'center inset';\r\n            } else {\r\n                var scrollParent = getScrollParent(options.to);\r\n                var winRect = getRect();\r\n                var rect = getRect(scrollParent === root ? options.to : root);\r\n                var area = [winRect.height * (rect.left - winRect.left), winRect.height * (winRect.right - rect.right), winRect.width * (rect.top - winRect.top), winRect.width * (winRect.bottom - rect.bottom)];\r\n                dir = 'left right top bottom'.split(' ')[area.indexOf(Math.max.apply(null, area))] + ' center';\r\n            }\r\n        }\r\n        position(element, options.to, dir, window, options.margin);\r\n    }\r\n}\r\n\r\nfunction snap(element, to, dir, margin) {\r\n    to = to || root;\r\n    var prop = {\r\n        to: to,\r\n        dir: dir || 'left bottom',\r\n        margin: margin || 0\r\n    };\r\n    snaps.set(element, prop);\r\n    if (!containsOrEquals(root, element)) {\r\n        document.body.appendChild(element);\r\n    }\r\n    setZIndexOver(element, to === window ? document.body : to);\r\n    snapToElement(element, prop);\r\n}\r\n\r\nfunction unsnap(element) {\r\n    snaps.delete(element);\r\n}\r\n\r\nfunction getZIndex(element, pseudo) {\r\n    var style = getComputedStyle(element, pseudo || null);\r\n    return matchWord(style.position, 'absolute fixed relative') && style.zIndex !== 'auto' ? parseInt(style.zIndex) : -1;\r\n}\r\n\r\nfunction getZIndexOver(over) {\r\n    var maxZIndex = -1;\r\n    var iterator = createTreeWalker(document.body, 1, function (v) {\r\n        if (comparePosition(v, over, true)) {\r\n            return 2;\r\n        }\r\n        var zIndex = getZIndex(v);\r\n        if (zIndex >= 0) {\r\n            maxZIndex = Math.max(maxZIndex, zIndex);\r\n            return 2;\r\n        }\r\n        maxZIndex = Math.max(maxZIndex, getZIndex(v, '::before'), getZIndex(v, '::after'));\r\n        return 1;\r\n    });\r\n    iterateNode(iterator);\r\n    return maxZIndex + 1;\r\n}\r\n\r\nfunction setZIndexOver(element, over) {\r\n    element.style.zIndex = getZIndexOver(over);\r\n    if (getComputedStyle(element).position === 'static') {\r\n        element.style.position = 'relative';\r\n    }\r\n}\r\n\r\nfunction updateSnaps() {\r\n    each(snaps, snapToElement);\r\n}\r\n\r\nbind(window, 'resize scroll orientationchange mousemove wheel keyup touchend transitionend', function () {\r\n    setTimeoutOnce(updateSnaps);\r\n}, { passive: true });\r\n\r\nexport {\r\n    getZIndex,\r\n    getZIndexOver,\r\n    setZIndexOver,\r\n    position,\r\n    snap,\r\n    unsnap\r\n};\r\n","import { containsOrEquals } from \"../include/zeta-dom/domUtil.js\";\r\nimport UIControlSpecies from \"../core/UIControlSpecies.js\";\r\n\r\nexport function parseExecute(options, iter) {\r\n    options.execute = iter.fn();\r\n}\r\n\r\nexport function parseControlsAndExecute(options, iter) {\r\n    options.controls = iter.nextAll(UIControlSpecies);\r\n    parseExecute(options, iter);\r\n}\r\n\r\nexport function parseIconAndExecute(options, iter) {\r\n    options.icon = iter.string();\r\n    parseExecute(options, iter);\r\n}\r\n\r\n/**\r\n * @param {Zeta.ZetaEvent & ZetaUI.UIEventContext} e\r\n * @param {string} role\r\n */\r\nexport function shouldExecuteOnClick(e, role) {\r\n    var elm = e.context.getElementForRole(role);\r\n    return elm && containsOrEquals(elm, e.target);\r\n}\r\n","import { defineLayout } from \"./core/define.js\";\r\nimport { runCSSTransition } from \"./include/zeta-dom/cssUtil.js\";\r\n\r\nfunction getOverlayElement(self) {\r\n    return self.getElementForRole('overlay') || self.element;\r\n}\r\n\r\ndefineLayout('overlay', {\r\n    init: function (e, self) {\r\n        var target = getOverlayElement(self);\r\n        runCSSTransition(target, 'open');\r\n    },\r\n    focusreturn: function (e, self) {\r\n        var target = getOverlayElement(self);\r\n        runCSSTransition(target, 'pop', true);\r\n    },\r\n    beforeDestroy: function (e, self) {\r\n        var target = getOverlayElement(self);\r\n        return runCSSTransition(target, 'closing');\r\n    }\r\n});\r\n\r\nexport default null;\r\n","import dom from \"./include/zeta-dom/dom.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\nimport { snap, setZIndexOver } from \"./util/cssUtil.js\";\r\nimport _Overlay from \"./Overlay.js\";\r\n\r\nfunction closeDialog(e, self) {\r\n    self.destroy();\r\n}\r\n\r\nconst Dialog = define('dialog', {\r\n    template: '<div class=\"zui-root\"><z:overlay class=\"zui-float zui-dialog-inner\"><div class=\"zui-dialog-content\"><h2>{{title}}</h2><z:form><p>{{description}}</p><controls></controls></z:form></div><div class=\"zui-dialog-error error hidden:{{not errorMessage}}\">{{errorMessage}}</div><controls of=\"type == buttonset\"/></z:overlay></div>',\r\n    templates: {\r\n        buttonset: '<z:buttonset class=\"zui-dialog-buttonset\"><controls of=\"danger\" show-text=\"true\"></controls><div class=\"zui-buttonset-pad\"></div><controls show-text=\"true\"></controls></z:buttonset>'\r\n    },\r\n    pinnable: true,\r\n    modal: true,\r\n    title: '',\r\n    description: '',\r\n    errorMessage: '',\r\n    parseOptions: parseControlsAndExecute,\r\n    init: function (e, self) {\r\n        var element = self.element;\r\n        var parentElement = self.parentElement;\r\n        var snapTo = parentElement && self.pinnable && screen.availWidth >= 600 && screen.availHeight >= 600 && UIToolset.hasRole(parentElement, 'button buttonlike') ? parentElement : window;\r\n\r\n        document.body.appendChild(element);\r\n        if (parentElement) {\r\n            dom.retainFocus(parentElement, element);\r\n        }\r\n        if (self.modal) {\r\n            dom.setModal(element);\r\n        }\r\n        snap(element, snapTo, 'auto', 10);\r\n        setZIndexOver(element, parentElement || document.activeElement);\r\n        setTimeout(function () {\r\n            dom.focus(element);\r\n        });\r\n    },\r\n    error: function (e, self) {\r\n        self.errorMessage = (e.error || '').message || e.error || '';\r\n        e.handled();\r\n    },\r\n    focusout: closeDialog,\r\n    escape: closeDialog,\r\n    afterExecute: function (e, self) {\r\n        if (e.data) {\r\n            if (self.pending) {\r\n                self.on('asyncEnd', function () {\r\n                    closeDialog(e, self);\r\n                });\r\n            } else {\r\n                closeDialog(e, self);\r\n            }\r\n        }\r\n    },\r\n    enter: function (e, self) {\r\n        return self.execute();\r\n    }\r\n});\r\n\r\nexport default Dialog;\r\n","import { define } from \"./core/define.js\";\n\nconst T_SHOWICON = '[ @global.showIcon ?? showIcon ]';\nconst T_SHOWTEXT = '[ @global.showText ?? showText ]';\nconst T_ICON = '[ @global.icon ?? icon ]';\n\nconst Label = define('label', {\n    template: '<span class=\"hidden:{{[ ! ' + T_SHOWICON + ' || ! ' + T_ICON + ' ] && ! ' + T_SHOWTEXT + '}}\" title=\"{{tooltip || label}}\"><i class=\"material-icons hidden:{{[ ! ' + T_ICON + ' && ' + T_SHOWICON + ' != true ] || ! ' + T_SHOWICON + '}}\">{{' + T_ICON + '}}</i>{{? ' + T_SHOWTEXT + ' [ @global.label ?? label ] \"\"}}</span>',\n    showIcon: 'auto',\n    showText: true,\n    defaultExport: 'label'\n});\n\nexport default Label;\n","import { define } from \"./core/define.js\";\nimport { parseIconAndExecute, shouldExecuteOnClick } from \"./util/defineUtil.js\";\nimport _Label from \"./Label.js\";\n\nfunction executeButton(e, self) {\n    if (e.type !== 'click' || shouldExecuteOnClick(e, 'button')) {\n        return self.execute();\n    }\n}\n\nconst Button = define('button', {\n    template: '<button class=\"danger:{{danger}}\"><z:label></z:label><children/></button>',\n    danger: false,\n    defaultExport: 'execute',\n    parseOptions: parseIconAndExecute,\n    enter: executeButton,\n    click: executeButton\n});\n\nexport default Button;\n","import { define } from \"./core/define.js\";\r\nimport _ from \"./Button.js\";\r\n\r\nconst SubmitButton = define('submit', {\r\n    template: '<z:button/>',\r\n    defaultExport: 'execute',\r\n    parseOptions: function (options, iter) {\r\n        options.icon = iter.string();\r\n        options.execute = function (self) {\r\n            for (var cur = self; cur && !cur.hasRole('form'); cur = cur.parent);\r\n            return cur && cur.execute();\r\n        };\r\n    }\r\n});\r\n\r\nexport default SubmitButton;\r\n","import { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\n\r\nconst ButtonSet = define('buttonset', {\r\n    templates: {\r\n        textbox: '<z:textbox show-placeholder=\"auto\"/>'\r\n    },\r\n    requireChildControls: true,\r\n    hiddenWhenDisabled: true,\r\n    parseOptions: parseControlsAndExecute\r\n});\r\n\r\nexport default ButtonSet;\r\n","import { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\n\r\nconst GenericComponent = define('generic', {\r\n    parseOptions: parseControlsAndExecute\r\n});\r\n\r\nexport default GenericComponent;\r\n","import { defineLayout } from \"../../core/define.js\";\r\nimport { either } from \"../../include/zeta-dom/util.js\";\r\nimport include from \"../../include/external/zeta-editor.js\";\r\n\r\nfunction setValue(control, value) {\r\n    var editor = control.editor;\r\n    if (!editor) {\r\n        return;\r\n    }\r\n    if (!editor.focused(true) && value !== editor.getValue()) {\r\n        editor.setValue(value);\r\n    }\r\n    control.setValue(editor.getValue());\r\n}\r\n\r\ndefineLayout('contenteditable', {\r\n    template: '<div class=\"zui-editable\" contenteditable spellcheck=\"{{spellcheck}}\"></div>',\r\n    init: function (e, self) {\r\n        var target = self.getElementForRole('contenteditable') || self.element;\r\n        self.editor = new include.Editor(target, self.editorOptions);\r\n        self.editor.enable('stateclass', {\r\n            target: self.element,\r\n            focused: ''\r\n        });\r\n        self.editor.on('contentChange', function () {\r\n            if (self.setValue(self.editor.getValue())) {\r\n                self.execute();\r\n            }\r\n        });\r\n        setValue(self, self.value);\r\n    },\r\n    stateChange: function (e, self) {\r\n        if (either(self.editor.enabled(), self.enabled)) {\r\n            self.editor[self.enabled ? 'enable' : 'disable']();\r\n        }\r\n    },\r\n    focusin: function (e, self) {\r\n        if (!self.editor.focused()) {\r\n            self.editor.focus();\r\n        }\r\n    },\r\n    setValue: function (e, self) {\r\n        setValue(self, e.newValue);\r\n        e.handled();\r\n    },\r\n    validate: function (e, self) {\r\n        return self.editor.validate();\r\n    }\r\n});\r\n\r\nexport default null;\r\n","import { defineLayout } from \"./core/define.js\";\r\nimport { matchSelector } from \"./include/zeta-dom/domUtil.js\";\r\nimport _Label from \"./Label.js\";\r\n\r\ndefineLayout('textboxlike', {\r\n    template: '<label class=\"zui-textbox keep-placeholder:{{showPlaceholder == always && ! $placeholder}}\"><z:label show-text=\"false\" show-icon=\"auto\"></z:label><div class=\"zui-textbox-wrapper\" data-label=\"{{? $placeholder label}}\"><div class=\"zui-textbox-inner\"><children></children><div class=\"zui-textbox-placeholder\">{{placeholder || label}}</div></div><div class=\"zui-textbox-error\"></div><div class=\"zui-textbox-clear\"></div></div></label>',\r\n    click: function (e, self) {\r\n        if (matchSelector(e.target, '.zui-textbox-clear')) {\r\n            self.execute('');\r\n            self.editor.focus();\r\n        }\r\n    }\r\n});\r\n\r\nexport default null;\r\n","import { define } from \"./core/define.js\";\r\nimport { each, extend, isFunction, kv } from \"./include/zeta-dom/util.js\";\r\nimport { parseExecute } from \"./util/defineUtil.js\";\r\nimport _contenteditable from \"./renderer/default/contenteditable.js\";\r\nimport _TextBoxLike from \"./TextBoxLike.js\";\r\n\r\nconst PRESET_KEY = '__preset__';\r\nconst DEFAULT_PRESET = {\r\n    overrides: {\r\n        getValue: function () {\r\n            return this.extractText();\r\n        }\r\n    }\r\n};\r\n\r\nfunction initOptions(preset, options) {\r\n    var presetDefinition = {};\r\n    var originalInit = (options || '').init;\r\n\r\n    options = extend({\r\n        inline: true,\r\n        defaultOptions: false,\r\n        disallowedElement: '*'\r\n    }, kv(PRESET_KEY, extend({}, options)));\r\n    each(preset, function (i, v) {\r\n        (isFunction(v) || i === 'options' || i === 'commands' ? presetDefinition : options)[i] = v;\r\n    });\r\n    each(options[PRESET_KEY], function (i, v) {\r\n        if (!presetDefinition.options || !(i in presetDefinition.options)) {\r\n            options[i] = v;\r\n            delete options[PRESET_KEY][i];\r\n        }\r\n    });\r\n    options.widgets = extend(options.widgets, kv(PRESET_KEY, presetDefinition));\r\n    options.init = function (e) {\r\n        var presetWidget = e.typer.getStaticWidget(PRESET_KEY);\r\n        each(preset.overrides, function (i, v) {\r\n            e.typer[i] = function (value) {\r\n                return v.call(this, presetWidget, value);\r\n            };\r\n        });\r\n        if (isFunction(originalInit)) {\r\n            originalInit.call(options, e);\r\n        }\r\n    };\r\n    return options;\r\n}\r\n\r\nconst TextBox = define('textbox', {\r\n    template: '<z:textboxlike><z:contenteditable spellcheck=\"false\"></z:contenteditable></z:textboxlike>',\r\n    hideCalloutOnExecute: false,\r\n    preventLeave: true,\r\n    value: '',\r\n    placeholder: '',\r\n    parseOptions: parseExecute,\r\n    init: function (e, self) {\r\n        self.editorOptions = initOptions(self.preset || DEFAULT_PRESET, self.options);\r\n        self.watch('editor', function (editor) {\r\n            self.options = editor.getStaticWidget(PRESET_KEY).options;\r\n            self.editorOptions.options = extend({}, self.options);\r\n        });\r\n    },\r\n    reset: function (e, self) {\r\n        self.options = self.editor.getStaticWidget(PRESET_KEY).options;\r\n        extend(self.options, self.editorOptions.options);\r\n    }\r\n});\r\n\r\nexport default TextBox;\r\n","import { define, definePrototype, extend, is, isFunction, resolve } from \"./include/zeta-dom/util.js\";\r\nimport { snap } from \"./util/cssUtil.js\";\r\nimport ArgumentIterator from \"./core/ArgumentIterator.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport Dialog from \"./Dialog.js\";\r\nimport Button from \"./Button.js\";\r\nimport SubmitButton from \"./SubmitButton.js\";\r\nimport ButtonSet from \"./ButtonSet.js\";\r\nimport GenericComponent from \"./Generic.js\";\r\nimport TextBox from \"./TextBox.js\";\r\n\r\nvar ui = new UIToolset('dialog').use(Dialog, Button, SubmitButton, ButtonSet, GenericComponent, TextBox);\r\nvar currentNotify;\r\n\r\nui.i18n('en', {\r\n    action: 'OK',\r\n    cancel: 'Cancel',\r\n    leaveForm: 'There are unsubmitted information on the page. Are you sure to leave?'\r\n});\r\n\r\nui.export('dialog.prompt', ui.dialog({\r\n    preventLeave: false,\r\n    data: null,\r\n    exports: 'title description errorMessage data',\r\n    controls: [\r\n        ui.textbox('value', {\r\n            hiddenWhenDisabled: true,\r\n            exports: 'enabled label'\r\n        }),\r\n        ui.buttonset(\r\n            ui.submit('action', 'done', {\r\n                defaultExport: 'label',\r\n                exports: 'icon'\r\n            }),\r\n            ui.button('cancel', 'close', {\r\n                exports: 'visible',\r\n                execute: function (self) {\r\n                    return self.all.dialog.destroy();\r\n                }\r\n            })\r\n        )\r\n    ],\r\n    execute: function (self) {\r\n        return (isFunction(self.context.callback) || resolve)(self.context.value);\r\n    }\r\n}));\r\n\r\nui.export('dialog.notify', ui.generic({\r\n    template: '<z:overlay class=\"zui-root zui-snackbar notify:{{kind}}\"><div class=\"zui-float\"><z:buttonset><z:label/><z:button icon=\"close\" show-text=\"false\" show-icon=\"true\"/></z:buttonset></div></z:overlay>',\r\n    data: null,\r\n    init: function (e, self) {\r\n        if (currentNotify) {\r\n            currentNotify.destroy();\r\n        }\r\n        extend(self, self.context);\r\n        // @ts-ignore: custom control property\r\n        snap(e.target, self.within || document.body, 'top center inset');\r\n        // @ts-ignore: custom control property\r\n        if (self.timeout) {\r\n            setTimeout(function () {\r\n                self.destroy();\r\n                // @ts-ignore: custom control property\r\n            }, self.timeout);\r\n        }\r\n        currentNotify = self;\r\n    },\r\n    click: function (e, self) {\r\n        self.destroy();\r\n    }\r\n}));\r\n\r\n\r\n/* --------------------------------------\r\n * Exports\r\n * -------------------------------------- */\r\n\r\nfunction initPrompt(targetUI, type, value, message, iter) {\r\n    targetUI = is(targetUI, UIToolset) || ui;\r\n    return targetUI.import('dialog.prompt').render({\r\n        value: value,\r\n        valueEnabled: type === 'prompt',\r\n        valueLabel: message,\r\n        cancelVisible: type !== 'alert',\r\n        action: iter.string(),\r\n        dialogTitle: iter.string(),\r\n        dialogDescription: type === 'prompt' ? iter.string() : message,\r\n        dialogData: iter.next('object') && iter.value,\r\n        callback: iter.fn()\r\n    }).dialog;\r\n}\r\n\r\nfunction alert(message, action, title, data, callback) {\r\n    return initPrompt(this, 'alert', true, message, new ArgumentIterator([action, title, data, callback]));\r\n}\r\n\r\nfunction confirm(message, action, title, data, callback) {\r\n    return initPrompt(this, 'confirm', true, message, new ArgumentIterator([action, title, data, callback]));\r\n}\r\n\r\nfunction prompt(message, value, action, title, description, data, callback) {\r\n    return initPrompt(this, 'prompt', value, message, new ArgumentIterator([action, title, description, data, callback]));\r\n}\r\n\r\nfunction notify(message, kind, timeout, within, data) {\r\n    var targetUI = is(this, UIToolset) || ui;\r\n    var iter = new ArgumentIterator([kind, timeout, within, data]);\r\n    return targetUI.import('dialog.notify').render({\r\n        label: message,\r\n        kind: iter.string() || true,\r\n        timeout: iter.next('number') && iter.value,\r\n        within: iter.next(Node) && iter.value,\r\n        data: iter.next('object') && iter.value\r\n    }).dialog;\r\n}\r\n\r\nconst factory = { alert, confirm, prompt, notify };\r\ndefine(UIToolset, factory);\r\ndefinePrototype(UIToolset, factory);\r\n\r\nexport {\r\n    alert,\r\n    confirm,\r\n    prompt,\r\n    notify\r\n};\r\n","import { define } from \"./core/define.js\";\r\nimport { each } from \"./include/zeta-dom/util.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {'previousSibling' | 'nextSibling'} prop\r\n */\r\nfunction getNextVisible(control, prop) {\r\n    for (var cur = control[prop]; cur && !cur.visible; cur = cur[prop]);\r\n    return cur;\r\n}\r\n\r\nconst ButtonList = define('buttonlist', {\r\n    template: '<div class=\"sep-before:{{showSeparatorBefore}} sep-after:{{showSeparatorAfter}}\"><children show-text=\"true\" show-icon=\"true\" controls/></div>',\r\n    templates: {\r\n        button: '<z:button><span class=\"zui-label zui-label-description\">{{description ?? [ shortcut :zui-shortcut ]}}</span></z:button>',\r\n    },\r\n    showIcon: true,\r\n    showText: true,\r\n    showSeparatorBefore: false,\r\n    showSeparatorAfter: false,\r\n    requireChildControls: true,\r\n    hiddenWhenDisabled: true,\r\n    parseOptions: parseControlsAndExecute,\r\n    stateChange: function (e, self) {\r\n        each(self.controls, function (i, v) {\r\n            if (v.type === 'buttonlist') {\r\n                var prevVisible = getNextVisible(v, 'previousSibling');\r\n                var nextVisible = getNextVisible(v, 'nextSibling');\r\n                // @ts-ignore\r\n                v.showSeparatorBefore = !!prevVisible;\r\n                // @ts-ignore\r\n                v.showSeparatorAfter = !!nextVisible && nextVisible.type !== 'buttonlist'\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\nexport default ButtonList;\r\n","import { defineLayout } from \"./core/define.js\";\r\n\r\ndefineLayout('buttonlike', {\r\n    template: '<label role=\"button\"><children/></label>'\r\n});\r\n\r\nexport default null;\r\n","import { define } from \"./core/define.js\";\r\nimport UIControlSpecies from \"./core/UIControlSpecies.js\";\r\nimport _ButtonLike from \"./ButtonLike.js\";\r\n\r\nconst Callout = define('callout', {\r\n    template: '<div><controls of=\"not parent.alwaysShowCallout && parent.controls where enabled as _enabled && _enabled.length == 1 && _enabled.0.id == id\"></controls><z:buttonlike class=\"hidden:{{[ not alwaysShowCallout ] && controls where enabled length == 1}}\"><z:label></z:label></z:buttonlike><z:menu></z:menu></div>',\r\n    requireChildControls: true,\r\n    hideCalloutOnExecute: true,\r\n    hideCalloutOnBlur: true,\r\n    alwaysShowCallout: true,\r\n    parseOptions: function (options, iter) {\r\n        options.icon = iter.string();\r\n        options.controls = iter.nextAll(UIControlSpecies);\r\n    }\r\n});\r\n\r\nexport default Callout;\r\n","import { define } from \"./core/define.js\";\r\nimport { parseExecute, shouldExecuteOnClick } from \"./util/defineUtil.js\";\r\n\r\nfunction checkboxToggleValue(e, self) {\r\n    if (e.type !== 'click' || shouldExecuteOnClick(e, 'checkbox')) {\r\n        self.value = !self.value;\r\n        return self.type === 'checkbox' ? self.execute() : e.handled();\r\n    }\r\n}\r\n\r\nconst Checkbox = define('checkbox', {\r\n    template: '<z:button class=\"checked:{{value}}\" show-icon=\"false\" show-text=\"true\"/>',\r\n    value: false,\r\n    preventLeave: true,\r\n    parseOptions: parseExecute,\r\n    click: checkboxToggleValue,\r\n    enter: checkboxToggleValue,\r\n    space: checkboxToggleValue\r\n});\r\n\r\nexport default Checkbox;\r\n","import { runCSSTransition } from \"./include/zeta-dom/cssUtil.js\";\r\nimport { bind, containsOrEquals, getClass, removeNode, setClass } from \"./include/zeta-dom/domUtil.js\";\r\nimport dom from \"./include/zeta-dom/dom.js\";\r\nimport { each, is, defineHiddenProperty, catchAsync } from \"./include/zeta-dom/util.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\nimport { position, snap } from \"./util/cssUtil.js\";\r\n\r\nfunction getNextItem(self, cur, dir) {\r\n    var arr = [];\r\n    (function getButtonList(control) {\r\n        each(control.controls, function (i, v) {\r\n            if (v.hasRole('buttonlist') && !v.hasRole('menu')) {\r\n                getButtonList(v);\r\n            } else if (v.hasRole('button') && v.enabled && v.visible) {\r\n                arr[arr.length] = v;\r\n            }\r\n        });\r\n    }(self));\r\n    var i = arr.indexOf(cur);\r\n    return arr[i < 0 ? 0 : i + dir];\r\n}\r\n\r\nfunction showCallout(self, to, dir, within, offset) {\r\n    var callout = self.callout;\r\n    if (self.parent && containsOrEquals(self.element, callout)) {\r\n        setClass(callout, 'hidden', false);\r\n        position(callout, self.element, 'right top inset-y');\r\n    } else {\r\n        if (self.calloutParent) {\r\n            snap(callout, self.calloutParent);\r\n        } else if (is(to, Node)) {\r\n            snap(callout, to, dir, offset);\r\n        } else {\r\n            position(callout, to, dir, within, offset);\r\n        }\r\n        dom.focus(callout);\r\n        if (getClass(callout, 'closing')) {\r\n            setClass(callout, 'open', false);\r\n            setClass(callout, 'closing', false);\r\n        }\r\n        catchAsync(runCSSTransition(callout, 'open'));\r\n    }\r\n}\r\n\r\nfunction hideCallout(self) {\r\n    var callout = self.callout;\r\n    if (self.parent && containsOrEquals(self.element, callout)) {\r\n        setClass(callout, 'hidden', true);\r\n    } else {\r\n        catchAsync(runCSSTransition(callout, 'closing', function () {\r\n            removeNode(callout);\r\n        }));\r\n    }\r\n    self.activeButton = null;\r\n}\r\n\r\nfunction isSubMenu(self) {\r\n    if (self.parent) {\r\n        for (var cur = self.parent; cur && cur.hasRole('buttonlist') && !cur.hasRole('menu'); cur = cur.parent);\r\n        return !cur || cur.hasRole('menu');\r\n    }\r\n}\r\n\r\nconst Menu = define('menu', {\r\n    template: '<div scrollable class=\"zui-root zui-float\"><z:buttonlist/></div>',\r\n    waitForExecution: false,\r\n    parseOptions: parseControlsAndExecute,\r\n    init: function (e, self) {\r\n        var callout = e.context.getElementForRole('menu') || self.element;\r\n        if (isSubMenu(self)) {\r\n            bind(self.element, {\r\n                mouseenter: showCallout.bind(null, self),\r\n                mouseleave: hideCallout.bind(null, self)\r\n            });\r\n        } else if (!self.parent && callout === self.element) {\r\n            defineHiddenProperty(self.context, 'showMenu', showCallout.bind(null, self));\r\n            defineHiddenProperty(self.context, 'hideMenu', hideCallout.bind(null, self));\r\n            defineHiddenProperty(self.context, 'element', callout);\r\n        } else {\r\n            self.calloutParent = callout.parentNode;\r\n            dom.retainFocus(self.element, callout);\r\n            removeNode(callout);\r\n        }\r\n        bind(self.element, 'mousemove', function () {\r\n            self.activeButton = null;\r\n        });\r\n        setClass(callout, 'is-' + self.type, true);\r\n        self.callout = callout;\r\n        self.activeButton = null;\r\n        self.watch('activeButton', function (cur, old) {\r\n            (old || {}).active = false;\r\n            (cur || {}).active = true;\r\n            (cur || self).focus();\r\n        });\r\n        hideCallout(self);\r\n    },\r\n    focusin: function (e, self) {\r\n        if (e.source === 'keyboard' && !self.parent) {\r\n            showCallout(self);\r\n            self.activeButton = getNextItem(self, self, 1);\r\n        }\r\n    },\r\n    focusout: function (e, self) {\r\n        self.activeButton = null;\r\n        if (self.hideCalloutOnBlur) {\r\n            hideCallout(self);\r\n        }\r\n    },\r\n    click: function (e, self) {\r\n        if (!containsOrEquals(self.callout, e.target)) {\r\n            showCallout(self);\r\n            e.handled();\r\n        }\r\n    },\r\n    keystroke: function (e, self) {\r\n        var cur = self.activeButton;\r\n        var dir = /^(up|down|left|right)Arrow$/.test(e.data) && RegExp.$1[0];\r\n        if (dir === 'l') {\r\n            if (!self.parent) {\r\n                e.handled();\r\n            } else if (cur) {\r\n                hideCallout(self);\r\n                e.handled();\r\n            }\r\n        } else if (dir === 'r') {\r\n            showCallout(self);\r\n            self.activeButton = cur || getNextItem(self, self, 1);\r\n            e.handled();\r\n        } else if (dir && (cur || !self.parent || self.calloutParent)) {\r\n            self.activeButton = getNextItem(self, cur, dir === 'u' ? -1 : 1) || cur;\r\n            e.handled();\r\n        }\r\n    },\r\n    childExecuted: function (e, self) {\r\n        self.activeButton = null;\r\n        // @ts-ignore: type inference issue\r\n        for (var cur = e.control; cur && cur !== self.parent; cur = cur.parent) {\r\n            if (!cur.hideCalloutOnExecute) {\r\n                return;\r\n            }\r\n        }\r\n        hideCallout(self);\r\n    },\r\n    beforeDestroy: function (e, self) {\r\n        hideCallout(self);\r\n    }\r\n});\r\n\r\nexport default Menu;\r\n","import { any, each, isPlainObject, extend, createPrivateStore } from \"./include/zeta-dom/util.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\nimport { parseTemplateConstant } from \"./util/common.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport Button from \"./Button.js\";\r\nimport ButtonLike from \"./ButtonLike.js\";\r\n\r\nconst _ = createPrivateStore();\r\n\r\nfunction setDropdownValue(dropdown, value, forceUpdate) {\r\n    var choices = _(dropdown).all(dropdown);\r\n    var defaultChoice;\r\n    var match = any(choices, function (v) {\r\n        defaultChoice = defaultChoice || v;\r\n        return v.value === value;\r\n    });\r\n    if (!match && !dropdown.allowEmpty) {\r\n        match = defaultChoice;\r\n    }\r\n    if (dropdown.setValue(match ? match.value : '') || forceUpdate) {\r\n        dropdown.hintValue = value;\r\n        dropdown.selectedText = (match && dropdown.valueAsLabel ? match : dropdown).label;\r\n        each(choices, function (i, v) {\r\n            v.selected = v === match;\r\n        });\r\n    }\r\n}\r\n\r\nfunction updateDropdownChoices(dropdown, choiceObj) {\r\n    var isArray = Array.isArray(choiceObj);\r\n    var choices = [];\r\n    each(choiceObj, function (i, v) {\r\n        choices[choices.length] = isArray && isPlainObject(v) ? v : {\r\n            value: isArray ? v : parseTemplateConstant(i),\r\n            label: v\r\n        };\r\n    });\r\n\r\n    var choiceButton = _(dropdown);\r\n    var newButtons = [];\r\n    for (var i = 0, len = choices.length - Object.keys(choiceButton.all(dropdown)).length; i < len; i++) {\r\n        newButtons[i] = choiceButton;\r\n    }\r\n    dropdown.append(newButtons);\r\n    each(choiceButton.all(dropdown), function (i, v) {\r\n        v.enabled = v.visible = !!choices[0];\r\n        extend(v, choices.shift());\r\n    });\r\n    setDropdownValue(dropdown, dropdown.hintValue, true);\r\n}\r\n\r\nconst Dropdown = define('dropdown', {\r\n    template: '<z:buttonlike label=\"{{selectedText}}\" show-text=\"true\"><z:label></z:label><z:menu></z:menu></z:buttonlike>',\r\n    requireChildControls: true,\r\n    hideCalloutOnBlur: true,\r\n    hideCalloutOnExecute: true,\r\n    preventLeave: true,\r\n    allowEmpty: true,\r\n    valueAsLabel: true,\r\n    value: '',\r\n    parseOptions: function (options, iter) {\r\n        options.icon = iter.string();\r\n        if (iter.next(Array) || iter.next(Map)) {\r\n            options.choices = iter.value;\r\n            options.value = iter.next('string') || iter.next('number') ? iter.value : '';\r\n        }\r\n        parseControlsAndExecute(options, iter);\r\n    },\r\n    init: function (e, self) {\r\n        _(self, new UIToolset(self.state.name).use(Button).button({\r\n            template: '<z:button class=\"selected:{{selected}}\" show-icon=\"true\" show-text=\"true\"/>',\r\n            execute: function (choice) {\r\n                setDropdownValue(self, choice.value);\r\n                self.execute();\r\n            }\r\n        }));\r\n        self.hintValue = self.value;\r\n        self.selectedText = self.label;\r\n        self.watch('choices', function (cur) {\r\n            updateDropdownChoices(self, cur);\r\n        }, true);\r\n    },\r\n    setValue: function (e, self) {\r\n        updateDropdownChoices(self, self.choices);\r\n        setDropdownValue(self, e.newValue);\r\n        e.handled();\r\n    }\r\n});\r\n\r\nexport default Dropdown;\r\n","import $ from \"./include/external/jquery.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport dom from \"./include/zeta-dom/dom.js\";\r\nimport { bind, containsOrEquals, getRect, matchSelector } from \"./include/zeta-dom/domUtil.js\";\r\nimport { IS_TOUCH } from \"./include/zeta-dom/env.js\";\r\nimport { extend, isFunction, reject, repeat } from \"./include/zeta-dom/util.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport TextBox from \"./TextBox.js\";\r\nimport GenericComponent from \"./Generic.js\";\r\nimport ButtonSet from \"./ButtonSet.js\";\r\nimport Menu from \"./Menu.js\";\r\nimport Dropdown from \"./Dropdown.js\";\r\nimport Button from \"./Button.js\";\r\nimport SubmitButton from \"./SubmitButton.js\";\r\nimport Label from \"./Label.js\";\r\nimport globalContext from \"./globalContext.js\";\r\n\r\nconst MS_PER_DAY = 86400000;\r\nconst TIMEZONE_OFFSET = new Date().getTimezoneOffset() * 60000;\r\nconst INPUT_TYPES = {\r\n    datetime: 'datetime-local',\r\n    day: 'date',\r\n    week: 'week',\r\n    month: 'month'\r\n};\r\nconst MONTH_NAMES = [];\r\nconst WEEKDAYS_NAMES = [];\r\n\r\nconst ui = new UIToolset('zeta.ui.datepicker').use(GenericComponent, ButtonSet, Menu, Dropdown, Button, SubmitButton, Label, TextBox);\r\nconst defaultLocale = globalContext.language;\r\n\r\nvar controls;\r\nvar callout;\r\nvar activeTyper;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction range(count, callback) {\r\n    var arr = [];\r\n    for (var i = 0; i < count; i++) {\r\n        arr[i] = callback(i);\r\n    }\r\n    return arr;\r\n}\r\n\r\nfunction loadLabels(lang) {\r\n    var key = lang || 'default';\r\n    var locale = lang || defaultLocale;\r\n    var monthFormatter = new Intl.DateTimeFormat(locale, { month: 'long' });\r\n    var weekdayFormatter = new Intl.DateTimeFormat(locale, { weekday: 'narrow' });\r\n    var importDefaultLabels = import(\r\n        /* webpackMode: \"eager\" */\r\n        \"./locale/\" + locale + \"/zeta.ui.datepicker.json\"\r\n    );\r\n    importDefaultLabels.then(function (labels) {\r\n        ui.i18n(key, labels.default);\r\n    });\r\n    range(12, function (i) {\r\n        var str = monthFormatter.format(new Date(1970, i));\r\n        MONTH_NAMES[i] = str;\r\n        ui.i18n(key, 'month_' + i, str);\r\n    });\r\n    range(7, function (i) {\r\n        var date = new Date(1970, 0, i);\r\n        WEEKDAYS_NAMES[date.getDay()] = weekdayFormatter.format(date);\r\n    });\r\n}\r\n\r\nfunction getFullYear(d) {\r\n    return d.getFullYear();\r\n}\r\n\r\nfunction getMonth(d) {\r\n    return d.getMonth();\r\n}\r\n\r\nfunction getDate(d) {\r\n    return d.getDate();\r\n}\r\n\r\nfunction getHours(d) {\r\n    return d.getHours();\r\n}\r\n\r\nfunction getMinutes(d) {\r\n    return d.getMinutes();\r\n}\r\n\r\nfunction sameMonth(x, y) {\r\n    return getFullYear(x) === getFullYear(y) && getMonth(x) === getMonth(y);\r\n}\r\n\r\nfunction parseMaxima(d) {\r\n    if (typeof d === 'string' && /^today|([+-]\\d+)(day|week|month|year)?$/g.test(d)) {\r\n        return RegExp.$1 ? stepDate(RegExp.$2 || 'day', new Date(), +RegExp.$1) : new Date();\r\n    }\r\n    d = d === null ? undefined : d instanceof Date ? d : new Date(d);\r\n    return isNaN(d) ? undefined : d;\r\n}\r\n\r\nfunction makeTime(h, m) {\r\n    var date = new Date();\r\n    date.setHours(h, m, 0, 0);\r\n    return date;\r\n}\r\n\r\nfunction toNumericValue(mode, value) {\r\n    // timestamp values for native controls are based on local time against local time epoch for \"datetime-local\" and\r\n    // UTC midnight against UTC epoch for other non-time types; which is exactly the opposite in this library:\r\n    // local time against UTC epoch and local midnight against UTC epoch respectively\r\n    switch (mode) {\r\n        case 'datetime':\r\n            return +value - TIMEZONE_OFFSET;\r\n        case 'month':\r\n            return (getFullYear(value) - 1970) * 12 + getMonth(value);\r\n    }\r\n    return +value + TIMEZONE_OFFSET;\r\n}\r\n\r\nfunction fromNumericValue(mode, value) {\r\n    switch (mode) {\r\n        case 'datetime':\r\n            return new Date(value + TIMEZONE_OFFSET);\r\n        case 'month':\r\n            return new Date(1970, value);\r\n    }\r\n    return new Date(value - TIMEZONE_OFFSET);\r\n}\r\n\r\nfunction normalizeDate(options, date) {\r\n    var min = parseMaxima(options.min);\r\n    var max = parseMaxima(options.max);\r\n    date = new Date(+(date < min ? min : date > max ? max : date));\r\n    switch (options.mode || options) {\r\n        case 'week':\r\n            date.setDate(getDate(date) - date.getDay());\r\n            break;\r\n        case 'month':\r\n            date.setDate(1);\r\n            break;\r\n    }\r\n    if ((options.mode || options) !== 'datetime') {\r\n        date.setHours(0, 0, 0, 0);\r\n    } else {\r\n        date.setSeconds(0, 0);\r\n    }\r\n    return date;\r\n}\r\n\r\nfunction stepDate(mode, date, dir, step) {\r\n    switch (mode) {\r\n        case 'minute':\r\n            var d = dir / Math.abs(dir);\r\n            return new Date(+date + 60000 * ((((d > 0 ? step : 0) - (getMinutes(date) % step)) || (step * d)) + (step * (dir - d))));\r\n        case 'day':\r\n            return new Date(+date + MS_PER_DAY * dir);\r\n        case 'week':\r\n            return new Date(+date + MS_PER_DAY * 7 * dir);\r\n        case 'month':\r\n            return new Date(getFullYear(date), getMonth(date) + dir, getDate(date));\r\n        case 'year':\r\n            return new Date(getFullYear(date) + dir, getMonth(date), getDate(date));\r\n    }\r\n}\r\n\r\nfunction formatDate(mode, date) {\r\n    switch (mode) {\r\n        case 'month':\r\n            return MONTH_NAMES[getMonth(date)] + ' ' + getFullYear(date);\r\n        case 'week':\r\n            var end = stepDate('day', date, 6);\r\n            return MONTH_NAMES[getMonth(date)] + ' ' + getDate(date) + ' - ' + (getMonth(end) !== getMonth(date) ? MONTH_NAMES[getMonth(end)] + ' ' : '') + getDate(end) + ', ' + getFullYear(date);\r\n    }\r\n    var monthPart = MONTH_NAMES[getMonth(date)] + ' ' + getDate(date) + ', ' + getFullYear(date);\r\n    return mode === 'datetime' ? monthPart + ' ' + (getHours(date) || 12) + ':' + ('0' + getMinutes(date)).slice(-2) + ' ' + (getHours(date) >= 12 ? 'PM' : 'AM') : monthPart;\r\n}\r\n\r\nfunction showMonth(self, date) {\r\n    if (isNaN(+date)) {\r\n        return;\r\n    }\r\n    if (typeof date === 'number') {\r\n        date = stepDate('month', self.currentMonth, date);\r\n    }\r\n    var min = parseMaxima(self.min);\r\n    var max = parseMaxima(self.max);\r\n    var currentMonth = normalizeDate({\r\n        mode: 'month',\r\n        min: min,\r\n        max: max\r\n    }, date);\r\n    var y = getFullYear(currentMonth);\r\n    var m = getMonth(currentMonth);\r\n    var all = controls.year.all(self)[0].all;\r\n    var firstDay = currentMonth.getDay();\r\n    var $buttons = $('td', self.element).removeClass('selected disabled');\r\n\r\n    if (!self.currentMonth || !sameMonth(currentMonth, self.currentMonth)) {\r\n        var numDays = new Date(y, m + 1, 0).getDate();\r\n        var numDaysLast = new Date(y, m, 0).getDate();\r\n        $buttons.removeClass('prev cur next today');\r\n        $buttons.each(function (i, v) {\r\n            if (i < firstDay) {\r\n                $(v).children().text(i + 1 - firstDay + numDaysLast).end().addClass('prev');\r\n            } else if (i >= numDays + firstDay) {\r\n                $(v).children().text(i + 1 - firstDay - numDays).end().addClass('next');\r\n            } else {\r\n                $(v).children().text(i + 1 - firstDay).end().addClass('cur');\r\n            }\r\n        });\r\n        var today = new Date();\r\n        if (sameMonth(currentMonth, today)) {\r\n            $buttons.eq(getDate(today) + firstDay - 1).addClass('today');\r\n        }\r\n        $('tr:last', self.element).toggle(firstDay + numDays > 35);\r\n\r\n        all.year.choices = range(11, function (v) {\r\n            return y + v - 5;\r\n        });\r\n        self.currentMonth = currentMonth;\r\n    }\r\n    all.year.value = y;\r\n    all.month.value = m;\r\n\r\n    var isMinMonth = min && sameMonth(currentMonth, min);\r\n    var isMaxMonth = max && sameMonth(currentMonth, max);\r\n    all.prevMonth.enabled = !isMinMonth;\r\n    all.nextMonth.enabled = !isMaxMonth;\r\n    if (isMinMonth) {\r\n        $buttons.slice(0, getDate(min) + firstDay - 1).addClass('disabled');\r\n    }\r\n    if (isMaxMonth) {\r\n        $buttons.slice(getDate(max) + firstDay).addClass('disabled');\r\n    }\r\n\r\n    var selected = sameMonth(currentMonth, self.value);\r\n    if (selected || (self.mode === 'week' && sameMonth(currentMonth, stepDate('day', self.value, 6)))) {\r\n        switch (self.mode) {\r\n            case 'day':\r\n                $buttons.eq(getDate(self.value) + firstDay - 1).addClass('selected');\r\n                break;\r\n            case 'week':\r\n                $buttons.slice(selected ? getDate(self.value) + firstDay - 1 : 0).slice(0, 7).addClass('selected');\r\n                break;\r\n            case 'month':\r\n                $buttons.filter('td.cur').addClass('selected');\r\n                break;\r\n        }\r\n    }\r\n    $(self.element).toggleClass('select-range', self.mode !== 'day');\r\n}\r\n\r\nfunction initControls() {\r\n    var dropdownOptions = {\r\n        template: '<z:callout label=\"{{selectedText}}\" show-text=\"true\"/>'\r\n    };\r\n    var monthChoices = new Map();\r\n    range(12, function (v) {\r\n        monthChoices.set(v, 'month_' + v);\r\n    });\r\n    controls = {\r\n        year: ui.dropdown('year', function (self) {\r\n            // @ts-ignore: parent is not null\r\n            return showMonth(self.parent, new Date(self.value, getMonth(self.parent.currentMonth)));\r\n        }, dropdownOptions),\r\n        month: ui.dropdown('month', monthChoices, function (self) {\r\n            // @ts-ignore: parent is not null\r\n            return showMonth(self.parent, new Date(getFullYear(self.parent.currentMonth), self.value));\r\n        }, dropdownOptions),\r\n        prev: ui.button('prevMonth', '\\ue314', function (self) {\r\n            return showMonth(self.parent, -1);\r\n        }),\r\n        setToday: ui.button('setToday', '\\ue8df', function (self) {\r\n            // @ts-ignore: parent is not null\r\n            return self.parent.execute(new Date());\r\n        }),\r\n        next: ui.button('nextMonth', '\\ue315', function (self) {\r\n            return showMonth(self.parent, 1);\r\n        }),\r\n        hour: ui.number('hour', {\r\n            options: {\r\n                min: 0,\r\n                max: 23,\r\n                loop: true\r\n            },\r\n            execute: function (self) {\r\n                // @ts-ignore: parent is not null\r\n                self.parent.execute(makeTime(self.value, self.all.minute.value));\r\n            }\r\n        }),\r\n        timeSeperator: ui.label('timeSeperator'),\r\n        minute: ui.number('minute', {\r\n            options: {\r\n                min: 0,\r\n                max: 59,\r\n                digits: 'fixed',\r\n                loop: true\r\n            },\r\n            execute: function (self) {\r\n                // @ts-ignore: parent is not null\r\n                self.parent.execute(makeTime(self.all.hour.value, self.value));\r\n            }\r\n        }),\r\n        meridiem: ui.button('meridiem', {\r\n            value: false,\r\n            label: 'am',\r\n            showText: true,\r\n            propertyChange: function (e, self) {\r\n                self.label = self.value ? 'pm' : 'am';\r\n            },\r\n            execute: function (self) {\r\n                self.value = !self.value;\r\n                // @ts-ignore: parent is not null\r\n                self.parent.execute(makeTime(self.all.hour.value % 12 + (self.value ? 12 : 0), self.all.minute.value));\r\n            }\r\n        })\r\n    };\r\n}\r\n\r\nfunction initDatepickerCallout() {\r\n    var executed = function (e, self) {\r\n        var date = new Date(+self.all.calendar.value);\r\n        date.setHours(getHours(self.all.clock.value), getMinutes(self.all.clock.value));\r\n        if (activeTyper) {\r\n            activeTyper.setValue(date);\r\n        }\r\n    };\r\n    var calender = ui.calendar({\r\n        executed: executed,\r\n        contextChange: function (e, self) {\r\n            // @ts-ignore: custom control property\r\n            self.min = callout.min;\r\n            // @ts-ignore: custom control property\r\n            self.max = callout.max;\r\n            // @ts-ignore: custom control property\r\n            self.mode = callout.mode === 'datetime' ? 'day' : callout.mode;\r\n        }\r\n    });\r\n    var clock = ui.clock({\r\n        hiddenWhenDisabled: true,\r\n        executed: executed,\r\n        contextChange: function (e, self) {\r\n            // @ts-ignore: custom control property\r\n            self.step = callout.minuteStep;\r\n            self.enabled = callout.mode === 'datetime';\r\n        }\r\n    });\r\n    var okButton = ui.submit('done', 'done', {\r\n        execute: function (self) {\r\n            callout.hideMenu();\r\n        }\r\n    });\r\n    callout = ui.menu(\r\n        ui.buttonset(calender, clock),\r\n        ui.generic({\r\n            controls: [ui.buttonset(okButton)],\r\n            template: '<z:generic><controls layout=\"dialog\"/></z:generic>'\r\n        }), {\r\n        hideCalloutOnBlur: false\r\n    }).render();\r\n}\r\n\r\nfunction stepValue(tx) {\r\n    var options = tx.widget.options;\r\n    var date = stepDate(options.mode === 'datetime' ? 'minute' : options.mode, tx.typer.getValue() || new Date(), tx.commandName === 'stepUp' ? -1 : 1, options.minuteStep);\r\n    tx.typer.setValue(date);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Control types\r\n * -------------------------------------- */\r\n\r\nconst Calendar = define('calendar', {\r\n    template: '<div><div class=\"zui-calendar-header\"><z:buttonset show-text=\"false\"/></div><div class=\"zui-calendar-body\"><table></table></div></div>',\r\n    hideCalloutOnExecute: false,\r\n    value: null,\r\n    mode: 'day',\r\n    min: null,\r\n    max: null,\r\n    setValue: function (e, self) {\r\n        var value = normalizeDate(this, e.newValue);\r\n        self.selectedDate = value;\r\n        self.value = value;\r\n        showMonth(self, value);\r\n    },\r\n    init: function (e, self) {\r\n        if (!controls) {\r\n            initControls();\r\n        }\r\n        self.append([controls.year, controls.month, controls.prev, controls.setToday, controls.next]);\r\n\r\n        var updateValue = function () {\r\n            self.value = normalizeDate(self, self.selectedDate);\r\n        };\r\n        self.watch('mode', updateValue);\r\n        self.watch('min', updateValue);\r\n        self.watch('max', updateValue);\r\n\r\n        var $table = $('table', self.element);\r\n        $(repeat('<tr></tr>', 7)).appendTo($table);\r\n        $(repeat('<th></th>', 7)).appendTo($table.find('tr:first'));\r\n        $(repeat('<td></td>', 7)).appendTo($table.find('tr+tr'));\r\n        $('<button>').appendTo($table.find('td'));\r\n        $table.find('th').text(function (i) {\r\n            return WEEKDAYS_NAMES[i];\r\n        });\r\n        $table.find('td').on('click', function () {\r\n            var monthDelta = $(this).hasClass('prev') ? -1 : $(this).hasClass('next') ? 1 : 0;\r\n            // @ts-ignore: type inference issue\r\n            self.execute(new Date(getFullYear(self.currentMonth), getMonth(self.currentMonth) + monthDelta, +this.textContent));\r\n        });\r\n        if (!self.value) {\r\n            self.value = new Date();\r\n        } else {\r\n            showMonth(self, 0);\r\n        }\r\n    },\r\n    mousewheel: function (e, self) {\r\n        if (self.context === callout) {\r\n            showMonth(self, e.data);\r\n            e.handled();\r\n        }\r\n    },\r\n    contextChange: function (e, self) {\r\n        showMonth(self, self.currentMonth || self.value || new Date());\r\n    }\r\n});\r\n\r\nconst Clock = define('clock', {\r\n    template: '<div><div class=\"zui-clock-face\"><s hand=\"h\"></s><s hand=\"m\"></s><i></i><i></i></div><z:buttonset/></div>',\r\n    hideCalloutOnExecute: false,\r\n    step: 1,\r\n    value: null,\r\n    init: function (e, self) {\r\n        if (!controls) {\r\n            initControls();\r\n        }\r\n        self.append([controls.hour, controls.timeSeperator, controls.minute, controls.meridiem]);\r\n        self.watch('step', function (step) {\r\n            // only allow minute interval that is a factor of 60\r\n            // to maintain consistent step over hours\r\n            if (60 % step) {\r\n                self.step = 1;\r\n            }\r\n            controls.minute.all(self)[0].options.step = step;\r\n        }, true);\r\n        self.setValue(new Date());\r\n    },\r\n    setValue: function (e, self) {\r\n        var date = e.newValue;\r\n        var all = controls.hour.all(self)[0].all;\r\n        all.hour.value = getHours(date) || 12;\r\n        all.minute.value = getMinutes(date);\r\n        all.meridiem.value = getHours(date) >= 12;\r\n        $('s[hand=\"h\"]', self.element).css('transform', 'rotate(' + (getHours(date) * 30 + getMinutes(date) * 0.5 - 90) + 'deg)');\r\n        $('s[hand=\"m\"]', self.element).css('transform', 'rotate(' + (getMinutes(date) * 6 - 90) + 'deg)');\r\n    },\r\n    mousedown: function (e, self) {\r\n        if (matchSelector(e.target, 's')) {\r\n            // @ts-ignore: parent is not null\r\n            var rect = getRect(e.target.parentNode);\r\n            var promise = dom.beginDrag(function (x, y) {\r\n                var rad = Math.atan2(y - rect.centerY, x - rect.centerX) / Math.PI;\r\n                var curM = getMinutes(self.value);\r\n                var curH = getHours(self.value);\r\n                if (e.target.getAttribute('hand') === 'm') {\r\n                    // @ts-ignore: custom control property\r\n                    var m = (Math.round((rad * 30 + 75) / self.step) * self.step) % 60;\r\n                    if (m !== curM) {\r\n                        var deltaH = Math.floor(Math.abs(curM - m) / 30) * (m > curM ? -1 : 1);\r\n                        self.setValue(makeTime(curH + deltaH, m));\r\n                    }\r\n                } else {\r\n                    var h = Math.round(rad * 6 + 15) % 12 + (controls.meridiem.all(self)[0].value ? 12 : 0);\r\n                    if (h !== curH) {\r\n                        self.setValue(makeTime(h, curM));\r\n                    }\r\n                }\r\n            });\r\n            promise.then(function () {\r\n                self.execute();\r\n            });\r\n        }\r\n    },\r\n    mousewheel: function (e, self) {\r\n        self.setValue(stepDate('minute', self.value, e.data, self.step));\r\n        self.mousewheelTimeout = self.mousewheelTimeout || setTimeout(function () {\r\n            self.mousewheelTimeout = null;\r\n            self.execute();\r\n        });\r\n        e.preventDefault();\r\n        e.handled();\r\n    }\r\n});\r\n\r\nconst DatePicker = define('datepicker', {\r\n    template: '<z:textbox/>',\r\n    preventLeave: true,\r\n    value: '',\r\n    options: {},\r\n    init: function (e, self) {\r\n        if (IS_TOUCH) {\r\n            var mode = self.options.mode || self.preset.options.mode;\r\n            self.nativeInput = $('<input type=\"' + INPUT_TYPES[mode] + '\">').appendTo(self.element)[0];\r\n            bind(self.nativeInput, 'change', function (e) {\r\n                self.setValue(fromNumericValue(mode, self.nativeInput.valueAsNumber));\r\n            });\r\n        }\r\n    },\r\n    focusin: function (e, self) {\r\n        if (IS_TOUCH) {\r\n            var mode = self.options.mode || self.preset.options.mode;\r\n            if (!self.value) {\r\n                self.value = new Date();\r\n            }\r\n            // input type \"datetime-local\" does not support valueAsDate so we need to use with valueAsNumber (timestamp)\r\n            self.nativeInput.valueAsNumber = toNumericValue(mode, self.value);\r\n            self.nativeInput.focus();\r\n            e.preventDefault();\r\n        }\r\n    },\r\n    preset: {\r\n        options: {\r\n            mode: 'day',\r\n            minuteStep: 1,\r\n            min: null,\r\n            max: null,\r\n            required: false,\r\n            formatDate: null\r\n        },\r\n        overrides: {\r\n            getValue: function (preset) {\r\n                return preset.selectedDate ? normalizeDate(preset.options, preset.selectedDate) : null;\r\n            },\r\n            setValue: function (preset, date) {\r\n                date = date ? normalizeDate(preset.options, date) : null;\r\n                preset.selectedDate = date;\r\n                preset.softSelectedDate = null;\r\n\r\n                var text = '';\r\n                if (date && !isNaN(+date)) {\r\n                    var format = function (fn) {\r\n                        return isFunction(fn) && fn(preset.options.mode, date);\r\n                    };\r\n                    text = format(preset.options.formatDate) || format(formatDate);\r\n                }\r\n                if (text !== this.extractText()) {\r\n                    this.invoke(function (tx) {\r\n                        tx.selection.selectAll();\r\n                        tx.insertText(text);\r\n                    });\r\n                    if (this === activeTyper) {\r\n                        callout.calendar = callout.clock = preset.selectedDate || new Date();\r\n                    }\r\n                }\r\n            },\r\n            validate: function (preset) {\r\n                if (preset.options.required && !!preset.selectedDate) {\r\n                    return reject('required');\r\n                }\r\n            }\r\n        },\r\n        commands: {\r\n            stepUp: stepValue,\r\n            stepDown: stepValue\r\n        },\r\n        contentChange: function (e) {\r\n            if (e.typer === activeTyper && e.source !== 'script') {\r\n                var date = new Date(e.typer.extractText());\r\n                if (!isNaN(+date)) {\r\n                    callout.calendar = callout.clock = normalizeDate(e.widget.options, date);\r\n                }\r\n                e.widget.softSelectedDate = date;\r\n            }\r\n        },\r\n        click: function (e) {\r\n            if (e.typer === activeTyper) {\r\n                callout.showMenu(e.typer.element, 'left bottom', null, 10);\r\n            }\r\n        },\r\n        escape: function (e) {\r\n            if (containsOrEquals(document, callout.element)) {\r\n                callout.hideMenu();\r\n                e.handled();\r\n            }\r\n        },\r\n        focusin: function (e) {\r\n            if (!callout) {\r\n                initDatepickerCallout();\r\n            }\r\n            e.typer.retainFocus(callout.element);\r\n            activeTyper = e.typer;\r\n\r\n            var options = e.widget.options;\r\n            var value = e.typer.getValue() || new Date();\r\n            extend(callout, {\r\n                mode: options.mode,\r\n                minuteStep: options.minuteStep,\r\n                min: options.min,\r\n                max: options.max,\r\n                calendar: value,\r\n                clock: value\r\n            });\r\n            callout.update();\r\n            if (e.source !== 'script') {\r\n                callout.showMenu(e.typer.element, 'left bottom', null, 10);\r\n            }\r\n        },\r\n        focusout: function (e) {\r\n            if (e.typer === activeTyper) {\r\n                var softDate = e.widget.softSelectedDate;\r\n                e.typer.setValue(!softDate || isNaN(+softDate) ? e.widget.selectedDate : softDate);\r\n                activeTyper = null;\r\n                callout.hideMenu();\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nloadLabels();\r\n\r\nexport {\r\n    DatePicker,\r\n    Calendar,\r\n    Clock\r\n}\r\n","import { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\n\r\nfunction updateFlag(self) {\r\n    self.value = self.optional ? !!self.value : undefined;\r\n    self.enableChildren = !self.optional || self.value;\r\n}\r\n\r\nconst FieldSet = define('fieldset', {\r\n    template: '<div class=\"optional:{{optional && [ ? value checked [ ! value ] ]}}\"><div class=\"zui-fieldset-title\"><z:checkbox/><p>{{description}}</p></div><div class=\"zui-form hidden:{{not enableChildren}}\"><children controls/></div></div>',\r\n    templates: {\r\n        textbox: '<z:textbox show-placeholder=\"always\"/>'\r\n    },\r\n    value: false,\r\n    optional: false,\r\n    parseOptions: parseControlsAndExecute,\r\n    init: function (e, self) {\r\n        updateFlag(self);\r\n    },\r\n    propertyChange: function (e, self) {\r\n        if ('optional' in e.newValues || 'value' in e.newValues) {\r\n            updateFlag(self);\r\n        }\r\n    }\r\n});\r\n\r\nexport default FieldSet;\r\n","import $ from \"./include/external/jquery.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { makeArray } from \"./include/zeta-dom/util.js\";\r\nimport { parseIconAndExecute } from \"./util/defineUtil.js\";\r\n\r\nfunction resetFileInput(e) {\r\n    var input = $(':file', e.target)[0];\r\n    var originalParent = input.parentNode;\r\n    var form = document.createElement('form');\r\n    form.appendChild(input);\r\n    form.reset();\r\n    // @ts-ignore: originalParent is not null\r\n    $(input).prependTo(originalParent);\r\n}\r\n\r\nconst FileInput = define('file', {\r\n    template: '<z:buttonlike><z:label show-icon=\"auto\"></z:label><input type=\"file\" multiple=\"{{multiple}}\"/></z:buttonlike>',\r\n    autoReset: true,\r\n    multiple: false,\r\n    parseOptions: parseIconAndExecute,\r\n    reset: resetFileInput,\r\n    init: function (e, self) {\r\n        $(':file', e.target).on('change', function (e) {\r\n            // @ts-ignore: e.target is file input\r\n            self.execute(makeArray(e.target.files));\r\n        });\r\n    },\r\n    afterExecute: function (e, self) {\r\n        if (self.autoReset) {\r\n            resetFileInput(e);\r\n        }\r\n    }\r\n});\r\n\r\nexport default FileInput;\r\n","import Promise from \"./include/external/promise-polyfill.js\";\r\nimport { lock } from \"./include/zeta-dom/domLock.js\";\r\nimport { defineHiddenProperty, mapGet, mapRemove, resolve } from \"./include/zeta-dom/util.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\nimport { confirm } from \"./promptFactory.js\";\r\n\r\nconst guards = new WeakMap();\r\nconst deferreds = new WeakMap();\r\n\r\nfunction ensureFormPromise(form, store) {\r\n    return mapGet(store, form, function () {\r\n        var obj = {};\r\n        obj.promise = new Promise(function (resolve, reject) {\r\n            obj.resolve = resolve;\r\n            obj.reject = reject;\r\n        });\r\n        return obj;\r\n    });\r\n}\r\n\r\nfunction settleFormPromise(form, store, resolveOrReject, data) {\r\n    var deferred = mapRemove(store, form);\r\n    if (deferred) {\r\n        deferred[resolveOrReject ? 'resolve' : 'reject'](data);\r\n    }\r\n}\r\n\r\nfunction initForm(form) {\r\n    var deferred = ensureFormPromise(form, deferreds);\r\n    defineHiddenProperty(form.context, form.name, deferred.promise);\r\n    settleFormPromise(form, guards, true);\r\n}\r\n\r\nconst Form = define('form', {\r\n    templates: {\r\n        buttonset: '<z:buttonset><children controls show-text=\"true\"/></z:buttonset>',\r\n        textbox: '<z:textbox show-placeholder=\"always\"/>'\r\n    },\r\n    parseOptions: parseControlsAndExecute,\r\n    defaultExport: 'promise',\r\n    preventLeave: true,\r\n    init: function (e, self) {\r\n        initForm(self);\r\n    },\r\n    childExecuted: function (e, self) {\r\n        if (e.source !== 'script' && e.control.preventLeave && !guards.get(self)) {\r\n            lock(self.element, ensureFormPromise(self, guards).promise, function () {\r\n                return self.preventLeave ? confirm('leaveForm') : resolve();\r\n            });\r\n        }\r\n    },\r\n    beforeExecute: function (e, self) {\r\n        settleFormPromise(self, guards, true);\r\n    },\r\n    executed: function (e, self) {\r\n        settleFormPromise(self, deferreds, true, e.data !== null ? e.data : self.value !== undefined ? self.value : self.context.toJSON());\r\n        self.reset();\r\n    },\r\n    cancelled: function (e, self) {\r\n        settleFormPromise(self, deferreds, false);\r\n    },\r\n    destroy: function (e, self) {\r\n        settleFormPromise(self, deferreds, false);\r\n    },\r\n    reset: function (e, self) {\r\n        if (!deferreds.get(self)) {\r\n            initForm(self);\r\n        }\r\n    }\r\n});\r\n\r\nexport default Form;\r\n","import $ from \"./include/external/jquery.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport { IS_TOUCH } from \"./include/zeta-dom/env.js\";\r\nimport { extend, isArray, isFunction, reject, resolve } from \"./include/zeta-dom/util.js\";\r\nimport dom from \"./include/zeta-dom/dom.js\";\r\nimport { containsOrEquals } from \"./include/zeta-dom/domUtil.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport Menu from \"./Menu.js\";\r\nimport Dropdown from \"./Dropdown.js\";\r\nimport Dialog from \"./Dialog.js\";\r\nimport TextBox from \"./TextBox.js\";\r\nimport Button from \"./Button.js\";\r\nimport SubmitButton from \"./SubmitButton.js\";\r\nimport ButtonSet from \"./ButtonSet.js\";\r\nimport ButtonList from \"./ButtonList.js\";\r\nimport globalContext from \"./globalContext.js\";\r\n\r\nconst SHOW_DIALOG = IS_TOUCH;\r\n\r\nconst ui = new UIToolset('zeta.ui.keyword').use(Menu, Dropdown, Dialog, TextBox, Button, SubmitButton, ButtonSet, ButtonList);\r\nconst defaultLocale = globalContext.language;\r\n\r\nvar activeInput;\r\nvar activeDialog;\r\nvar callout;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction loadLabels(lang) {\r\n    const importDefaultLabels = import(\r\n        /* webpackMode: \"eager\" */\r\n        \"./locale/\" + (lang || defaultLocale) + \"/zeta.ui.keyword.json\"\r\n    );\r\n    return importDefaultLabels.then(function (labels) {\r\n        ui.i18n(lang || 'default', labels.default);\r\n    });\r\n}\r\n\r\nfunction initCallout() {\r\n    callout = ui.menu({\r\n        hideCalloutOnBlur: false,\r\n        hideCalloutOnExecute: false,\r\n        controls: [\r\n            ui.dropdown({\r\n                template: '<z:buttonlist/>',\r\n                execute: function (self) {\r\n                    insertItem(callout.preset, self.value);\r\n                    callout.preset.typer.focus();\r\n                },\r\n                contextChange: function (e, self) {\r\n                    self.choices = self.context.suggestions;\r\n                }\r\n            })\r\n        ]\r\n    }).render();\r\n}\r\n\r\nfunction encode(v, keepWS) {\r\n    var a = document.createTextNode(keepWS ? v : v.replace(/\\s/g, '\\u00a0')),\r\n        b = document.createElement('div');\r\n    b.appendChild(a);\r\n    return b.innerHTML;\r\n}\r\n\r\nfunction toValue(v) {\r\n    return v.value;\r\n}\r\n\r\nfunction toValueObject(v) {\r\n    if (typeof v !== 'object') {\r\n        return {\r\n            value: v,\r\n            label: v\r\n        };\r\n    }\r\n    return v;\r\n}\r\n\r\nfunction sortValues(a, b) {\r\n    return a.value.localeCompare(b.value);\r\n}\r\n\r\nfunction valueChanged(x, y) {\r\n    return x.length !== y.length || x.some(function (v) {\r\n        return y.indexOf(v) < 0;\r\n    });\r\n}\r\n\r\nfunction fuzzyMatch(haystack, needle) {\r\n    haystack = String(haystack || '');\r\n    var vector = [];\r\n    var str = haystack.toLowerCase();\r\n    var j = 0;\r\n    var lastpos = -1;\r\n    for (var i = 0; i < needle.length; i++) {\r\n        var l = needle.charAt(i).toLowerCase();\r\n        if (l == ' ') {\r\n            continue;\r\n        }\r\n        j = str.indexOf(l, j);\r\n        if (j == -1) {\r\n            return {\r\n                firstIndex: Infinity,\r\n                consecutiveMatches: -1,\r\n                formattedText: haystack\r\n            };\r\n        }\r\n        vector[vector.length] = j - lastpos - 1;\r\n        lastpos = j++;\r\n    }\r\n    var firstIndex = vector[0];\r\n    var consecutiveMatches = /^(0+)/.test(vector.slice(0).sort().join('')) && RegExp.$1.length;\r\n    var formattedText = '';\r\n    j = 0;\r\n    for (i = 0; i < vector.length; i++) {\r\n        formattedText += haystack.substr(j, vector[i]) + '**' + haystack[j + vector[i]] + '**';\r\n        j += vector[i] + 1;\r\n    }\r\n    formattedText += haystack.slice(j);\r\n    return {\r\n        firstIndex: firstIndex,\r\n        consecutiveMatches: consecutiveMatches,\r\n        formattedText: formattedText.replace(/\\*\\*(\\ *)\\*\\*/g, '$1')\r\n    };\r\n}\r\n\r\nfunction getSuggestions(preset, value, exclude) {\r\n    var suggestions = preset.options.suggestions || preset.options.allowedValues || [];\r\n    if (isFunction(suggestions)) {\r\n        suggestions = suggestions(value);\r\n    }\r\n    return resolve(suggestions).then(function (suggestions) {\r\n        suggestions = suggestions.map(toValueObject);\r\n        suggestions.forEach(function (v) {\r\n            preset.knownValues[v.value] = v.label;\r\n        });\r\n        if (exclude) {\r\n            suggestions = suggestions.filter(function (v) {\r\n                return exclude.indexOf(v.value) < 0;\r\n            });\r\n        }\r\n        return suggestions;\r\n    });\r\n}\r\n\r\nfunction processSuggestions(suggestions, needle, count) {\r\n    suggestions = suggestions.filter(function (v) {\r\n        extend(v, fuzzyMatch(v.label, needle));\r\n        [v.value].concat(v.matches || []).forEach(function (w) {\r\n            var m = fuzzyMatch(w, needle);\r\n            v.firstIndex = Math.min(v.firstIndex, m.firstIndex);\r\n            v.consecutiveMatches = Math.max(v.consecutiveMatches, m.consecutiveMatches || 0);\r\n        });\r\n        return v.firstIndex !== Infinity;\r\n    });\r\n    suggestions.sort(function (a, b) {\r\n        return ((b.consecutiveMatches - a.consecutiveMatches) + (a.firstIndex - b.firstIndex)) || sortValues(a, b);\r\n    });\r\n    return suggestions.slice(0, count);\r\n}\r\n\r\nfunction showSuggestions(preset) {\r\n    var editor = preset.typer;\r\n    var value = editor.extractText();\r\n    var promise = getSuggestions(preset, value, editor.getValue());\r\n    promise.then(function (suggestions) {\r\n        if (editor.focused()) {\r\n            suggestions = processSuggestions(suggestions, value, preset.options.suggestionCount);\r\n            if (value && preset.options.allowFreeInput && !suggestions.some(function (v) {\r\n                return v.label === value;\r\n            })) {\r\n                suggestions.push({\r\n                    value: value,\r\n                    label: value,\r\n                    formattedText: '*' + value + '*'\r\n                });\r\n            }\r\n            if (!callout) {\r\n                initCallout();\r\n            }\r\n            callout.update({\r\n                preset: preset,\r\n                suggestions: suggestions.map(function (v) {\r\n                    return {\r\n                        value: v.value,\r\n                        label: v.formattedText,\r\n                        icon: v.icon || ''\r\n                    };\r\n                })\r\n            });\r\n            dom.retainFocus(editor.element, callout.element);\r\n            callout.showMenu(editor.element, 'left bottom', null, 10);\r\n            editor.focus();\r\n        }\r\n    });\r\n}\r\n\r\nfunction showSuggestionDialog(preset, control) {\r\n    var knownValues = getSuggestions(preset);\r\n    loadLabels(globalContext.language).catch(function () {\r\n        return loadLabels();\r\n    }).then(function () {\r\n        ui.dialog({\r\n            title: control.label,\r\n            description: control.placeholder,\r\n            controls: [\r\n                ui.textbox('newValue', {\r\n                    enter: function (e, self) {\r\n                        self.all.list.append(ui.checkbox({\r\n                            showIcon: true,\r\n                            label: self.value,\r\n                            entry: self.value,\r\n                            value: true,\r\n                            description: 'new value',\r\n                            before: '*'\r\n                        }));\r\n                        return self.execute();\r\n                    },\r\n                    visible: function () {\r\n                        return preset.options.allowFreeInput;\r\n                    }\r\n                }),\r\n                ui.buttonlist('list'),\r\n                ui.buttonset(\r\n                    ui.submit('done', 'done'),\r\n                    ui.button('cancel', 'close', function (self) {\r\n                        self.all.dialog.destroy();\r\n                    })\r\n                )\r\n            ],\r\n            childExecuted: function (e, self) {\r\n                self.value = self.all.list.controls.filter(function (v) {\r\n                    return v.value;\r\n                }).map(function (v) {\r\n                    // @ts-ignore: custom control property\r\n                    return v.entry;\r\n                });\r\n            },\r\n            init: function (e, self) {\r\n                var currentValues = preset.typer.getValue();\r\n                self.all.dialog.value = currentValues.slice(0);\r\n                activeDialog = true;\r\n\r\n                knownValues.then(function (knownValues) {\r\n                    var allValues = knownValues.map(toValue);\r\n                    knownValues = knownValues.concat(currentValues.filter(function (v) {\r\n                        return allValues.indexOf(v) < 0;\r\n                    }).map(toValueObject));\r\n                    knownValues.sort(sortValues);\r\n                    self.all.list.append(knownValues.map(function (v) {\r\n                        var checked = currentValues.indexOf(v.value) >= 0;\r\n                        return ui.checkbox({\r\n                            showIcon: true,\r\n                            label: v.label,\r\n                            icon: v.icon,\r\n                            entry: v.value,\r\n                            value: checked,\r\n                            before: checked ? '*' : ''\r\n                        });\r\n                    }));\r\n                });\r\n            },\r\n            destroy: function (e, self) {\r\n                activeDialog = false;\r\n            }\r\n        }).render().dialog.then(function (values) {\r\n            preset.typer.setValue(values);\r\n        });\r\n    });\r\n}\r\n\r\nfunction insertItem(preset, value) {\r\n    if (!value || preset.typer.getValue().indexOf(value.value || value) >= 0) {\r\n        return;\r\n    }\r\n    if (typeof value !== 'object') {\r\n        value = {\r\n            value: value,\r\n            label: preset.knownValues[value] || value\r\n        };\r\n    }\r\n    var span = $('<span class=\"zui-keyword-item\" data-value=\"' + encode(value.value, true) + '\">' + encode(value.label) + '<i>delete</i></span>')[0];\r\n    var lastChild = preset.typer.rootNode.lastChild;\r\n    preset.typer.invoke(function (tx) {\r\n        tx.selection.selectAll();\r\n        if (lastChild) {\r\n            tx.selection.baseCaret.moveTo(lastChild.element, false);\r\n        }\r\n        tx.insertHtml(span);\r\n    });\r\n    if (!preset.options.allowFreeInput) {\r\n        getSuggestions(preset, value.value).then(function () {\r\n            if (!preset.knownValues[value.value]) {\r\n                $(span).addClass('invalid');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Control types\r\n * -------------------------------------- */\r\n\r\nconst KeywordInput = define('keyword', {\r\n    template: '<z:textbox/>',\r\n    preventLeave: true,\r\n    options: {},\r\n    value: [],\r\n    init: function (e, self) {\r\n        self.watch('required', function (required) {\r\n            self.options.required = required;\r\n        }, true);\r\n    },\r\n    focusin: function (e, self) {\r\n        activeInput = self;\r\n    },\r\n    setValue: function (e, self) {\r\n        var newValue = e.newValue || [];\r\n        if (valueChanged(e.oldValue, newValue)) {\r\n            self.setValue(newValue);\r\n            self.editor.setValue(newValue);\r\n        }\r\n        e.handled();\r\n    },\r\n    preset: {\r\n        options: {\r\n            required: false,\r\n            allowFreeInput: true,\r\n            allowedValues: null,\r\n            suggestionCount: 5,\r\n            suggestions: false\r\n        },\r\n        overrides: {\r\n            getValue: function (preset) {\r\n                return $('span', this.element).map(function (i, v) {\r\n                    return String($(v).data('value'));\r\n                }).get();\r\n            },\r\n            setValue: function (preset, values) {\r\n                values = (isArray(values) || String(values).split(/\\s+/)).filter(function (v) {\r\n                    return v;\r\n                });\r\n                if (valueChanged(values, this.getValue())) {\r\n                    this.invoke(function (tx) {\r\n                        tx.selection.selectAll();\r\n                        tx.insertText('');\r\n                        values.forEach(function (v) {\r\n                            insertItem(preset, v);\r\n                        });\r\n                    });\r\n                }\r\n            },\r\n            validate: function (preset) {\r\n                if (preset.options.required && !this.getValue().length) {\r\n                    return reject('required');\r\n                }\r\n                if ($('.invalid', this.element)[0]) {\r\n                    return reject('invalid-value');\r\n                }\r\n            }\r\n        },\r\n        widgets: {\r\n            tag: {\r\n                element: 'span',\r\n                inline: true,\r\n                editable: 'none',\r\n                click: function (e) {\r\n                    if (e.target !== e.widget.element) {\r\n                        $(e.widget.element).detach();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setup: function (e) {\r\n            e.typer.select(e.typer.element, -0);\r\n            e.widget.knownValues = {};\r\n        },\r\n        focusin: function (e) {\r\n            if (!SHOW_DIALOG) {\r\n                showSuggestions(e.widget);\r\n            } else {\r\n                showSuggestionDialog(e.widget, activeInput);\r\n            }\r\n        },\r\n        focusout: function (e) {\r\n            insertItem(e.widget, e.typer.extractText());\r\n            if (!SHOW_DIALOG) {\r\n                callout.hideMenu();\r\n            }\r\n        },\r\n        click: function (e) {\r\n            if (SHOW_DIALOG && !activeDialog) {\r\n                showSuggestionDialog(e.widget, activeInput);\r\n            }\r\n        },\r\n        upArrow: function (e) {\r\n            dom.focus(callout.element);\r\n            e.handled();\r\n        },\r\n        downArrow: function (e) {\r\n            dom.focus(callout.element);\r\n            e.handled();\r\n        },\r\n        textInput: function (e) {\r\n            var lastChild = e.typer.rootNode.lastChild;\r\n            if (lastChild && e.typer.getSelection().comparePosition(lastChild.element) < 0) {\r\n                e.typer.select(e.typer.element, -0);\r\n            }\r\n        },\r\n        enter: function (e) {\r\n            var suggestions = callout.suggestions;\r\n            insertItem(e.widget, suggestions.length === 1 || (suggestions[0] && suggestions[0].label === '**' + e.widget.knownValues[suggestions[0].value] + '**') ? suggestions[0].value : e.typer.extractText());\r\n            e.handled();\r\n        },\r\n        escape: function (e) {\r\n            if (containsOrEquals(document, callout.element)) {\r\n                callout.hideMenu();\r\n                e.handled();\r\n            }\r\n        },\r\n        contentChange: function (e) {\r\n            if (!SHOW_DIALOG && e.source !== 'script') {\r\n                showSuggestions(e.widget);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nexport default KeywordInput;\r\n","import { define } from \"./core/define.js\";\r\nimport _ from \"./ButtonLike.js\";\r\n\r\nconst LinkButton = define('link', {\r\n    template: '<z:buttonlike><a href=\"{{value}}\" target=\"{{target}}\"><z:label show-icon=\"auto\"></z:label></a></z:buttonlike>',\r\n    parseOptions: function (options, iter) {\r\n        options.icon = iter.string();\r\n        options.value = iter.string();\r\n        options.target = iter.string();\r\n    }\r\n});\r\n\r\nexport default LinkButton;\r\n","import { define } from \"./core/define.js\";\r\nimport TextBox from \"./TextBox.js\";\r\n\r\nfunction setValue(widget, value, isKeyboardEvent) {\r\n    if (value === null || value === '' || isNaN(value)) {\r\n        value = value ? '0' : '';\r\n        widget.value = null;\r\n    } else {\r\n        var min = parseInt(widget.options.min);\r\n        var max = parseInt(widget.options.max);\r\n        var loop = widget.options.loop && min === min && max === max;\r\n        if ((loop && value < min) || (!loop && max === max && value > max)) {\r\n            value = max;\r\n        } else if ((loop && value > max) || (!loop && min === min && value < min)) {\r\n            value = min;\r\n        }\r\n        widget.value = +value | 0;\r\n        value = String(+value | 0);\r\n    }\r\n    var numOfDigits = String(+widget.options.max || 0).length;\r\n    var currentText = widget.typer.extractText();\r\n    if (widget.options.digits === 'fixed') {\r\n        value = (new Array(numOfDigits + 1).join('0') + value).substr(-numOfDigits);\r\n    }\r\n    if (value !== currentText && (!isKeyboardEvent || currentText.length >= numOfDigits)) {\r\n        widget.typer.invoke(function (tx) {\r\n            tx.selection.selectAll();\r\n            tx.insertText(value);\r\n        });\r\n    }\r\n}\r\n\r\nfunction stepValue(tx) {\r\n    setValue(tx.widget, (tx.widget.value || 0) + (tx.commandName === 'stepUp' ? 1 : -1) * tx.widget.options.step);\r\n}\r\n\r\nconst NumberInput = define('number', {\r\n    template: '<z:textbox/>',\r\n    preventLeave: true,\r\n    value: null,\r\n    preset: {\r\n        validation: {\r\n            allowChars: '0-9'\r\n        },\r\n        options: {\r\n            max: null,\r\n            min: null,\r\n            digits: 'auto',\r\n            step: 1,\r\n            loop: false\r\n        },\r\n        overrides: {\r\n            getValue: function (preset) {\r\n                return preset.value;\r\n            },\r\n            setValue: function (preset, value) {\r\n                setValue(preset, value);\r\n            }\r\n        },\r\n        commands: {\r\n            stepUp: stepValue,\r\n            stepDown: stepValue\r\n        },\r\n        focusout: function (e) {\r\n            setValue(e.widget, e.widget.value);\r\n        },\r\n        contentChange: function (e) {\r\n            setValue(e.widget, parseInt(e.typer.extractText()), e.source === 'keyboard');\r\n        }\r\n    }\r\n});\r\n\r\nexport default NumberInput;\r\n","import $ from \"./include/external/jquery.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { reject } from \"./include/zeta-dom/util.js\";\r\nimport { parseExecute } from \"./util/defineUtil.js\";\r\nimport _ from \"./renderer/default/contenteditable.js\";\r\n\r\nconst RichTextInput = define('richtext', {\r\n    template: '<div><div class=\"zui-richtext-toolbar\"></div><label class=\"zui-textbox\"><z:contenteditable></z:contenteditable><div class=\"zui-textbox-placeholder\"><p>{{label}}</p></div></label></div>',\r\n    hideCalloutOnExecute: false,\r\n    preventLeave: true,\r\n    value: '',\r\n    parseOptions: parseExecute,\r\n    init: function (e, self) {\r\n        self.editorOptions = self.options || {};\r\n        self.editorOptions.toolbar = {\r\n            container: $('.zui-richtext-toolbar', e.target)[0]\r\n        };\r\n    },\r\n    validate: function (e, self) {\r\n        if (self.required && !self.editor.extractText()) {\r\n            return reject('required');\r\n        }\r\n    }\r\n});\r\n\r\nexport default RichTextInput;\r\n","import zeta from \"./include/zeta-dom/index.js\";\r\nimport UI from \"./index.js\";\r\nimport { } from \"./promptFactory.js\";\r\n\r\nimport { } from \"./Button.js\";\r\nimport { } from \"./ButtonList.js\";\r\nimport { } from \"./ButtonSet.js\";\r\nimport { } from \"./Callout.js\";\r\nimport { } from \"./Checkbox.js\";\r\nimport { } from \"./DatePicker.js\";\r\nimport { } from \"./Dropdown.js\";\r\nimport { } from \"./Fieldset.js\";\r\nimport { } from \"./FileInput.js\";\r\nimport { } from \"./Form.js\";\r\nimport { } from \"./Generic.js\";\r\nimport { } from \"./KeywordInput.js\";\r\nimport { } from \"./Label.js\";\r\nimport { } from \"./LinkButton.js\";\r\nimport { } from \"./Menu.js\";\r\nimport { } from \"./NumberInput.js\";\r\nimport { } from \"./RichTextInput.js\";\r\nimport { } from \"./SubmitButton.js\";\r\nimport { } from \"./TextBox.js\";\r\n\r\n// @ts-ignore: extend namespace for UMD export\r\nzeta.UI = UI;\r\n\r\nexport default UI;\r\n","var defaultLocale = 'en';\r\nif (typeof process !== 'undefined' && process.env.ZETA_UI_LOCALE) {\r\n    defaultLocale = process.env.ZETA_UI_LOCALE;\r\n}\r\n\r\n/** @type {ZetaUI.UIGlobalContext} */\r\nconst globalContext = {\r\n    language: defaultLocale\r\n};\r\nexport default globalContext;\r\n","// @ts-nocheck\r\n\r\n/** @type {JQueryStatic} */\r\nconst jQuery = window.jQuery || require('jquery');\r\nmodule.exports = jQuery;\r\n","// @ts-nocheck\r\n\r\n/** @type {PromiseConstructor} */\r\nconst Promise = window.Promise || require('promise-polyfill').default;\r\nmodule.exports = Promise;\r\n","// @ts-nocheck\r\n\r\n/** @type {Waterpipe} */\r\nconst waterpipe = window.waterpipe || require('waterpipe');\r\nmodule.exports = waterpipe;\r\n\r\n// assign to a new variable to avoid incompatble declaration issue by typescript compiler\r\nconst waterpipe_ = waterpipe;\r\nwaterpipe_.pipes['{'] = function (_, varargs) {\r\n    var o = {};\r\n    while (varargs.hasArgs()) {\r\n        var key = varargs.raw();\r\n        if (key === '}') {\r\n            break;\r\n        }\r\n        o[String(key).replace(/:$/, '')] = varargs.next();\r\n    }\r\n    return o;\r\n};\r\n// @ts-ignore: add member to function\r\nwaterpipe_.pipes['{'].varargs = true;\r\n","// @ts-nocheck\n\nmodule.exports = {\n    get Editor() {\n        try {\n            return (window.zeta && zeta.Editor) || require('zeta-editor');\n        } catch (e) { }\n    }\n};\n","import zeta from \"zeta-dom\";const { parseCSS, isCssUrlValue, runCSSTransition } = zeta.css; export { parseCSS, isCssUrlValue, runCSSTransition };","import zeta from \"zeta-dom\";const _defaultExport = zeta.dom; export default _defaultExport;const { textInputAllowed, beginDrag, beginPinchZoom, getShortcut, setShortcut, focusable, focused, setModal, retainFocus, releaseFocus, focus } = zeta.dom; export { textInputAllowed, beginDrag, beginPinchZoom, getShortcut, setShortcut, focusable, focused, setModal, retainFocus, releaseFocus, focus };","import zeta from \"zeta-dom\";const { lock, locked, cancelLock } = zeta.dom; export { lock, locked, cancelLock };","import zeta from \"zeta-dom\";const { domReady, tagName, isVisible, matchSelector, comparePosition, connected, containsOrEquals, acceptNode, combineNodeFilters, iterateNode, iterateNodeToArray, getCommonAncestor, parentsAndSelf, selectIncludeSelf, selectClosestRelative, createNodeIterator, createTreeWalker, bind, bindUntil, dispatchDOMMouseEvent, removeNode, getClass, setClass, getScrollOffset, getScrollParent, getContentRect, scrollBy, scrollIntoView, makeSelection, getRect, getRects, toPlainRect, rectEquals, rectCovers, rectIntersects, pointInRect, mergeRect, elementFromPoint } = zeta.util; export { domReady, tagName, isVisible, matchSelector, comparePosition, connected, containsOrEquals, acceptNode, combineNodeFilters, iterateNode, iterateNodeToArray, getCommonAncestor, parentsAndSelf, selectIncludeSelf, selectClosestRelative, createNodeIterator, createTreeWalker, bind, bindUntil, dispatchDOMMouseEvent, removeNode, getClass, setClass, getScrollOffset, getScrollParent, getContentRect, scrollBy, scrollIntoView, makeSelection, getRect, getRects, toPlainRect, rectEquals, rectCovers, rectIntersects, pointInRect, mergeRect, elementFromPoint };","import zeta from \"zeta-dom\";const { IS_IOS, IS_IE10, IS_IE, IS_MAC, IS_TOUCH } = zeta; export { IS_IOS, IS_IE10, IS_IE, IS_MAC, IS_TOUCH };","import zeta from \"zeta-dom\";const { noop, either, is, isUndefinedOrNull, isArray, isFunction, isThenable, isPlainObject, isArrayLike, makeArray, extend, each, map, grep, splice, any, single, kv, pick, exclude, mapGet, mapRemove, setAdd, equal, combineFn, createPrivateStore, setTimeoutOnce, setImmediate, setImmediateOnce, throwNotFunction, keys, values, hasOwnProperty, getOwnPropertyDescriptors, define, definePrototype, defineOwnProperty, defineGetterProperty, defineHiddenProperty, defineAliasProperty, defineObservableProperty, watch, watchOnce, watchable, inherit, deepFreeze, iequal, randomId, repeat, camel, hyphenate, ucfirst, lcfirst, trim, matchWord, htmlDecode, resolve, reject, always, resolveAll, catchAsync, setPromiseTimeout } = zeta.util; export { noop, either, is, isUndefinedOrNull, isArray, isFunction, isThenable, isPlainObject, isArrayLike, makeArray, extend, each, map, grep, splice, any, single, kv, pick, exclude, mapGet, mapRemove, setAdd, equal, combineFn, createPrivateStore, setTimeoutOnce, setImmediate, setImmediateOnce, throwNotFunction, keys, values, hasOwnProperty, getOwnPropertyDescriptors, define, definePrototype, defineOwnProperty, defineGetterProperty, defineHiddenProperty, defineAliasProperty, defineObservableProperty, watch, watchOnce, watchable, inherit, deepFreeze, iequal, randomId, repeat, camel, hyphenate, ucfirst, lcfirst, trim, matchWord, htmlDecode, resolve, reject, always, resolveAll, catchAsync, setPromiseTimeout };","import defaultRenderer from \"./renderer/default/index.js\";\r\nimport globalContext from \"./globalContext.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport { extend } from \"./include/zeta-dom/util.js\";\r\n\r\nextend(UIToolset, {\r\n    defaultRenderer,\r\n    globalContext\r\n});\r\nexport default UIToolset;\r\n","// @ts-nocheck\r\nimport UIToolset from \"../index.js\";\r\nimport zeta_ui_datepicker from \"./en/zeta.ui.datepicker.json\";\r\nimport zeta_ui_keyword from \"./en/zeta.ui.keyword.json\";\r\n\r\nUIToolset.i18n('zeta.ui.datepicker', 'en', zeta_ui_datepicker);\r\nUIToolset.i18n('zeta.ui.keyword', 'en', zeta_ui_keyword);\r\n","import waterpipe from \"../include/external/waterpipe.js\";\r\nimport { lcfirst, ucfirst } from \"../include/zeta-dom/util.js\";\r\nimport { IS_MAC } from \"../include/zeta-dom/env.js\";\r\n\r\nconst MAC_CTRLKEY = {\r\n    ctrl: '\\u2318',\r\n    alt: '\\u2325',\r\n    shift: '\\u21e7',\r\n    enter: '\\u21a9',\r\n    tab: '\\u2135',\r\n    pageUp: '\\u21de',\r\n    pageDown: '\\u21df',\r\n    backspace: '\\u232b',\r\n    escape: '\\u238b',\r\n    leftArrow: '\\u2b60',\r\n    upArrow: '\\u2b61',\r\n    rightArrow: '\\u2b62',\r\n    downArrow: '\\u2b63',\r\n    home: '\\u2b66',\r\n    end: '\\u2b68'\r\n};\r\n\r\nfunction formatShortcutWin(value) {\r\n    return waterpipe.string(value).replace(/ctrl|alt|shift/gi, function (v) {\r\n        return ucfirst(v) + '+';\r\n    });\r\n}\r\nfunction formatShortcutMac(value) {\r\n    var flag = {};\r\n    var str = waterpipe.string(value).replace(/ctrl|alt|shift/gi, function (v) {\r\n        v = lcfirst(v);\r\n        flag[v] = MAC_CTRLKEY[v];\r\n        return '';\r\n    });\r\n    return (flag.alt || '') + (flag.shift || '') + (flag.ctrl || '') + (MAC_CTRLKEY[lcfirst(str)] || str);\r\n}\r\n\r\nconst formatShortcut = IS_MAC ? formatShortcutMac : formatShortcutWin;\r\nexport default formatShortcut;\r\n","import $ from \"../../include/external/jquery.js\";\r\nimport { runCSSTransition } from \"../../include/zeta-dom/cssUtil.js\";\r\nimport { always } from \"../../include/zeta-dom/util.js\";\r\nimport { bind, getRect } from \"../../include/zeta-dom/domUtil.js\";\r\nimport { IS_TOUCH } from \"../../include/zeta-dom/env.js\";\r\nimport dom from \"../../include/zeta-dom/dom.js\";\r\n\r\nfunction createRipple(elm, x, y, until) {\r\n    var rect = getRect(elm);\r\n    var p1 = Math.pow(y - rect.top, 2) + Math.pow(x - rect.left, 2);\r\n    var p2 = Math.pow(y - rect.top, 2) + Math.pow(x - rect.right, 2);\r\n    var p3 = Math.pow(y - rect.bottom, 2) + Math.pow(x - rect.left, 2);\r\n    var p4 = Math.pow(y - rect.bottom, 2) + Math.pow(x - rect.right, 2);\r\n    var scalePercent = 0.5 + 2 * Math.sqrt(Math.max(p1, p2, p3, p4)) / parseFloat($.css(elm, 'font-size'));\r\n\r\n    var $overlay = $('<div class=\"zui-clickeffect\"><i></i></div>').appendTo(elm);\r\n    var $anim = $overlay.children().css({\r\n        top: y - rect.top,\r\n        left: x - rect.left,\r\n    });\r\n    setTimeout(function () {\r\n        $anim.css('transform', $anim.css('transform') + ' scale(' + scalePercent + ')').addClass('animate-in');\r\n    });\r\n    $overlay.css('border-radius', $.css(elm, 'border-radius'));\r\n    always(until, function () {\r\n        runCSSTransition($overlay.children()[0], 'animate-out', function () {\r\n            $overlay.remove();\r\n        });\r\n    });\r\n}\r\n\r\nbind(window, IS_TOUCH ? 'touchstart' : 'mousedown', function (e) {\r\n    // @ts-ignore: type inference issue\r\n    var elm = $(e.target).closest('.zui-root .zui-button, .zui-root .zui-buttonlike')[0];\r\n    if (elm) {\r\n        // @ts-ignore: e can be TouchEvent\r\n        var p = (e.touches || [e])[0];\r\n        createRipple(elm, p.clientX, p.clientY, dom.beginDrag());\r\n    }\r\n});\r\n\r\nexport default null;\r\n","import waterpipe from \"../../include/external/waterpipe.js\";\r\nimport $ from \"../../include/external/jquery.js\";\r\nimport { createNodeIterator, createTreeWalker, iterateNode, iterateNodeToArray, removeNode, setClass, tagName } from \"../../include/zeta-dom/domUtil.js\";\r\nimport { any, camel, definePrototype, each, extend, hasOwnProperty, hyphenate, inherit, is, keys, mapGet, matchWord, single } from \"../../include/zeta-dom/util.js\";\r\nimport { eachAttr, parseTemplateConstant } from \"../../util/common.js\";\r\nimport { clearFlag } from \"../../core/flags.js\";\r\nimport UIToolset from \"../../core/UIToolset.js\";\r\nimport formatShortcut from \"../../util/formatShortcut.js\";\r\nimport _effects from \"./effects.js\";\r\n\r\nconst BOOL_ATTRS = 'checked selected disabled readonly multiple ismap';\r\nconst RE_PIPE = /\\{\\{((?:[^\\}]|\\}(?!\\}))+)\\}\\}/;\r\n\r\n/** @type {WeakMap<any, DOMState>} */\r\nconst states = new WeakMap();\r\nconst parsedTemplates = new WeakMap();\r\nconst defaultTemplates = {};\r\nconst overrideTemplates = {};\r\n\r\nwaterpipe.pipes[':zui-shortcut'] = formatShortcut;\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction DOMState() {\r\n    this.position = null;\r\n    this.current = null;\r\n    this.layouts = {};\r\n}\r\n\r\nfunction _(control) {\r\n    return mapGet(states, control, DOMState);\r\n}\r\n\r\nfunction createDocumentFragment(content) {\r\n    // @ts-ignore: type inference issue\r\n    return is(content, DocumentFragment) || $(document.createDocumentFragment()).append(content)[0];\r\n}\r\n\r\nfunction parseTemplate(template, templates, cacheKeyObj, parentTemplateName) {\r\n    var cached = mapGet(parsedTemplates, cacheKeyObj || templates, Object)[template];\r\n    if (cached) {\r\n        return cached;\r\n    }\r\n\r\n    var index = 0;\r\n    var binds = { 0: [] };\r\n    var roles = {};\r\n\r\n    function addBind(index, expression, name, type) {\r\n        var arr = binds[index] || (binds[index] = []);\r\n        arr[arr.length] = {\r\n            type: type || 'text',\r\n            name: name || '',\r\n            expression: expression\r\n        };\r\n    }\r\n\r\n    function extractPartialBinds(attr) {\r\n        var partialBind;\r\n        attr.value = attr.value.replace(/([\\w-]+)\\:(\\{\\{(?:[^\\}]|\\}(?!\\}))+\\}\\})/g, function (v, a, b) {\r\n            partialBind = true;\r\n            return addBind(index, b, a, attr.nodeName), '';\r\n        });\r\n        return partialBind;\r\n    }\r\n\r\n    function hasOverrideTemplate(templates, roles) {\r\n        return single(roles, function (v, i) {\r\n            return hasOwnProperty(templates, i) && i;\r\n        });\r\n    }\r\n\r\n    function includeTemplate(name, node) {\r\n        // prevent infinite recursion when mentioning the original template in overriden definition\r\n        var haystack = parentTemplateName === name ? Object.getPrototypeOf(templates) : templates;\r\n        var includeTemplate = (haystack[name] || '<div><children controls/></div>');\r\n\r\n        // replace children placeholder with the actual child contents\r\n        var tmp = $.parseHTML(includeTemplate)[0];\r\n        $('children', tmp).each(function (i, v) {\r\n            // @ts-ignore: type inference issue\r\n            var childNodes = createDocumentFragment(v.attributes.controls && !node.childNodes[0] ? [document.createElement('controls')] : node.cloneNode(true).childNodes);\r\n            var $controls = $('controls', childNodes);\r\n            eachAttr(v, function (i, v) {\r\n                $controls.attr(i, v);\r\n            });\r\n            $(v).replaceWith(childNodes);\r\n        });\r\n        // @ts-ignore: tmp is element\r\n        includeTemplate = tmp.outerHTML;\r\n\r\n        // check whether we can use cached template from parent\r\n        // if such cached template does not refer to altered template by current template definitions\r\n        var cacheKeyObj = templates;\r\n        for (var parent = templates; parent; parent = Object.getPrototypeOf(parent)) {\r\n            var cache = mapGet(parsedTemplates, parent, Object)[includeTemplate];\r\n            if (cache) {\r\n                cacheKeyObj = hasOverrideTemplate(templates, cache.roles) ? templates : parent;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // set layout type of the further included template to the included one only if this is a true control type\r\n        var include = parseTemplate(includeTemplate, templates, cacheKeyObj, UIToolset.prototype[name] ? name : parentTemplateName);\r\n        var dom = include.dom.cloneNode(true);\r\n        var $controls = $('controls', dom);\r\n        var context = {};\r\n        eachAttr(node, function (i, v, attr) {\r\n            if (i === 'class') {\r\n                extractPartialBinds(attr);\r\n                $(dom).addClass(attr.value);\r\n            } else {\r\n                var expr = RE_PIPE.test(v) && RegExp.$1;\r\n                context[camel(i)] = !expr ? parseTemplateConstant(v) : {\r\n                    expression: v,\r\n                    evalAsObject: expr.length === v.length - 4\r\n                };\r\n                if (!expr) {\r\n                    $controls.attr(i, v);\r\n                }\r\n            }\r\n        });\r\n        each(include.binds, function (i, v) {\r\n            var j = (+i) + index;\r\n            binds[j] = v.concat(binds[j] || []);\r\n            binds[j].context = extend({}, v.context, context);\r\n        });\r\n        roles[name] = index;\r\n        each(include.roles, function (i, v) {\r\n            roles[i] = (+v) + index;\r\n        });\r\n        index += include.nodeCount;\r\n        $(dom).addClass('zui-' + name.toLowerCase());\r\n        return dom;\r\n    }\r\n\r\n    function processDOM(element) {\r\n        var nodeToReplace = new Map();\r\n        var iterator = createTreeWalker(element, 5, function (v) {\r\n            // @ts-ignore: tagName return empty for non-element\r\n            if (/z\\:([\\w-]+)/.test(tagName(v))) {\r\n                nodeToReplace.set(v, includeTemplate(camel(RegExp.$1), v));\r\n                return 2;\r\n            }\r\n            return 1;\r\n        });\r\n\r\n        iterateNode(iterator, function (v) {\r\n            if (v.nodeType === 1) {\r\n                eachAttr(v, function (i, w, attr) {\r\n                    if (RE_PIPE.test(w) && (!matchWord(i, 'class style') || !extractPartialBinds(attr))) {\r\n                        addBind(index, w, i, matchWord(i, BOOL_ATTRS) && i in v ? 'prop' : 'attr');\r\n                        attr.value = '';\r\n                    }\r\n                });\r\n                index++;\r\n                // @ts-ignore: v is text node\r\n            } else if (RE_PIPE.test(v.data)) {\r\n                if (v.previousSibling || v.nextSibling) {\r\n                    // @ts-ignore: v is text node\r\n                    addBind(index, v.data);\r\n                    nodeToReplace.set(v, document.createElement('span'));\r\n                    index++;\r\n                } else {\r\n                    // @ts-ignore: v is text node\r\n                    addBind(index - 1, v.data);\r\n                }\r\n                // @ts-ignore: v is text node\r\n                v.data = '';\r\n            }\r\n        });\r\n        nodeToReplace.forEach(function (v, i) {\r\n            $(i).replaceWith(v);\r\n        });\r\n        return element.childNodes[0];\r\n    }\r\n\r\n    var result = {\r\n        dom: processDOM(createDocumentFragment($.parseHTML(template)[0])),\r\n        roles: waterpipe.eval('sortby [ . ]', roles),\r\n        binds: binds,\r\n        nodeCount: index\r\n    };\r\n    cacheKeyObj = cacheKeyObj || templates;\r\n    do {\r\n        mapGet(parsedTemplates, cacheKeyObj, Object)[template] = result;\r\n    } while (cacheKeyObj !== defaultTemplates && !hasOverrideTemplate(cacheKeyObj, roles) && (cacheKeyObj = Object.getPrototypeOf(cacheKeyObj)));\r\n    return result;\r\n}\r\n\r\nfunction evalTemplate(expression, context, globals, evalAsObject) {\r\n    var options = { globals };\r\n    return evalAsObject ? waterpipe.eval(expression.slice(2, -2), context, options) : waterpipe(expression, context, options);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * UIControlDOM\r\n * -------------------------------------- */\r\n\r\nfunction UIControlDOM(control, layoutType) {\r\n    var self = this;\r\n    var template = parseTemplate(control.template || '<z:' + hyphenate(control.type) + '/>', overrideTemplates[layoutType] || defaultTemplates);\r\n    var element = template.dom.cloneNode(true);\r\n    var nodes = iterateNodeToArray(createNodeIterator(element, 1));\r\n    var bindedNode = nodes.filter(function (v, i) {\r\n        return template.binds[i];\r\n    });\r\n    var positions = waterpipe.eval('sortby [ ! condition ]', $('controls', element).map(function (i, v) {\r\n        return new UIControlDOMPosition(control, v);\r\n    }).get());\r\n\r\n    self.control = control;\r\n    self.element = element;\r\n    self.roles = template.roles;\r\n    self.binds = template.binds;\r\n    self.bindedNode = bindedNode;\r\n    self.positions = positions;\r\n    self.layoutType = layoutType;\r\n    if (control.cssClass) {\r\n        $(element).addClass(control.cssClass);\r\n    }\r\n    _(control).current = self;\r\n\r\n    // bind all defined event handlers to the cloned element\r\n    // assign element to control so that handlers can be registered to correct element\r\n    control.element = element;\r\n    control.on('stateChange', function () {\r\n        // @ts-ignore: type inference issue\r\n        self.update();\r\n    });\r\n}\r\n\r\ndefinePrototype(UIControlDOM, {\r\n    update: function () {\r\n        var self = this;\r\n        var element = self.element;\r\n        var control = self.control;\r\n        if (control.parent) {\r\n            appendControl(control, control.parent);\r\n        }\r\n        var position = _(control).position;\r\n        if (!position) {\r\n            return;\r\n        }\r\n\r\n        var reBold = /\\*\\*(([^*]|\\*(?!\\*))+)\\*\\*/g;\r\n        var reItalic = /\\*([^*]+)\\*/g;\r\n        var context = control.getTemplateContext();\r\n        var index = 0;\r\n        each(self.binds, function (i, v) {\r\n            var node = self.bindedNode[index++];\r\n            var globals = extend({}, position.context);\r\n            each(v.context, function (i, v) {\r\n                globals[i] = !v.expression ? v : evalTemplate(v.expression, context, null, v.evalAsObject);\r\n            });\r\n            each(v, function (i, v) {\r\n                var value = evalTemplate(v.expression, context, globals, v.type === 'class' || v.type === 'prop');\r\n                switch (v.type) {\r\n                    case 'class':\r\n                        return setClass(node, v.name, value);\r\n                    case 'style':\r\n                        return $(node).css(v.name, value);\r\n                    case 'prop':\r\n                        node[v.name] = !!value;\r\n                        return;\r\n                    case 'attr':\r\n                        value = value.replace(reBold, '$1').replace(reItalic, '$1');\r\n                        return $(node).attr(v.name, value || null);\r\n                }\r\n                value = value.replace(reBold, '<b>$1</b>').replace(reItalic, '<i>$1</i>').replace(/\\n/g, '<br>');\r\n                if (value !== node.innerHTML) {\r\n                    node.innerHTML = value;\r\n                }\r\n            });\r\n        });\r\n        setClass(element, {\r\n            active: context.active,\r\n            loading: context.pending,\r\n            error: context.errors,\r\n            disabled: !context.enabled,\r\n            hidden: !context.visible,\r\n            focused: context.focused && context.focusedBy\r\n        });\r\n        if ('disabled' in element) {\r\n            // @ts-ignore: disabled checked for existence\r\n            element.disabled = !context.enabled;\r\n        }\r\n        if (control.controls[1]) {\r\n            var map = new Map();\r\n            each(control.controls, function (i, v) {\r\n                map.set(v.element, i);\r\n            });\r\n            // perform bubble sort for controls in each position\r\n            each(self.positions, function (k, v) {\r\n                for (var j = v.count - 1; j > 0; j--) {\r\n                    // @ts-ignore: type inferene issue\r\n                    for (var i = 0, cur = v.start; i < j; i++, cur = cur.nextSibling) {\r\n                        if (map.get(cur) > map.get(cur.nextSibling)) {\r\n                            // @ts-ignore: type inferene issue\r\n                            $(cur.nextSibling).insertBefore(cur);\r\n                            // @ts-ignore: type inferene issue\r\n                            cur = cur.previousSibling;\r\n                            if (i === 0) {\r\n                                v.start = cur;\r\n                            } else if (i === v.count - 1) {\r\n                                // @ts-ignore: type inferene issue\r\n                                v.end = cur.nextSibling;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        each(control.controls, function (i, v) {\r\n            appendControl(v, control);\r\n        });\r\n    }\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * UIControlDOMPosition\r\n * -------------------------------------- */\r\n\r\nfunction UIControlDOMPosition(control, placeholder) {\r\n    placeholder = placeholder || document.createElement('controls');\r\n    placeholder.style.display = 'none!important';\r\n\r\n    var context = {};\r\n    eachAttr(placeholder, function (i, v) {\r\n        context[camel(i)] = parseTemplateConstant(v);\r\n    });\r\n    var self = this;\r\n    self.control = control;\r\n    self.context = context;\r\n    self.placeholder = placeholder;\r\n    self.condition = context.of || '';\r\n    self.layoutType = context.layout || control.type || 'default';\r\n    self.start = placeholder;\r\n    self.end = placeholder;\r\n    self.count = 0;\r\n}\r\n\r\ndefinePrototype(UIControlDOMPosition, {\r\n    get enabled() {\r\n        return this.control.enableChildren !== false;\r\n    }\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * Exports\r\n * -------------------------------------- */\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {ZetaUI.UIControl | Internal.UIEventContainer} parent\r\n * @param {boolean=} suppressEvent\r\n */\r\nfunction appendControl(control, parent, suppressEvent) {\r\n    var state = _(control);\r\n    var parentState = _(parent);\r\n    if (!parentState.current) {\r\n        parentState.current = { positions: [] };\r\n    }\r\n\r\n    // compute and update if this control should be positioned in different location\r\n    var positions = parentState.current.positions;\r\n    var prevPos = state.position;\r\n    var nextPos;\r\n    if (!positions[0]) {\r\n        nextPos = new UIControlDOMPosition(parent);\r\n        // @ts-ignore: fallback for parent with no type\r\n        nextPos.layoutType = parent.type || '';\r\n        $(nextPos.placeholder).appendTo(parent.element);\r\n        positions[0] = nextPos;\r\n    } else {\r\n        var context = control.getTemplateContext();\r\n        nextPos = any(positions, function (v) {\r\n            return !v.condition || waterpipe.eval(v.condition, context);\r\n        });\r\n        // clear flags because the state may be invalid when building control tree\r\n        clearFlag(control);\r\n    }\r\n    if (prevPos === nextPos) {\r\n        return;\r\n    }\r\n\r\n    var prev = state.current;\r\n    var next = prev;\r\n    if (prev) {\r\n        removeControl(control);\r\n    }\r\n    state.position = nextPos;\r\n    if (nextPos) {\r\n        var layoutType = nextPos.layoutType;\r\n        if (!prev || layoutType !== prev.layoutType) {\r\n            next = state.layouts[layoutType] || (state.layouts[layoutType] = new UIControlDOM(control, layoutType));\r\n            state.current = next;\r\n            // @ts-ignore: internal update read-only property\r\n            control.element = next.element;\r\n        }\r\n        var element = control.element;\r\n        if (!nextPos.count) {\r\n            $(nextPos.start).replaceWith(element);\r\n            nextPos.start = nextPos.end = element;\r\n        } else {\r\n            $(element).insertAfter(nextPos.end);\r\n            nextPos.end = element;\r\n        }\r\n        nextPos.count++;\r\n        if (parent && !suppressEvent && next !== prev) {\r\n            next.update();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction removeControl(control) {\r\n    var elm = control.element;\r\n    var pos = mapGet(states, control, DOMState).position;\r\n    if (pos.count === 1) {\r\n        pos.start = pos.end = $(pos.placeholder).insertBefore(elm)[0];\r\n    } else if (pos.start === elm) {\r\n        pos.start = elm.nextSibling;\r\n    } else if (pos.end === elm) {\r\n        pos.end = elm.previousSibling;\r\n    }\r\n    pos.count--;\r\n    removeNode(elm);\r\n}\r\n\r\n/** @type {ZetaUI.UIControlRenderer} */\r\nconst defaultRenderer = {\r\n    append: appendControl,\r\n    remove: removeControl,\r\n    getElementForRole: function (control, role) {\r\n        var dom = _(control).current;\r\n        return dom.bindedNode[keys(dom.binds).indexOf(String(dom.roles[role]))];\r\n    },\r\n    getRoles: function (control) {\r\n        var dom = _(control).current;\r\n        return keys(dom.roles);\r\n    },\r\n    isEnabled: function (control) {\r\n        var pos = _(control).position;\r\n        return !pos || pos.enabled;\r\n    }\r\n};\r\nexport default defaultRenderer;\r\n\r\nexport function setDefaultTemplate(type, template, overrides) {\r\n    defaultTemplates[type] = template;\r\n    overrideTemplates[type] = overrides && inherit(defaultTemplates, overrides);\r\n}\r\n","import waterpipe from \"../include/external/waterpipe.js\";\r\nimport { each } from \"../include/zeta-dom/util.js\";\r\n\r\nexport function copy(dst, src) {\r\n    // use each() instead of extend()\r\n    // to ensure all values copied even if the value is undefined\r\n    each(src, function (i, v) {\r\n        dst[i] = v;\r\n    });\r\n    return dst;\r\n}\r\n\r\nexport function eachAttr(node, callback) {\r\n    each(node.attributes, function (i, v) {\r\n        callback(v.nodeName, v.value, v);\r\n    });\r\n}\r\n\r\nexport function parseTemplateConstant(value) {\r\n    return waterpipe.eval('\"' + value + '\"');\r\n}\r\n\r\nexport function createNamedFunction(name, body) {\r\n    if (!/^[$_a-z][$_a-z0-9]*$/i.test(name)) {\r\n        throw new Error('Invalid function name \\'' + name + '\\'');\r\n    }\r\n    return new Function('fn', 'return function ' + name + '() { return fn.apply(this, arguments) }')(body);\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__609__;","module.exports = __WEBPACK_EXTERNAL_MODULE__804__;","module.exports = __WEBPACK_EXTERNAL_MODULE__160__;","module.exports = __WEBPACK_EXTERNAL_MODULE__163__;","if(typeof __WEBPACK_EXTERNAL_MODULE__47__ === 'undefined') { var e = new Error(\"Cannot find module 'undefined'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__47__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(594);\n"],"sourceRoot":""}