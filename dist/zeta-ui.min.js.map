{"version":3,"sources":["webpack://zeta-ui/webpack/universalModuleDefinition","webpack://zeta-ui/webpack/runtime/create fake namespace object","webpack://zeta-ui/./build/locale|eager|/en/|groupOptions: {}|strict namespace object","webpack://zeta-ui/./build/core/ArgumentIterator.js","webpack://zeta-ui/./build/include/zeta-dom/events.js","webpack://zeta-ui/./build/core/DisplayValue.js","webpack://zeta-ui/./build/core/UIContext.js","webpack://zeta-ui/./build/core/UIToolsetState.js","webpack://zeta-ui/./build/core/UIControl.js","webpack://zeta-ui/./build/core/UIControlSpecies.js","webpack://zeta-ui/./build/core/UIToolset.js","webpack://zeta-ui/./build/core/define.js","webpack://zeta-ui/./build/core/flags.js","webpack://zeta-ui/./build/include/zeta-dom/index.js","webpack://zeta-ui/./build/util/cssUtil.js","webpack://zeta-ui/./build/util/defineUtil.js","webpack://zeta-ui/./build/Overlay.js","webpack://zeta-ui/./build/Dialog.js","webpack://zeta-ui/./build/Label.js","webpack://zeta-ui/./build/Button.js","webpack://zeta-ui/./build/SubmitButton.js","webpack://zeta-ui/./build/ButtonSet.js","webpack://zeta-ui/./build/Generic.js","webpack://zeta-ui/./build/renderer/default/contenteditable.js","webpack://zeta-ui/./build/TextBoxLike.js","webpack://zeta-ui/./build/TextBox.js","webpack://zeta-ui/./build/promptFactory.js","webpack://zeta-ui/./build/ButtonList.js","webpack://zeta-ui/./build/ButtonLike.js","webpack://zeta-ui/./build/Callout.js","webpack://zeta-ui/./build/Checkbox.js","webpack://zeta-ui/./build/Menu.js","webpack://zeta-ui/./build/Dropdown.js","webpack://zeta-ui/./build/DatePicker.js","webpack://zeta-ui/./build/Fieldset.js","webpack://zeta-ui/./build/FileInput.js","webpack://zeta-ui/./build/Form.js","webpack://zeta-ui/./build/KeywordInput.js","webpack://zeta-ui/./build/LinkButton.js","webpack://zeta-ui/./build/NumberInput.js","webpack://zeta-ui/./build/RichTextInput.js","webpack://zeta-ui/./build/entry.js","webpack://zeta-ui/./build/globalContext.js","webpack://zeta-ui/./build/include/external/jquery.js","webpack://zeta-ui/./build/include/external/promise-polyfill.js","webpack://zeta-ui/./build/include/external/waterpipe.js","webpack://zeta-ui/./build/include/external/zeta-editor.js","webpack://zeta-ui/./build/include/zeta-dom/cssUtil.js","webpack://zeta-ui/./build/include/zeta-dom/dom.js","webpack://zeta-ui/./build/include/zeta-dom/domLock.js","webpack://zeta-ui/./build/include/zeta-dom/domUtil.js","webpack://zeta-ui/./build/include/zeta-dom/env.js","webpack://zeta-ui/./build/include/zeta-dom/util.js","webpack://zeta-ui/./build/index.js","webpack://zeta-ui/./build/locale/en.js","webpack://zeta-ui/./build/util/formatShortcut.js","webpack://zeta-ui/./build/renderer/default/effects.js","webpack://zeta-ui/./build/renderer/default/index.js","webpack://zeta-ui/./build/util/common.js","webpack://zeta-ui/external \"jQuery\"","webpack://zeta-ui/external \"promise-polyfill\"","webpack://zeta-ui/external \"waterpipe\"","webpack://zeta-ui/external {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta-ui/external {\"commonjs\":\"zeta-editor\",\"commonjs2\":\"zeta-editor\",\"amd\":\"zeta-editor\",\"root\":[\"zeta\",\"Editor\"]}","webpack://zeta-ui/webpack/bootstrap","webpack://zeta-ui/webpack/startup","webpack://zeta-ui/webpack/runtime/define property getters","webpack://zeta-ui/webpack/runtime/hasOwnProperty shorthand","webpack://zeta-ui/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","require","e","define","amd","a","i","self","__WEBPACK_EXTERNAL_MODULE__163__","__WEBPACK_EXTERNAL_MODULE__160__","__WEBPACK_EXTERNAL_MODULE__609__","__WEBPACK_EXTERNAL_MODULE__47__","__WEBPACK_EXTERNAL_MODULE__804__","leafPrototypes","getProto","map","fakeMap","webpackAsyncContext","req","webpackAsyncContextResolve","then","id","__webpack_require__","t","Promise","resolve","o","Error","code","keys","Object","ArgumentIterator","args","this","value","done","length","definePrototype","next","type","arr","isPlainObject","is","shift","nextAll","push","fn","string","ZetaEventContainer","zeta","getValue","control","prop","fireEvent","needEvaluate","waterpipe","displayValue","getTemplateContext","lastValue","emitPropertyChange","DisplayValue","rawValue","_","createPrivateStore","UIContext","getContainer","values","extend","toJSON","update","container","each","toolsetStates","v","clearFlag","FLAG_ENABLED","emitAsync","foreachControl","FLAG_ACTIVE","FLAG_VISIBLE","isDisabledByToolset","flushEvents","validate","reset","UIToolsetState","toolset","context","state","options","initFlagState","name","all","add","pick","isFunction","isEnabled","setFlag","on","event","handler","invalidElements","defaultValue","CONST_PROPS","RE_PIPE","speciesMap","WeakMap","executingControls","Set","importedControls","Map","exportedControls","inheritedValues","eventHandlers","unhandlaebleOption","freeze","handleable","setEventHandlers","kv","createContext","getSpeciesSpec","species","renderer","element","parentContext","dom","parentElement","parentControl","any","parentContainer","$","addClass","captureDOMEvents","normalizeTouchEvents","tap","cur","target","parentNode","getContexts","emit","undefined","matchWord","focusedBy","source","emitStateChange","createEventContainer","appendControls","parent","allowExport","spec","mapGet","ctor","append","makeArray","controls","defaultOrder","set","sort","b","m","mult","a1","a2","b1","b2","either","get","callback","enabledOnly","setValue","newValue","suppressEvent","inited","inited2","emitEvent","oldValue","currentEvent","errors","validateOnSetValue","result","required","reject","obj","validateAll","focusOnFailed","failed","promises","promise","catch","w","containsOrEquals","resolveAll","comparePosition","initialValues","getLabel","labels","String","globalContext","default","wrapValue","test","listenProperty","proto","defineGetterProperty","hasOwnProperty","dict","getInheritProperty","dv","isInherited","notifyChildren","exportProperty","isDefault","ucfirst","defineHiddenProperty","bind","defineAliasProperty","exportControls","prev","len","arguments","newControls","slice","hasRole","role","single","data","bubble","emitAsyncEvent","recursive","requireChildControls","property","oldValues","newValues","copy","handlePropertyChange","delete","handlers","getRoles","getOwnPropertyNames","setInitial","UIControl","extraOptions","childContext","createInnerContext","toolsetState","getUniqueName","watch","getPrototypeOf","label","execute","shortcut","icon","randomId","defaultExport","previousSibling","nextSibling","isActive","isHidden","contains","raw","copyValue","forEach","getElementForRole","fireInit","call","focus","has","finish","resolved","bubbles","run","command","console","error","waitForExecution","isThenable","lock","always","clear","destroy","pending","cancelLock","mapRemove","splice","indexOf","remove","setTimeout","removeNode","autoDestroy","defineObservableProperty","prototype","showIcon","showText","hideDisabledChild","hideCalloutOnBlur","hideCalloutOnExecute","enableChildren","UIControlSpecies","baseClass","createNamedFunction","replace","clone","initData","inherit","cloneData","render","props","document","createElement","UIToolset","exportedLabels","addLabels","language","key","use","i18n","import","export","definedType","defineInternal","specs","defaultOptions","setDefaultTemplate","template","templates","defineLayout","create","iter","parseOptions","FLAG_NAMES","split","computeFn","component","getFlag","flag","bit","flags","some","every","enabled","noop","active","hiddenWhenDisabled","visible","realm","FLIP_POS","top","left","right","bottom","DIR_SIGN","documentElement","snaps","position","to","dir","within","offset","body","appendChild","css","maxWidth","maxHeight","oDirX","oDirY","inset","refRect","toPlainRect","clientX","x","clientY","y","getRect","expand","winRect","elmRect","margin","point","style","transform","p","pSize","pMax","sTransform","center","rDir","Math","abs","elmRectNoMargin","dirX","dirY","origin","Node","window","width","height","cssFromPoint","snapToElement","isVisible","scrollParent","getScrollParent","rect","area","max","apply","snap","setZIndexOver","getZIndex","pseudo","getComputedStyle","zIndex","parseInt","over","maxZIndex","iterator","createTreeWalker","iterateNode","getZIndexOver","updateSnaps","setTimeoutOnce","passive","parseExecute","parseControlsAndExecute","parseIconAndExecute","shouldExecuteOnClick","elm","getOverlayElement","init","runCSSTransition","focusreturn","beforeDestroy","closeDialog","buttonset","pinnable","modal","title","description","errorMessage","snapTo","screen","availWidth","availHeight","activeElement","message","handled","focusout","escape","afterExecute","enter","T_SHOWICON","T_SHOWTEXT","T_ICON","executeButton","danger","click","textbox","editor","focused","include","editorOptions","enable","stateChange","focusin","matchSelector","PRESET_KEY","DEFAULT_PRESET","overrides","extractText","currentNotify","preventLeave","placeholder","preset","presetDefinition","originalInit","inline","disallowedElement","widgets","presetWidget","typer","getStaticWidget","ui","Dialog","Button","SubmitButton","ButtonSet","GenericComponent","TextBox","initPrompt","targetUI","valueEnabled","valueLabel","cancelVisible","action","dialogTitle","dialogDescription","dialogData","dialog","confirm","cancel","leaveForm","submit","button","generic","timeout","alert","prompt","notify","kind","getNextVisible","showSeparatorBefore","showSeparatorAfter","prevVisible","nextVisible","alwaysShowCallout","checkboxToggleValue","space","getNextItem","getButtonList","showCallout","callout","setClass","calloutParent","getClass","catchAsync","hideCallout","activeButton","isSubMenu","mouseenter","mouseleave","old","keystroke","RegExp","$1","childExecuted","setDropdownValue","dropdown","forceUpdate","defaultChoice","choices","match","allowEmpty","hintValue","selectedText","valueAsLabel","selected","updateDropdownChoices","choiceObj","isArray","Array","parseTemplateConstant","choiceButton","newButtons","activeTyper","choice","MS_PER_DAY","TIMEZONE_OFFSET","Date","getTimezoneOffset","INPUT_TYPES","datetime","day","week","month","MONTH_NAMES","WEEKDAYS_NAMES","Menu","Dropdown","Label","defaultLocale","range","count","getFullYear","d","getMonth","getDate","getHours","getMinutes","sameMonth","parseMaxima","stepDate","$2","isNaN","makeTime","h","date","setHours","normalizeDate","min","mode","setDate","getDay","setSeconds","step","formatDate","end","monthPart","showMonth","currentMonth","year","firstDay","$buttons","removeClass","numDays","numDaysLast","children","text","today","eq","toggle","isMinMonth","isMaxMonth","prevMonth","nextMonth","filter","toggleClass","initControls","dropdownOptions","monthChoices","setToday","hour","number","loop","minute","timeSeperator","digits","meridiem","propertyChange","stepValue","tx","widget","commandName","minuteStep","lang","locale","monthFormatter","weekdayFormatter","selectedDate","updateValue","$table","repeat","appendTo","find","monthDelta","hasClass","textContent","mousewheel","contextChange","mousedown","rad","atan2","centerY","centerX","PI","curM","curH","getAttribute","round","deltaH","floor","mousewheelTimeout","preventDefault","IS_TOUCH","nativeInput","fromNumericValue","valueAsNumber","toNumericValue","softSelectedDate","format","invoke","selection","selectAll","insertText","calendar","clock","commands","stepUp","stepDown","contentChange","showMenu","hideMenu","executed","calender","okButton","menu","retainFocus","softDate","updateFlag","optional","Intl","DateTimeFormat","weekday","str","resetFileInput","input","originalParent","form","prependTo","autoReset","multiple","files","guards","deferreds","ensureFormPromise","store","settleFormPromise","resolveOrReject","deferred","initForm","beforeExecute","cancelled","activeInput","activeDialog","SHOW_DIALOG","ButtonList","loadLabels","encode","keepWS","createTextNode","innerHTML","toValue","toValueObject","sortValues","localeCompare","valueChanged","fuzzyMatch","haystack","needle","vector","toLowerCase","j","lastpos","l","charAt","firstIndex","Infinity","consecutiveMatches","formattedText","join","substr","getSuggestions","exclude","suggestions","allowedValues","knownValues","showSuggestions","concat","matches","processSuggestions","suggestionCount","allowFreeInput","insertItem","showSuggestionDialog","list","checkbox","entry","before","buttonlist","currentValues","allValues","checked","span","lastChild","rootNode","baseCaret","moveTo","insertHtml","tag","editable","detach","setup","select","upArrow","downArrow","textInput","getSelection","isKeyboardEvent","numOfDigits","currentText","validation","allowChars","toolbar","UI","process","jQuery","waterpipe_","pipes","varargs","hasArgs","Editor","parseCSS","isCssUrlValue","_defaultExport","textInputAllowed","beginDrag","beginPinchZoom","getShortcut","setShortcut","focusable","setModal","releaseFocus","locked","tagName","domReady","connected","acceptNode","combineNodeFilters","iterateNodeToArray","createNodeIterator","getCommonAncestor","parentsAndSelf","selectIncludeSelf","selectClosestRelative","bindUntil","dispatchDOMMouseEvent","getScrollOffset","getContentRect","scrollBy","scrollIntoView","makeSelection","getRects","rectEquals","rectCovers","rectIntersects","pointInRect","mergeRect","elementFromPoint","IS_MAC","isUndefinedOrNull","isArrayLike","grep","setAdd","equal","combineFn","setImmediate","setImmediateOnce","throwNotFunction","getOwnPropertyDescriptors","defineOwnProperty","watchOnce","watchable","deepFreeze","iequal","camel","hyphenate","lcfirst","trim","htmlDecode","setPromiseTimeout","defaultRenderer","zeta_ui_datepicker","zeta_ui_keyword","MAC_CTRLKEY","ctrl","alt","tab","pageUp","pageDown","backspace","leftArrow","rightArrow","home","closest","touches","until","p1","pow","p2","p3","p4","scalePercent","sqrt","parseFloat","$overlay","$anim","createRipple","states","parsedTemplates","defaultTemplates","overrideTemplates","DOMState","current","layouts","createDocumentFragment","content","DocumentFragment","parseTemplate","cacheKeyObj","parentTemplateName","cached","index","binds","0","roles","addBind","expression","extractPartialBinds","attr","partialBind","nodeName","hasOverrideTemplate","nodeToReplace","node","includeTemplate","tmp","childNodes","attributes","cloneNode","$controls","eachAttr","replaceWith","outerHTML","cache","expr","evalAsObject","nodeCount","nodeType","eval","evalTemplate","globals","UIControlDOM","layoutType","bindedNode","positions","UIControlDOMPosition","cssClass","display","condition","of","layout","start","appendControl","parentState","nextPos","prevPos","removeControl","insertAfter","pos","insertBefore","formatShortcut","reBold","reItalic","loading","disabled","hidden","k","dst","src","Function","__webpack_module_cache__","moduleId","__webpack_modules__","__proto__","__esModule","ns","r","def","definition","defineProperty","enumerable","Symbol","toStringTag"],"mappings":"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","file":"zeta-ui.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"zeta-dom\"), require(\"waterpipe\"), require(\"jQuery\"), (function webpackLoadOptionalExternalModule() { try { return require(\"zeta-editor\"); } catch(e) {} }()), require(\"promise-polyfill\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"zeta-dom\", \"waterpipe\", \"jQuery\", \"zeta-editor\", \"promise-polyfill\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"zeta-dom\"), require(\"waterpipe\"), require(\"jQuery\"), (function webpackLoadOptionalExternalModule() { try { return require(\"zeta-editor\"); } catch(e) {} }()), require(\"promise-polyfill\")) : factory(root[\"zeta\"], root[\"waterpipe\"], root[\"jQuery\"], root[\"zeta\"][\"Editor\"], root[\"promise-polyfill\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function(__WEBPACK_EXTERNAL_MODULE__163__, __WEBPACK_EXTERNAL_MODULE__160__, __WEBPACK_EXTERNAL_MODULE__609__, __WEBPACK_EXTERNAL_MODULE__47__, __WEBPACK_EXTERNAL_MODULE__804__) {\nreturn ","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var map = {\n\t\"./en.js\": 24,\n\t\"./en/zeta.ui.datepicker.json\": 935,\n\t\"./en/zeta.ui.keyword.json\": 3\n};\nvar fakeMap = {\n\t\"3\": 1,\n\t\"24\": 9,\n\t\"935\": 1\n};\n\nfunction webpackAsyncContext(req) {\n\treturn webpackAsyncContextResolve(req).then(function(id) {\n\t\treturn __webpack_require__.t(id, fakeMap[id])\n\t});\n}\nfunction webpackAsyncContextResolve(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\t\treturn map[req];\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.resolve = webpackAsyncContextResolve;\nwebpackAsyncContext.id = 839;\nmodule.exports = webpackAsyncContext;","import { definePrototype, is, isPlainObject } from \"../include/zeta-dom/util.js\";\r\n\r\nfunction ArgumentIterator(args) {\r\n    this.value = null;\r\n    this.args = args;\r\n    this.done = !args.length;\r\n}\r\n\r\ndefinePrototype(ArgumentIterator, {\r\n    next: function (type) {\r\n        // @ts-ignore: type inference issue\r\n        var arr = this.args;\r\n        if (type === 'object' ? isPlainObject(arr[0]) : typeof type === 'string' ? typeof arr[0] === type : is(arr[0], type)) {\r\n            this.value = arr.shift();\r\n            this.done = !arr.length;\r\n            return true;\r\n        }\r\n    },\r\n    nextAll: function (type) {\r\n        var arr = [];\r\n        while (this.next(type) && arr.push(this.value));\r\n        return arr;\r\n    },\r\n    fn: function () {\r\n        // @ts-ignore: type inference issue\r\n        return this.next('function') && this.value;\r\n    },\r\n    string: function () {\r\n        // @ts-ignore: type inference issue\r\n        return this.next('string') && this.value;\r\n    }\r\n});\r\n\r\nexport default ArgumentIterator;\r\n","import zeta from \"zeta-dom\";const { EventContainer: ZetaEventContainer } = zeta; export { ZetaEventContainer };","import waterpipe from \"../include/external/waterpipe.js\";\r\nimport { definePrototype } from \"../include/zeta-dom/util.js\";\r\nimport { emitPropertyChange } from \"./UIControl.js\";\r\n\r\n/**\r\n * @param {DisplayValue} self\r\n * @param {ZetaUI.UIControl} control\r\n * @param {string} prop\r\n * @param {boolean=} fireEvent\r\n */\r\nfunction getValue(self, control, prop, fireEvent) {\r\n    if (self.needEvaluate) {\r\n        var value = waterpipe(self.displayValue, control.getTemplateContext(true));\r\n        if (fireEvent !== false && value !== self.lastValue) {\r\n            emitPropertyChange(control, prop, self.lastValue, value);\r\n        }\r\n        self.lastValue = value;\r\n        return value;\r\n    }\r\n    return self.displayValue;\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {string} prop\r\n * @param {any} rawValue\r\n * @param {any} displayValue\r\n * @param {boolean=} needEvaluate\r\n * @param {boolean=} fireEvent\r\n */\r\nfunction DisplayValue(control, prop, rawValue, displayValue, needEvaluate, fireEvent) {\r\n    var self = this;\r\n    self.rawValue = rawValue;\r\n    self.displayValue = displayValue;\r\n    self.lastValue = displayValue;\r\n    self.needEvaluate = needEvaluate;\r\n    getValue(self, control, prop, fireEvent);\r\n}\r\n\r\ndefinePrototype(DisplayValue, {\r\n    getValue: function (control, prop, fireEvent) {\r\n        // @ts-ignore: type inference issue\r\n        return getValue(this, control, prop, fireEvent);\r\n    }\r\n});\r\n\r\nexport default DisplayValue;\r\n","import { createPrivateStore, definePrototype, each, extend } from \"../include/zeta-dom/util.js\";\r\nimport { clearFlag, FLAG_ACTIVE, FLAG_ENABLED, FLAG_VISIBLE, isDisabledByToolset } from \"./flags.js\";\r\nimport { foreachControl } from \"./UIControl.js\";\r\n\r\n/** @type {Zeta.PrivateStore<UIContext, (a: UIContext) => Internal.UIEventContainer>} */\r\nconst _ = createPrivateStore();\r\n\r\n/** @class */\r\nfunction UIContext(getContainer, values) {\r\n    extend(this, values);\r\n    _(this, getContainer);\r\n}\r\n\r\ndefinePrototype(UIContext, {\r\n    toJSON: function () {\r\n        return extend({}, this);\r\n    },\r\n    update: function (values) {\r\n        var container = _(this)(this);\r\n        extend(this, values);\r\n        each(container.toolsetStates, function (i, v) {\r\n            clearFlag(v, FLAG_ENABLED);\r\n            container.emitAsync('contextChange', v);\r\n        });\r\n        foreachControl(container.control, function (v) {\r\n            clearFlag(v, FLAG_ENABLED | FLAG_ACTIVE | FLAG_VISIBLE);\r\n            if (!isDisabledByToolset(v)) {\r\n                container.emitAsync('contextChange', v);\r\n            }\r\n        });\r\n        container.flushEvents();\r\n    },\r\n    validate: function () {\r\n        return _(this)(this).control.validate();\r\n    },\r\n    reset: function () {\r\n        _(this)(this).control.reset();\r\n    }\r\n});\r\n\r\nexport default UIContext;\r\n","import { FLAG_ENABLED, initFlagState, isEnabled, setFlag } from \"./flags.js\";\r\nimport { createPrivateStore, definePrototype, isFunction, pick } from \"../include/zeta-dom/util.js\";\r\n\r\nconst _ = createPrivateStore();\r\n\r\n/** @type {(...args: ConstructorParameters<typeof ZetaUI.UIToolsetState>) => void} */\r\nfunction UIToolsetState(container, toolset, context) {\r\n    var self = this;\r\n    var state = _(self, {\r\n        container: container,\r\n        options: toolset.options\r\n    });\r\n    initFlagState(self, state);\r\n    self.name = toolset.name;\r\n    self.context = context;\r\n    self.all = {};\r\n    // @ts-ignore: type inference issue\r\n    container.add(self, pick(toolset.options, isFunction));\r\n    container.emitAsync('contextChange', self);\r\n}\r\n\r\ndefinePrototype(UIToolsetState, {\r\n    get enabled() {\r\n        return isEnabled(this);\r\n    },\r\n    set enabled(value) {\r\n        setFlag(this, FLAG_ENABLED, value);\r\n    },\r\n    on: function (event, handler) {\r\n        return _(this).container.add(this, event, handler);\r\n    }\r\n});\r\n\r\nexport default UIToolsetState;\r\n","import dom from \"../include/zeta-dom/dom.js\";\r\nimport $ from \"../include/external/jquery.js\";\r\nimport { cancelLock, lock } from \"../include/zeta-dom/domLock.js\";\r\nimport { comparePosition, containsOrEquals, removeNode } from \"../include/zeta-dom/domUtil.js\";\r\nimport { ZetaEventContainer } from \"../include/zeta-dom/events.js\";\r\nimport { always, any, createPrivateStore, defineAliasProperty, defineGetterProperty, defineHiddenProperty, defineObservableProperty, definePrototype, each, either, extend, hasOwnProperty, is, isFunction, isPlainObject, isThenable, kv, makeArray, mapGet, mapRemove, matchWord, pick, randomId, reject, resolve, resolveAll, single, ucfirst, watch } from \"../include/zeta-dom/util.js\";\r\nimport { copy } from \"../util/common.js\";\r\nimport { clearFlag, FLAG_ACTIVE, FLAG_ENABLED, FLAG_VISIBLE, initFlagState, isActive, isEnabled, isHidden, setFlag } from \"./flags.js\";\r\nimport DisplayValue from \"./DisplayValue.js\";\r\nimport UIContext from \"./UIContext.js\";\r\nimport UIToolsetState from \"./UIToolsetState.js\";\r\nimport globalContext from \"../globalContext.js\";\r\n\r\nconst CONST_PROPS = 'element name type parent all controls context previousSibling nextSibling';\r\nconst RE_PIPE = /\\{\\{((?:[^\\}]|\\}(?!\\}))+)\\}\\}/;\r\n\r\nconst speciesMap = new WeakMap();\r\nconst executingControls = new Set();\r\nconst importedControls = new Map();\r\nconst exportedControls = {};\r\nconst inheritedValues = {};\r\nconst eventHandlers = {};\r\nconst unhandlaebleOption = Object.freeze({\r\n    handleable: false\r\n});\r\n\r\n/** @type {Zeta.PrivateStore<ZetaUI.UIControl, Internal.UIControlState> & Zeta.PrivateStore<UIContext, Internal.UIEventContainer>} */\r\n// @ts-ignore: type inference issue\r\nconst _ = createPrivateStore();\r\n\r\nvar invalidElements;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction getUniqueName(all, name) {\r\n    for (var i = 0; all[name + (i || '')]; i++);\r\n    return name + (i || '');\r\n}\r\n\r\n/**\r\n * @param {string} type\r\n * @param {string | object} event\r\n * @param {Zeta.AnyFunction=} handler\r\n */\r\nfunction setEventHandlers(type, event, handler) {\r\n    eventHandlers[type] = isPlainObject(event) || kv(event, handler);\r\n}\r\n\r\n/**\r\n * @param {Element} element\r\n * @param {UIContext} context\r\n * @returns {Internal.UIEventContainer}\r\n */\r\nfunction createEventContainer(element, context) {\r\n    /** @type {Internal.UIEventContainer} */\r\n    // @ts-ignore: type inference issue\r\n    var container = new ZetaEventContainer(element, context, {\r\n        captureDOMEvents: true,\r\n        normalizeTouchEvents: true\r\n    });\r\n    container.tap(function (e) {\r\n        var control;\r\n        // @ts-ignore: type inference issue\r\n        for (var cur = e.target; !control && cur && cur !== element; cur = cur.parentNode) {\r\n            control = container.getContexts(cur)[0];\r\n        }\r\n        if (control && isEnabled(control)) {\r\n            container.emit(e, e.target === element ? control.element : undefined);\r\n            if (matchWord(e.type, 'focusin focusout')) {\r\n                // @ts-ignore: internal update read-only property\r\n                control.focusedBy = e.source;\r\n                emitStateChange(control);\r\n            } else if (matchWord(e.type, 'asyncStart asyncEnd')) {\r\n                foreachControl(control, function (v) {\r\n                    emitStateChange(v);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    return container;\r\n}\r\n\r\n/**\r\n * @param {Zeta.PrivateStore<ZetaUI.UIControlSpecies, Internal.UIControlSpeciesSpec>} getSpeciesSpec\r\n * @param {ZetaUI.UIControlSpecies} species\r\n * @param {ZetaUI.UIControlRenderer} renderer,\r\n * @param {HTMLElement} element\r\n * @param {*} values\r\n */\r\nfunction createContext(getSpeciesSpec, species, renderer, element, values) {\r\n    var context = new UIContext(_, values);\r\n    var parentContext = dom.context;\r\n    var parentElement = null;\r\n    var parentControl = any(executingControls, function (v) {\r\n        return dom.focused(v.element);\r\n    });\r\n    if (parentControl) {\r\n        parentContext = parentControl.context;\r\n        parentElement = parentControl.element;\r\n    } else if (is(parentContext, UIContext)) {\r\n        var parentContainer = _(parentContext);\r\n        // @ts-ignore: type inference issue\r\n        parentElement = parentContainer.event && parentContainer.event.context.element;\r\n    }\r\n    $(element).addClass('zui-root');\r\n\r\n    var container = createEventContainer(element, context);\r\n    extend(container, {\r\n        toolset: getSpeciesSpec(species).toolset,\r\n        toolsetStates: new Map(),\r\n        parentContext: parentContext,\r\n        parentElement: parentElement,\r\n        getSpeciesSpec: getSpeciesSpec,\r\n        renderer: renderer\r\n    });\r\n    _(context, container);\r\n    appendControls(container, null, [species], true);\r\n    container.flushEvents();\r\n    return container.context;\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction createInnerContext(control) {\r\n    var state = _(control);\r\n    if (!is(state.childContext, UIContext)) {\r\n        var context = new UIContext(_);\r\n        if (!('value' in state.options)) {\r\n            state.value = context;\r\n            defineGetterProperty(control.context, control.name, function () {\r\n                return context;\r\n            }, function (value) {\r\n                var oldValue = extend({}, context);\r\n                emitPropertyChange(control, 'value', oldValue, extend(context, value));\r\n            });\r\n        }\r\n        state.childContext = context;\r\n    }\r\n    return state.childContext;\r\n}\r\n\r\n/**\r\n * @param {Internal.UIEventContainer} container\r\n * @param {ZetaUI.UIControl | null} parent\r\n * @param {ZetaUI.UIControlSpecies[]} species\r\n * @param {boolean=} allowExport\r\n * @param {any=} options\r\n */\r\nfunction appendControls(container, parent, species, allowExport, options) {\r\n    each(species, function (i, v) {\r\n        var spec = container.getSpeciesSpec(v);\r\n        if (spec.type === 'import') {\r\n            mapGet(importedControls, parent, Object)[spec.name] = true;\r\n            appendControls(container, parent, exportedControls[spec.name] || [], true, spec.options);\r\n        } else {\r\n            var control = new spec.ctor(container, v, parent, allowExport, options);\r\n            container.renderer.append(control, parent || container, true);\r\n            appendControls(container, control, makeArray(spec.options.controls));\r\n            emitStateChange(control);\r\n            if (!parent) {\r\n                // @ts-ignore: internal update read-only property\r\n                container.control = control;\r\n            }\r\n        }\r\n    });\r\n    if (parent && species[0]) {\r\n        if (parent.controls[1]) {\r\n            var defaultOrder = new Map();\r\n            each(parent.controls, function (i, v) {\r\n                defaultOrder.set(v, i);\r\n            });\r\n            parent.controls.sort(function (a, b) {\r\n                function m(a, b, prop, mult) {\r\n                    return !a[prop] ? 0 : a[prop] === '*' || matchWord(b.name, a[prop]) ? mult : -mult;\r\n                }\r\n                var a1 = m(a, b, 'after', 1);\r\n                var a2 = m(a, b, 'before', -1);\r\n                var b1 = m(b, a, 'after', -1);\r\n                var b2 = m(b, a, 'before', 1);\r\n                if (either(!a1 && !a2, !b1 && !b2)) {\r\n                    return a1 || a2 || b1 || b2;\r\n                }\r\n                return (a1 + a2 + b1 + b2) || defaultOrder.get(a) - defaultOrder.get(b);\r\n            });\r\n        }\r\n        emitStateChange(parent);\r\n    }\r\n}\r\n\r\nfunction foreachControl(control, callback, enabledOnly) {\r\n    if (!enabledOnly || isEnabled(control)) {\r\n        callback(control);\r\n        each(control.controls, function (i, v) {\r\n            foreachControl(v, callback, enabledOnly);\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction setInitial(control) {\r\n    var state = _(control);\r\n    var values = state.initialValues;\r\n    each(Object.getOwnPropertyNames(control), function (i, v) {\r\n        if (!matchWord(v, CONST_PROPS)) {\r\n            values[v] = control[v];\r\n        }\r\n    });\r\n    copy(values, state.values);\r\n    defineHiddenProperty(values, 'value', state.value);\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {*} newValue\r\n * @param {boolean=} suppressEvent\r\n */\r\nfunction setValue(control, newValue, suppressEvent) {\r\n    var state = _(control);\r\n    if (!state.inited) {\r\n        state.value = newValue;\r\n        return true;\r\n    }\r\n    if (!state.inited2) {\r\n        emitEvent(control, 'init', null, unhandlaebleOption);\r\n    }\r\n    var oldValue = state.value;\r\n    if (oldValue === newValue) {\r\n        return false;\r\n    }\r\n    var currentEvent = state.container.event;\r\n    var promise = (!currentEvent || currentEvent.type !== 'setValue' || currentEvent.context !== control) && emitEvent(control, 'setValue', {\r\n        oldValue: oldValue,\r\n        newValue: newValue\r\n    });\r\n    if (promise) {\r\n        return state.value !== oldValue;\r\n    }\r\n    state.value = newValue;\r\n    if (!suppressEvent) {\r\n        emitPropertyChange(control, 'value', oldValue, newValue);\r\n        if (control.errors || control.validateOnSetValue) {\r\n            validate(control);\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction validate(control) {\r\n    var result;\r\n    if (isEnabled((control))) {\r\n        if (control.required && !control.value) {\r\n            result = reject('required');\r\n        } else {\r\n            result = emitEvent(control, 'validate');\r\n        }\r\n    }\r\n    if (result) {\r\n        result.then(function () {\r\n            control.errors = null;\r\n        }, function (errors) {\r\n            if (isPlainObject(errors)) {\r\n                control.errors = errors;\r\n            } else {\r\n                var obj = {};\r\n                each(makeArray(errors), function (i, v) {\r\n                    obj[v] = v;\r\n                });\r\n                control.errors = obj;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    control.errors = null;\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction validateAll(control) {\r\n    var focusOnFailed = !invalidElements && !matchWord(dom.getEventSource(control.element), 'script touch');\r\n    var failed = invalidElements || (focusOnFailed && (invalidElements = []));\r\n    var promises = [];\r\n    _(control).container.flushEvents();\r\n    foreachControl(control, function (v) {\r\n        var promise = validate(v);\r\n        if (promise) {\r\n            promise.catch(function () {\r\n                if (failed && !any(failed, function (w) {\r\n                    return containsOrEquals(v.element, w);\r\n                })) {\r\n                    failed.push(v.element);\r\n                }\r\n            });\r\n            promises.push(promise);\r\n        }\r\n    }, true);\r\n    if (focusOnFailed) {\r\n        invalidElements = null;\r\n    }\r\n    if (promises[0]) {\r\n        var promise = resolveAll(promises);\r\n        promise.catch(function () {\r\n            if (focusOnFailed && !any(failed, function (v) {\r\n                return dom.focused(v);\r\n            })) {\r\n                failed.sort(comparePosition);\r\n                dom.focus(failed[0]);\r\n            }\r\n        });\r\n        return promise;\r\n    }\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction reset(control) {\r\n    var state = _(control);\r\n    var initialValues = state.initialValues;\r\n    control.errors = null;\r\n    clearFlag(control);\r\n    if (initialValues) {\r\n        // use each() instead of extend()\r\n        // to ensure all values copied even if the value is undefined\r\n        each(initialValues, function (i, v) {\r\n            (i in state.values ? state.values : control)[i] = v;\r\n        });\r\n        setValue(control, initialValues.value, true);\r\n    }\r\n    emitEvent(control, 'reset', null, unhandlaebleOption);\r\n    emitStateChange(control);\r\n}\r\n\r\nfunction getLabel(source, name) {\r\n    var labels = source.toolset.labels;\r\n    if (name in labels) {\r\n        getLabel.value = String(labels[name][globalContext.language] || labels[name].default || '');\r\n        return true;\r\n    }\r\n}\r\ngetLabel.value = '';\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {string} prop\r\n * @param {string} value\r\n * @param {boolean=} fireEvent\r\n */\r\nfunction wrapValue(control, prop, value, fireEvent) {\r\n    if (typeof value === 'string') {\r\n        var state = _(control);\r\n        var displayValue = prop !== 'icon' && (getLabel(state.container, value) || getLabel(state, value)) ? getLabel.value : value;\r\n        var needEvaluate = RE_PIPE.test(displayValue);\r\n        if (displayValue !== value || needEvaluate) {\r\n            return new DisplayValue(control, prop, value, displayValue, needEvaluate, fireEvent);\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\n/**\r\n * @param {string | object} name\r\n * @param {any=} defaultValue\r\n */\r\nfunction defineInheritedProperty(name, defaultValue) {\r\n    each(isPlainObject(name) || kv(name, defaultValue), function (i, v) {\r\n        inheritedValues[i] = v;\r\n        listenProperty(UIControl.prototype, i);\r\n    });\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl | null} control\r\n */\r\nfunction getInheritProperty(control, name) {\r\n    for (; control; control = control.parent) {\r\n        var dict = _(control).values;\r\n        if (name in dict) {\r\n            return dict[name];\r\n        }\r\n    }\r\n    return inheritedValues[name];\r\n}\r\n\r\n/**\r\n * @param {object} proto\r\n * @param {string} prop\r\n */\r\nfunction listenProperty(proto, prop) {\r\n    if (!(prop in proto) && !matchWord(prop, CONST_PROPS)) {\r\n        defineGetterProperty(proto, prop, function () {\r\n            var self = this;\r\n            var value = hasOwnProperty(inheritedValues, prop) ? getInheritProperty(self, prop) : _(self).values[prop];\r\n            return is(value, DisplayValue) ? value.lastValue : value;\r\n        }, function (value) {\r\n            var self = this;\r\n            var dict = _(self).values;\r\n            var dv = is(dict[prop], DisplayValue);\r\n            if (value !== dict[prop] && (!dv || value !== dv.rawValue)) {\r\n                var isInherited = hasOwnProperty(inheritedValues, prop);\r\n                var oldValue = dv ? dv.lastValue : dict[prop];\r\n                if (isInherited && (value === null || value === undefined)) {\r\n                    delete dict[prop];\r\n                } else {\r\n                    dict[prop] = wrapValue(self, prop, value);\r\n                }\r\n                var newValue = self[prop];\r\n                if (_(self).inited) {\r\n                    emitPropertyChange(self, prop, oldValue, newValue);\r\n                    if (isInherited) {\r\n                        var notifyChildren = function (cur) {\r\n                            each(cur.controls, function (i, v) {\r\n                                if (!(prop in _(v).values)) {\r\n                                    emitPropertyChange(v, prop, oldValue, newValue);\r\n                                    notifyChildren(v);\r\n                                }\r\n                            });\r\n                        };\r\n                        notifyChildren(self);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        each(mapGet(speciesMap, proto), function (i, v) {\r\n            _(v).values[prop] = wrapValue(v, prop, v[prop]);\r\n            delete v[prop];\r\n            // need to also wrap value of initial values\r\n            // so that it will be properly displayed after reset\r\n            var initialValues = _(v).initialValues;\r\n            initialValues[prop] = prop in initialValues ? wrapValue(v, prop, initialValues[prop], false) : undefined;\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {ZetaUI.UIContext} context\r\n * @param {string} prop\r\n * @param {boolean=} isDefault\r\n */\r\nfunction exportProperty(control, context, prop, isDefault) {\r\n    var name = control.name + (isDefault ? '' : ucfirst(prop));\r\n    if (isFunction(control[prop])) {\r\n        defineHiddenProperty(context, name, control[prop].bind(control));\r\n    } else {\r\n        if (hasOwnProperty(context, name)) {\r\n            control[prop] = context[name];\r\n        }\r\n        defineAliasProperty(context, name, control, prop);\r\n    }\r\n    _(control).exports.push(name);\r\n}\r\n\r\n/**\r\n * @param {string} id\r\n */\r\nfunction exportControls(id) {\r\n    var arr = exportedControls[id] || (exportedControls[id] = []);\r\n    var prev = arr.length;\r\n    for (var i = 1, len = arguments.length; i < len; i++) {\r\n        arr[arr.length] = arguments[i];\r\n    }\r\n    var newControls = arr.slice(prev);\r\n    each(importedControls, function (i, v) {\r\n        if (v[id]) {\r\n            appendControls(_(i).container, i, newControls, true, {});\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * @param {Element} element\r\n * @param {string} role\r\n */\r\nfunction hasRole(element, role) {\r\n    var context = is(dom.getEventContext(element).context, UIContext);\r\n    var control = context && _(context).getContexts(element)[0];\r\n    return control && single(role, function (v) {\r\n        // @ts-ignore\r\n        return control.hasRole(v);\r\n    });\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Events\r\n * -------------------------------------- */\r\n\r\nfunction emitEvent(control, event, data, bubble) {\r\n    return _(control).container.emit(event, control, data, bubble);\r\n}\r\n\r\nfunction emitAsyncEvent(control, event, data, bubble, callback) {\r\n    return _(control).container.emitAsync(event, control, data, bubble, callback);\r\n}\r\n\r\nfunction emitStateChange(control, recursive) {\r\n    emitAsyncEvent(control, 'stateChange', null, unhandlaebleOption);\r\n    if (recursive) {\r\n        for (var cur = control.parent; cur && cur.requireChildControls; cur = cur.parent) {\r\n            clearFlag(cur);\r\n            emitAsyncEvent(cur, 'stateChange', null, unhandlaebleOption);\r\n        }\r\n    }\r\n}\r\n\r\nfunction emitPropertyChange(control, property, oldValue, newValue) {\r\n    emitAsyncEvent(control, 'propertyChange', {\r\n        oldValues: kv(property, oldValue),\r\n        newValues: kv(property, newValue)\r\n    }, false, function (v, a) {\r\n        a.oldValues = copy(a.oldValues, v.oldValues);\r\n        a.newValues = copy(v.newValues, a.newValues);\r\n        return a;\r\n    });\r\n    var state = _(control);\r\n    each(state.values, function (i, v) {\r\n        if (i !== property && is(v, DisplayValue) && v.needEvaluate) {\r\n            v.getValue(control, i, true);\r\n        }\r\n    });\r\n    clearFlag(control);\r\n    emitStateChange(control, true);\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {Partial<ZetaUI.UIControl>} oldValues\r\n * @param {Partial<ZetaUI.UIControl>} newValues\r\n */\r\nfunction handlePropertyChange(control, oldValues, newValues) {\r\n    var state = _(control);\r\n    var container = state.container;\r\n    if (oldValues.element) {\r\n        container.delete(oldValues.element);\r\n    }\r\n    if (newValues.element) {\r\n        container.add(control, 'init', function () {\r\n            state.inited2 = true;\r\n        });\r\n        container.add(control, eventHandlers[control.type]);\r\n        container.add(control, state.handlers);\r\n        each(container.renderer.getRoles(control), function (i, v) {\r\n            if (v !== control.type && eventHandlers[v]) {\r\n                container.add(control, eventHandlers[v]);\r\n            }\r\n        });\r\n        container.add(control, 'init', function () {\r\n            setInitial(control);\r\n        });\r\n        if (!oldValues.element) {\r\n            emitAsyncEvent(control, 'init', null, unhandlaebleOption);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * UIControl\r\n * -------------------------------------- */\r\n\r\n/** @type {(...args: ConstructorParameters<typeof ZetaUI.UIControl>) => void} */\r\nfunction UIControl(container, species, parent, allowExport, extraOptions) {\r\n    /** @type {ZetaUI.UIControl} */\r\n    // @ts-ignore: type inference issue\r\n    var self = this;\r\n    var spec = container.getSpeciesSpec(species);\r\n    var requireScope = !allowExport && parent && _(parent).toolset !== spec.toolset;\r\n    // @ts-ignore: checked for parent\r\n    var context = requireScope ? createInnerContext(parent) : (parent && _(parent).childContext) || (parent || container).context;\r\n    var toolsetState = mapGet(container.toolsetStates, spec.toolset, function () {\r\n        // @ts-ignore: type inference issue\r\n        return new UIToolsetState(container, spec.toolset, context);\r\n    });\r\n    var name = getUniqueName(toolsetState.all, spec.name);\r\n    var state = _(self, {\r\n        control: self,\r\n        species: species,\r\n        container: container,\r\n        handlers: spec.handlers,\r\n        options: spec.options,\r\n        toolset: spec.toolset,\r\n        toolsetState: toolsetState,\r\n        values: {},\r\n        initialValues: {},\r\n        exports: []\r\n    });\r\n    watch(self, true);\r\n    watch(self, function (e) {\r\n        handlePropertyChange(self, e.oldValues, e.newValues);\r\n    });\r\n    initFlagState(self, state);\r\n    mapGet(speciesMap, Object.getPrototypeOf(self), Set).add(self);\r\n\r\n    self.required = false;\r\n    each(spec.options, function (i, v) {\r\n        if (!isFunction(v) && !isFunction(self[i])) {\r\n            self[i] = v;\r\n        }\r\n    });\r\n    each(extraOptions, function (i, v) {\r\n        if (!isFunction(v) && !isFunction(self[i])) {\r\n            self[i] = v;\r\n        }\r\n    });\r\n    if (self.label === undefined) {\r\n        self.label = spec.name;\r\n    }\r\n    if (typeof spec.options.execute === 'string') {\r\n        self.shortcut = dom.getShortcut(spec.options.execute)[0];\r\n    }\r\n    extend(self, {\r\n        name: name,\r\n        type: spec.type,\r\n        icon: self.icon || '',\r\n        parent: parent || null,\r\n        state: toolsetState,\r\n        context: context,\r\n        parentContext: container.parentContext || null,\r\n        parentElement: container.parentElement || null,\r\n        controls: [],\r\n        errors: null,\r\n        id: randomId(),\r\n        all: toolsetState.all\r\n    })\r\n    self.all[name] = self;\r\n    if (parent) {\r\n        parent.controls.push(self);\r\n        if (allowExport && parent.all !== self.all) {\r\n            parent.all[name] = self;\r\n        }\r\n    }\r\n    if (spec.defaultExport) {\r\n        exportProperty(self, context, spec.defaultExport, true);\r\n    }\r\n    each(spec.options.exports, function (i, v) {\r\n        exportProperty(self, context, v);\r\n    });\r\n    state.inited = true;\r\n}\r\n\r\ndefinePrototype(UIControl, {\r\n    get previousSibling() {\r\n        var element = this.element;\r\n        return element && _(this).container.getContexts(element.previousSibling)[0] || null;\r\n    },\r\n    get nextSibling() {\r\n        var element = this.element;\r\n        return element && _(this).container.getContexts(element.nextSibling)[0] || null;\r\n    },\r\n    get focused() {\r\n        return dom.focused(this.element);\r\n    },\r\n    get pending() {\r\n        return dom.locked(this.element);\r\n    },\r\n    get enabled() {\r\n        return isEnabled(this);\r\n    },\r\n    set enabled(value) {\r\n        setFlag(this, FLAG_ENABLED, value);\r\n    },\r\n    get active() {\r\n        return isActive(this);\r\n    },\r\n    set active(value) {\r\n        setFlag(this, FLAG_ACTIVE, value);\r\n    },\r\n    get visible() {\r\n        return !isHidden(this);\r\n    },\r\n    set visible(value) {\r\n        setFlag(this, FLAG_VISIBLE, value);\r\n    },\r\n    get value() {\r\n        return _(this).value;\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    set value(value) {\r\n        setValue(this, value);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    setValue: function (value) {\r\n        return setValue(this, value);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    contains: function (control) {\r\n        for (var cur = control; cur && cur !== this; cur = cur.parent);\r\n        return !!cur;\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    getTemplateContext: function (raw) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var proto = Object.getPrototypeOf(self);\r\n        var values = {};\r\n        if (raw) {\r\n            var copyValue = function (prop) {\r\n                values[prop] = self[prop];\r\n            };\r\n            Object.getOwnPropertyNames(self).forEach(copyValue);\r\n            Object.getOwnPropertyNames(state.options).forEach(copyValue);\r\n            extend(values, state.values);\r\n            values.value = state.value;\r\n        } else {\r\n            extend(values, self);\r\n        }\r\n        each(values, function (i) {\r\n            if (!(i in proto) && !matchWord(i, CONST_PROPS)) {\r\n                defineGetterProperty(values, i, function () {\r\n                    listenProperty(proto, i);\r\n                    return self[i];\r\n                });\r\n            }\r\n        });\r\n        return values;\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    getElementForRole: function (role) {\r\n        return _(this).container.renderer.getElementForRole(this, role);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    hasRole: function (role) {\r\n        return !!this.getElementForRole(role);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    on: function (event, handler) {\r\n        return _(this).container.add(this, event, handler);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    watch: function (prop, handler, fireInit) {\r\n        var self = this;\r\n        listenProperty(Object.getPrototypeOf(self), prop);\r\n        if (isFunction(handler)) {\r\n            self.on('propertyChange', function (e) {\r\n                if (prop in e.oldValues) {\r\n                    handler.call(self, e.newValues[prop], e.oldValues[prop], prop, self);\r\n                }\r\n            });\r\n            if (fireInit) {\r\n                handler.call(self, self[prop], null, prop, self);\r\n            }\r\n        }\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    focus: function () {\r\n        if (isEnabled(this)) {\r\n            dom.focus(this.element);\r\n        }\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    validate: function () {\r\n        return resolve(validateAll(this));\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    execute: function (value) {\r\n        var self = this;\r\n        if (!isEnabled(self) || isHidden(self) || executingControls.has(self)) {\r\n            return reject();\r\n        }\r\n        if (value !== undefined) {\r\n            self.value = value;\r\n        }\r\n        var finish = function (resolved, data) {\r\n            executingControls.delete(self);\r\n            if (resolved) {\r\n                emitEvent(self, 'executed', { data }, unhandlaebleOption);\r\n                if (self.parent) {\r\n                    emitEvent(self.parent, 'childExecuted', { control: self }, { bubbles: true, handleable: false });\r\n                }\r\n            }\r\n            emitEvent(self, 'afterExecute', resolved, unhandlaebleOption);\r\n        };\r\n        var run = function () {\r\n            var promise;\r\n            emitEvent(self, 'beforeExecute', null, unhandlaebleOption);\r\n            executingControls.add(self);\r\n            try {\r\n                var command = _(self).options.execute;\r\n                if (typeof command === 'string') {\r\n                    promise = dom.emit(command, self.value, true);\r\n                } else if (isFunction(command)) {\r\n                    // @ts-ignore: type inference issue\r\n                    promise = command.call(self, self);\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n                promise = reject(e);\r\n            }\r\n            if (self.waitForExecution && isThenable(promise)) {\r\n                promise = lock(self.element, promise, function () {\r\n                    return emitEvent(self, 'cancel') || reject();\r\n                });\r\n                always(promise, finish);\r\n                return promise;\r\n            }\r\n            finish(true);\r\n            return resolve();\r\n        };\r\n        var promise = validateAll(self);\r\n        return promise ? promise.then(run) : run();\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    reset: function () {\r\n        foreachControl(this, reset);\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    append: function (control, clear) {\r\n        var self = this;\r\n        if (clear) {\r\n            each(self.controls.slice(0), function (i, v) {\r\n                v.destroy();\r\n            });\r\n        }\r\n        appendControls(_(self).container, self, makeArray(control));\r\n    },\r\n    /** @this {ZetaUI.UIControl} */\r\n    destroy: function () {\r\n        var self = this;\r\n        if (self.pending) {\r\n            cancelLock(self.element, true);\r\n        }\r\n        always(emitEvent(self, 'beforeDestroy'), function () {\r\n            var container = _(self).container;\r\n            mapRemove(importedControls, self);\r\n            foreachControl(self, function (v) {\r\n                var state = _(v);\r\n                var species = mapGet(speciesMap, Object.getPrototypeOf(v));\r\n                delete v.all[v.name];\r\n                if (v.parent && v.parent.all[v.name] === v) {\r\n                    delete v.parent.all[v.name];\r\n                }\r\n                each(state.exports, function (i, w) {\r\n                    delete v.context[w];\r\n                });\r\n                species.delete(v);\r\n                container.delete(self);\r\n            });\r\n            if (self.parent) {\r\n                var arr = self.parent.controls;\r\n                arr.splice(arr.indexOf(self), 1);\r\n                container.renderer.remove(self);\r\n                clearFlag(self.parent);\r\n                emitStateChange(self.parent);\r\n            } else {\r\n                // ensure all other resources can be garbage collected\r\n                setTimeout(function () {\r\n                    container.destroy();\r\n                });\r\n                removeNode(container.autoDestroy ? container.element : self.element);\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\ndefineObservableProperty(UIControl.prototype, 'element');\r\n\r\neach('icon label errors placeholder description', function (i, v) {\r\n    listenProperty(UIControl.prototype, v);\r\n});\r\n\r\ndefineInheritedProperty({\r\n    showIcon: 'auto',\r\n    showText: true,\r\n    hideDisabledChild: false,\r\n    hideCalloutOnBlur: true,\r\n    hideCalloutOnExecute: true,\r\n    waitForExecution: true,\r\n    enableChildren: true\r\n});\r\n\r\nexport default UIControl;\r\n\r\nexport {\r\n    createContext,\r\n    emitEvent,\r\n    emitStateChange,\r\n    emitPropertyChange,\r\n    defineInheritedProperty,\r\n    setEventHandlers,\r\n    exportControls,\r\n    foreachControl,\r\n    hasRole\r\n};\r\n","import $ from \"../include/external/jquery.js\";\r\nimport { createPrivateStore, definePrototype, extend, inherit, is, isFunction, isPlainObject, pick, ucfirst } from \"../include/zeta-dom/util.js\";\r\nimport { createNamedFunction } from \"../util/common.js\";\r\nimport { createContext, foreachControl } from \"./UIControl.js\";\r\nimport UIToolset from \"./UIToolset.js\";\r\n\r\nconst _ = createPrivateStore();\r\n\r\n/** @type {(...args: ConstructorParameters<typeof ZetaUI.UIControlSpecies>) => void} */\r\nfunction UIControlSpecies(toolset, type, baseClass, name, options) {\r\n    var ctor = createNamedFunction(ucfirst(name ? type + '_' + name.replace(/[^a-z0-9]+/gi, '_') : type), baseClass);\r\n    definePrototype(ctor, baseClass);\r\n    options = extend({}, options);\r\n\r\n    var self = this;\r\n    self.name = name || '';\r\n    self.type = type;\r\n    _(self, {\r\n        ctor: ctor,\r\n        toolset: toolset,\r\n        type: type,\r\n        name: name || options.name || type,\r\n        options: options,\r\n        handlers: pick(options, isFunction),\r\n        defaultExport: options.defaultExport || ('value' in options && 'value')\r\n    });\r\n}\r\n\r\ndefinePrototype(UIControlSpecies, {\r\n    all: function (control) {\r\n        var ctor = _(this).ctor;\r\n        var arr = [];\r\n        foreachControl(control, function (v) {\r\n            if (is(v, ctor)) {\r\n                arr[arr.length] = v;\r\n            }\r\n        });\r\n        return arr;\r\n    },\r\n    clone: function (initData) {\r\n        var clone = inherit(UIControlSpecies, this);\r\n        var cloneData = extend({}, _(this));\r\n        cloneData.options = extend({}, cloneData.options, initData);\r\n        _(clone, cloneData);\r\n        return clone;\r\n    },\r\n    render: function (element, props) {\r\n        if (isPlainObject(element)) {\r\n            props = element;\r\n            element = document.createElement('div');\r\n        } else if (typeof element === 'string') {\r\n            element = $(element)[0];\r\n        }\r\n        // @ts-ignore: type inference issue\r\n        return createContext(_, this, UIToolset.defaultRenderer, element, props);\r\n    }\r\n});\r\n\r\nexport default UIControlSpecies;\r\n","import { definePrototype, each, extend, isPlainObject, kv } from \"../include/zeta-dom/util.js\";\r\nimport { define } from \"./define.js\";\r\nimport UIControl, { exportControls, hasRole, setEventHandlers } from \"./UIControl.js\";\r\nimport UIControlSpecies from \"./UIControlSpecies.js\";\r\n\r\nconst exportedLabels = {};\r\n\r\nfunction addLabels(obj, language, key, value) {\r\n    if (isPlainObject(key)) {\r\n        each(key, addLabels.bind(null, obj, language));\r\n    } else {\r\n        var dict = obj[key] || (obj[key] = {});\r\n        dict[language || 'default'] = value;\r\n    }\r\n}\r\n\r\n/** @type {(...args: ConstructorParameters<typeof ZetaUI.UIToolset>) => void} */\r\nfunction UIToolset(name, options) {\r\n    var self = this;\r\n    var labels = name ? exportedLabels[name] || (exportedLabels[name] = {}) : {};\r\n    self.name = name || '';\r\n    self.labels = labels;\r\n    self.options = extend({}, options);\r\n    addLabels(labels, 'default', self.options.labels || {});\r\n}\r\n\r\ndefinePrototype(UIToolset, {\r\n    use: function () {\r\n        return this;\r\n    },\r\n    on: function (event, handler) {\r\n        extend(this.options, isPlainObject(event) || kv(event, handler));\r\n    },\r\n    i18n: function (language, key, value) {\r\n        addLabels(this.labels, language, key, value);\r\n    },\r\n    import: function (id, options) {\r\n        // @ts-ignore: type inference issue\r\n        return new UIControlSpecies(this, 'import', UIControl, id, options || {});\r\n    },\r\n    export: function () {\r\n        // @ts-ignore: type inference issue\r\n        exportControls.apply(null, arguments);\r\n    }\r\n});\r\n\r\nextend(UIToolset, {\r\n    define: define,\r\n    hasRole: hasRole,\r\n    i18n: function (toolset, language, key, value) {\r\n        var dict = exportedLabels[toolset] || (exportedLabels[toolset] = {});\r\n        addLabels(dict, language, key, value);\r\n    }\r\n});\r\n\r\nexport default UIToolset;\r\n","import { definePrototype, each, extend, is, isFunction, kv, makeArray, ucfirst } from \"../include/zeta-dom/util.js\";\r\nimport ArgumentIterator from \"./ArgumentIterator.js\";\r\nimport { setDefaultTemplate } from \"../renderer/default/index.js\";\r\nimport UIControl, { setEventHandlers } from \"./UIControl.js\";\r\nimport UIControlSpecies from \"./UIControlSpecies.js\";\r\nimport UIToolset from \"./UIToolset.js\";\r\nimport { createNamedFunction } from \"../util/common.js\";\r\n\r\nconst definedType = {};\r\n\r\nfunction defineInternal(type, options) {\r\n    if (definedType[type]) {\r\n        throw new Error(type + ' already defined');\r\n    }\r\n    var specs = extend({}, options);\r\n    var defaultOptions = {};\r\n    var handlers = {};\r\n    setDefaultTemplate(type, specs.template || '', specs.templates);\r\n    each(specs, function (i, v) {\r\n        if (isFunction(v) && i !== 'parseOptions') {\r\n            handlers[i] = v;\r\n        } else if (i !== 'template' && i !== 'parseOptions') {\r\n            defaultOptions[i] = v;\r\n            delete specs[i];\r\n        }\r\n    });\r\n    specs.defaultOptions = defaultOptions;\r\n    setEventHandlers(type, handlers);\r\n    return specs;\r\n}\r\n\r\n/**\r\n * @param {string} type\r\n * @param {ZetaUI.UIControlTypeOptions} options\r\n */\r\nexport function defineLayout(type, options) {\r\n    defineInternal(type, options);\r\n}\r\n\r\n/**\r\n * @param {string} type\r\n * @param {ZetaUI.UIControlTypeOptions} options\r\n */\r\nexport function define(type, options) {\r\n    var ctor = createNamedFunction(ucfirst(type), UIControl);\r\n    var specs = defineInternal(type, options);\r\n    var create = function () {\r\n        var iter = new ArgumentIterator(makeArray(arguments));\r\n        var name = iter.string();\r\n        var options = {};\r\n        if (specs.parseOptions) {\r\n            specs.parseOptions(options, iter);\r\n        }\r\n        extend(options, iter.next('object') && iter.value);\r\n        return new UIControlSpecies(is(this, UIToolset) || new UIToolset(), type, ctor, name || '', extend({}, specs.defaultOptions, options));\r\n    };\r\n    definePrototype(UIToolset, kv(type, create));\r\n    definePrototype(ctor, UIControl);\r\n    create.prototype = ctor.prototype;\r\n    return create;\r\n}\r\n","import { is, createPrivateStore, noop } from \"../include/zeta-dom/util.js\";\r\nimport UIControl, { emitStateChange } from \"./UIControl.js\";\r\n\r\nconst FLAG_NAMES = 'enabled active visible'.split(' ');\r\nconst FLAG_ENABLED = 1;\r\nconst FLAG_ACTIVE = 2;\r\nconst FLAG_VISIBLE = 4;\r\n\r\nconst computeFn = [isEnabled, isActive, isHidden];\r\nconst _ = createPrivateStore();\r\n\r\nfunction initFlagState(component, state) {\r\n    _(component, state);\r\n}\r\n\r\nfunction getFlag(control, flag, callback) {\r\n    var state = _(control);\r\n    var bit = state.flag;\r\n    var cur = (bit & flag) > 0;\r\n    // @ts-ignore: boolean arithmetics\r\n    if ((state.flag |= (flag << 8)) !== bit && (cur ^ !!callback(state))) {\r\n        state.flag ^= flag;\r\n        if (state.inited2) {\r\n            emitStateChange(control, true);\r\n        }\r\n        return !cur;\r\n    }\r\n    return cur;\r\n}\r\n\r\nfunction setFlag(control, flag, value) {\r\n    _(control)[FLAG_NAMES[flag >> 1]] = value;\r\n    clearFlag(control, flag);\r\n}\r\n\r\nfunction clearFlag(control, flags) {\r\n    _(control).flag &= 0xff;\r\n    if (flags) {\r\n        computeFn.forEach(function (v, i) {\r\n            return (flags & (1 << i)) && v(control);\r\n        });\r\n    }\r\n}\r\n\r\nfunction isEnabled(control) {\r\n    return getFlag(control, FLAG_ENABLED, function (state) {\r\n        if (isDisabledByToolset(control) || !state.container.renderer.isEnabled(control)) {\r\n            return false;\r\n        }\r\n        if (control.requireChildControls && (!control.controls.some(isEnabled) || control.controls.every(isHidden))) {\r\n            return false;\r\n        }\r\n        return state.enabled !== false && (state.options.enabled || noop).call(control, control) !== false;\r\n    });\r\n}\r\n\r\nfunction isActive(control) {\r\n    return getFlag(control, FLAG_ACTIVE, function (state) {\r\n        return state.active || (state.options.active || noop).call(control, control);\r\n    });\r\n}\r\n\r\nfunction isHidden(control) {\r\n    return getFlag(control, FLAG_VISIBLE, function (state) {\r\n        if (isDisabledByToolset(control)) {\r\n            return true;\r\n        }\r\n        if (!isEnabled(control)) {\r\n            var hiddenWhenDisabled = control.hiddenWhenDisabled;\r\n            if (hiddenWhenDisabled || (hiddenWhenDisabled !== false && control.parent && control.parent.hideDisabledChild)) {\r\n                return true;\r\n            }\r\n        }\r\n        return state.visible === false || (state.options.visible || noop).call(control, control) === false;\r\n    });\r\n}\r\n\r\nfunction isDisabledByToolset(control) {\r\n    return getFlag(control, 8, function (state) {\r\n        var toolsetState = state.toolsetState;\r\n        return toolsetState && (isEnabled(toolsetState) === false || (control.realm && !toolsetState[control.realm]));\r\n    });\r\n}\r\n\r\nexport {\r\n    FLAG_ENABLED,\r\n    FLAG_ACTIVE,\r\n    FLAG_VISIBLE,\r\n    initFlagState,\r\n    clearFlag,\r\n    setFlag,\r\n    isEnabled,\r\n    isActive,\r\n    isHidden,\r\n    isDisabledByToolset\r\n};\r\n","import zeta from \"zeta-dom\";const _defaultExport = zeta; export default _defaultExport;","import $ from \"../include/external/jquery.js\";\r\nimport { each, extend, is, isPlainObject, keys, matchWord, setTimeoutOnce } from \"../include/zeta-dom/util.js\";\r\nimport { bind, getRect, containsOrEquals, isVisible, getScrollParent, comparePosition, createTreeWalker, iterateNode, toPlainRect } from \"../include/zeta-dom/domUtil.js\";\r\n\r\nconst FLIP_POS = {\r\n    top: 'bottom',\r\n    left: 'right',\r\n    right: 'left',\r\n    bottom: 'top'\r\n};\r\nconst DIR_SIGN = {\r\n    top: -1,\r\n    left: -1,\r\n    right: 1,\r\n    bottom: 1\r\n};\r\nconst root = document.documentElement;\r\nconst snaps = new Map();\r\n\r\nfunction cssFromPoint(x, y, origin, parent) {\r\n    var refRect = getRect(is(parent || origin, Node) || window);\r\n    var dirX = matchWord(origin || y, 'left right') || 'left';\r\n    var dirY = matchWord(origin || y, 'top bottom') || 'top';\r\n    var style = {};\r\n    y = (((x.top || x.clientY || x.y || y) | 0) - refRect.top);\r\n    x = (((x.left || x.clientX || x.x || x) | 0) - refRect.left);\r\n    style[dirX] = (dirX === 'left' ? x : refRect.width - x) + 'px';\r\n    style[dirY] = (dirY === 'top' ? y : refRect.height - y) + 'px';\r\n    style[FLIP_POS[dirX]] = 'auto';\r\n    style[FLIP_POS[dirY]] = 'auto';\r\n    return style;\r\n}\r\n\r\nfunction position(element, to, dir, within, offset) {\r\n    if (!containsOrEquals(root, element)) {\r\n        document.body.appendChild(element);\r\n    }\r\n    $(element).css({\r\n        position: 'fixed',\r\n        maxWidth: '',\r\n        maxHeight: ''\r\n    });\r\n    var oDirX = matchWord(dir, 'left right center') || 'left';\r\n    var oDirY = matchWord(dir, 'top bottom center') || 'bottom';\r\n    var inset = matchWord(dir, 'inset-x inset-y inset') || (FLIP_POS[oDirY] ? 'inset-x' : 'inset-y');\r\n    var refRect = isPlainObject(to) || !to ? toPlainRect((to.left || to.clientX || to.x) | 0, (to.right || to.clientY || to.y) | 0) : getRect(to);\r\n    if (offset && inset !== 'inset') {\r\n        refRect = inset === 'inset-x' ? refRect.expand(0, offset) : refRect.expand(offset, 0);\r\n    }\r\n    var winRect = inset === 'inset' ? refRect.expand(-offset) : getRect(within);\r\n    var elmRect = getRect(element, true);\r\n    var margin = {};\r\n    var point = {};\r\n    var style = {\r\n        transform: ''\r\n    };\r\n    var fn = function (dir, inset, p, pSize, pMax, sTransform) {\r\n        style[pMax] = winRect[pSize] + margin[p] - margin[FLIP_POS[p]] - offset;\r\n        if (!FLIP_POS[dir]) {\r\n            var center = (refRect[FLIP_POS[p]] + refRect[p]) / 2;\r\n            dir = center - winRect[p] < elmRect[pSize] / 2 ? p : winRect[FLIP_POS[p]] - center < elmRect[pSize] / 2 ? FLIP_POS[p] : '';\r\n            if (!dir) {\r\n                style.transform += ' ' + sTransform;\r\n            }\r\n            point[p] = dir ? winRect[dir] : center + margin[p];\r\n            return dir;\r\n        }\r\n        // determine cases of 'normal', 'flip' and 'fit' by available rooms\r\n        var rDir = inset ? FLIP_POS[dir] : dir;\r\n        if (refRect[dir] * DIR_SIGN[rDir] + elmRect[pSize] <= winRect[rDir] * DIR_SIGN[rDir]) {\r\n            point[p] = refRect[dir] + margin[FLIP_POS[rDir]];\r\n        } else if (refRect[FLIP_POS[dir]] * DIR_SIGN[rDir] - elmRect[pSize] > winRect[FLIP_POS[rDir]] * DIR_SIGN[rDir]) {\r\n            dir = FLIP_POS[dir];\r\n            point[p] = refRect[dir] + margin[rDir];\r\n        } else {\r\n            point[p] = winRect[dir];\r\n            style[pMax] = inset ? style[pMax] : Math.abs(refRect[dir] - point[p]) - (DIR_SIGN[dir] * margin[dir]);\r\n            return dir;\r\n        }\r\n        if (!inset) {\r\n            dir = FLIP_POS[dir];\r\n        }\r\n        style[pMax] = Math.abs(winRect[FLIP_POS[dir]] - point[p]);\r\n        return dir;\r\n    };\r\n\r\n    var elmRectNoMargin = getRect(element);\r\n    keys(FLIP_POS).forEach(function (v) {\r\n        margin[v] = elmRect[v] - elmRectNoMargin[v];\r\n    });\r\n    var dirX = fn(oDirX, FLIP_POS[oDirY] && inset === 'inset-x', 'left', 'width', 'maxWidth', 'translateX(-50%)');\r\n    var dirY = fn(oDirY, FLIP_POS[oDirX] && inset === 'inset-y', 'top', 'height', 'maxHeight', 'translateY(-50%)');\r\n    $(element).css(extend(style, cssFromPoint(point, dirX + ' ' + dirY)));\r\n}\r\n\r\nfunction snapToElement(element, options) {\r\n    if (isVisible(element) && (options.to === window || isVisible(options.to))) {\r\n        var dir = options.dir;\r\n        if (dir === 'auto') {\r\n            if (options.to === window) {\r\n                dir = 'center inset';\r\n            } else {\r\n                var scrollParent = getScrollParent(options.to);\r\n                var winRect = getRect();\r\n                var rect = getRect(scrollParent === root ? options.to : root);\r\n                var area = [winRect.height * (rect.left - winRect.left), winRect.height * (winRect.right - rect.right), winRect.width * (rect.top - winRect.top), winRect.width * (winRect.bottom - rect.bottom)];\r\n                dir = 'left right top bottom'.split(' ')[area.indexOf(Math.max.apply(null, area))] + ' center';\r\n            }\r\n        }\r\n        position(element, options.to, dir, window, options.margin);\r\n    }\r\n}\r\n\r\nfunction snap(element, to, dir, margin) {\r\n    to = to || root;\r\n    var prop = {\r\n        to: to,\r\n        dir: dir || 'left bottom',\r\n        margin: margin || 0\r\n    };\r\n    snaps.set(element, prop);\r\n    if (!containsOrEquals(root, element)) {\r\n        document.body.appendChild(element);\r\n    }\r\n    setZIndexOver(element, to === window ? document.body : to);\r\n    snapToElement(element, prop);\r\n}\r\n\r\nfunction unsnap(element) {\r\n    snaps.delete(element);\r\n}\r\n\r\nfunction getZIndex(element, pseudo) {\r\n    var style = getComputedStyle(element, pseudo || null);\r\n    return matchWord(style.position, 'absolute fixed relative') && style.zIndex !== 'auto' ? parseInt(style.zIndex) : -1;\r\n}\r\n\r\nfunction getZIndexOver(over) {\r\n    var maxZIndex = -1;\r\n    var iterator = createTreeWalker(document.body, 1, function (v) {\r\n        if (comparePosition(v, over, true)) {\r\n            return 2;\r\n        }\r\n        var zIndex = getZIndex(v);\r\n        if (zIndex >= 0) {\r\n            maxZIndex = Math.max(maxZIndex, zIndex);\r\n            return 2;\r\n        }\r\n        maxZIndex = Math.max(maxZIndex, getZIndex(v, '::before'), getZIndex(v, '::after'));\r\n        return 1;\r\n    });\r\n    iterateNode(iterator);\r\n    return maxZIndex + 1;\r\n}\r\n\r\nfunction setZIndexOver(element, over) {\r\n    element.style.zIndex = getZIndexOver(over);\r\n    if (getComputedStyle(element).position === 'static') {\r\n        element.style.position = 'relative';\r\n    }\r\n}\r\n\r\nfunction updateSnaps() {\r\n    each(snaps, snapToElement);\r\n}\r\n\r\nbind(window, 'resize scroll orientationchange mousemove wheel keyup touchend transitionend', function () {\r\n    setTimeoutOnce(updateSnaps);\r\n}, { passive: true });\r\n\r\nexport {\r\n    getZIndex,\r\n    getZIndexOver,\r\n    setZIndexOver,\r\n    position,\r\n    snap,\r\n    unsnap\r\n};\r\n","import { containsOrEquals } from \"../include/zeta-dom/domUtil.js\";\r\nimport UIControlSpecies from \"../core/UIControlSpecies.js\";\r\n\r\nexport function parseExecute(options, iter) {\r\n    options.execute = iter.fn();\r\n}\r\n\r\nexport function parseControlsAndExecute(options, iter) {\r\n    options.controls = iter.nextAll(UIControlSpecies);\r\n    parseExecute(options, iter);\r\n}\r\n\r\nexport function parseIconAndExecute(options, iter) {\r\n    options.icon = iter.string();\r\n    parseExecute(options, iter);\r\n}\r\n\r\n/**\r\n * @param {Zeta.ZetaEvent & ZetaUI.UIEventContext} e\r\n * @param {string} role\r\n */\r\nexport function shouldExecuteOnClick(e, role) {\r\n    var elm = e.context.getElementForRole(role);\r\n    return elm && containsOrEquals(elm, e.target);\r\n}\r\n","import { defineLayout } from \"./core/define.js\";\r\nimport { runCSSTransition } from \"./include/zeta-dom/cssUtil.js\";\r\n\r\nfunction getOverlayElement(self) {\r\n    return self.getElementForRole('overlay') || self.element;\r\n}\r\n\r\ndefineLayout('overlay', {\r\n    init: function (e, self) {\r\n        var target = getOverlayElement(self);\r\n        runCSSTransition(target, 'open');\r\n    },\r\n    focusreturn: function (e, self) {\r\n        var target = getOverlayElement(self);\r\n        runCSSTransition(target, 'pop', true);\r\n    },\r\n    beforeDestroy: function (e, self) {\r\n        var target = getOverlayElement(self);\r\n        return runCSSTransition(target, 'closing');\r\n    }\r\n});\r\n\r\nexport default null;\r\n","import dom from \"./include/zeta-dom/dom.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\nimport { snap, setZIndexOver } from \"./util/cssUtil.js\";\r\nimport _Overlay from \"./Overlay.js\";\r\n\r\nfunction closeDialog(e, self) {\r\n    self.destroy();\r\n}\r\n\r\nconst Dialog = define('dialog', {\r\n    template: '<div class=\"zui-root\"><z:overlay class=\"zui-float zui-dialog-inner\"><div class=\"zui-dialog-content\"><h2>{{title}}</h2><z:form><p>{{description}}</p><controls></controls></z:form></div><div class=\"zui-dialog-error error hidden:{{not errorMessage}}\">{{errorMessage}}</div><controls of=\"type == buttonset\"/></z:overlay></div>',\r\n    templates: {\r\n        buttonset: '<z:buttonset class=\"zui-dialog-buttonset\"><controls of=\"danger\" show-text=\"true\"></controls><div class=\"zui-buttonset-pad\"></div><controls show-text=\"true\"></controls></z:buttonset>'\r\n    },\r\n    pinnable: true,\r\n    modal: true,\r\n    title: '',\r\n    description: '',\r\n    errorMessage: '',\r\n    parseOptions: parseControlsAndExecute,\r\n    init: function (e, self) {\r\n        var element = self.element;\r\n        var parentElement = self.parentElement;\r\n        var snapTo = parentElement && self.pinnable && screen.availWidth >= 600 && screen.availHeight >= 600 && UIToolset.hasRole(parentElement, 'button buttonlike') ? parentElement : window;\r\n\r\n        document.body.appendChild(element);\r\n        if (parentElement) {\r\n            dom.retainFocus(parentElement, element);\r\n        }\r\n        if (self.modal) {\r\n            dom.setModal(element);\r\n        }\r\n        snap(element, snapTo, 'auto', 10);\r\n        setZIndexOver(element, parentElement || document.activeElement);\r\n        setTimeout(function () {\r\n            dom.focus(element);\r\n        });\r\n    },\r\n    error: function (e, self) {\r\n        self.errorMessage = (e.error || '').message || e.error || '';\r\n        e.handled();\r\n    },\r\n    focusout: closeDialog,\r\n    escape: closeDialog,\r\n    afterExecute: function (e, self) {\r\n        if (e.data) {\r\n            if (self.pending) {\r\n                self.on('asyncEnd', function () {\r\n                    closeDialog(e, self);\r\n                });\r\n            } else {\r\n                closeDialog(e, self);\r\n            }\r\n        }\r\n    },\r\n    enter: function (e, self) {\r\n        return self.execute();\r\n    }\r\n});\r\n\r\nexport default Dialog;\r\n","import { define } from \"./core/define.js\";\n\nconst T_SHOWICON = '[ @global.showIcon ?? showIcon ]';\nconst T_SHOWTEXT = '[ @global.showText ?? showText ]';\nconst T_ICON = '[ @global.icon ?? icon ]';\n\nconst Label = define('label', {\n    template: '<span class=\"hidden:{{[ ! ' + T_SHOWICON + ' || ! ' + T_ICON + ' ] && ! ' + T_SHOWTEXT + '}}\" title=\"{{tooltip || label}}\"><i class=\"material-icons hidden:{{[ ! ' + T_ICON + ' && ' + T_SHOWICON + ' != true ] || ! ' + T_SHOWICON + '}}\">{{' + T_ICON + '}}</i>{{? ' + T_SHOWTEXT + ' [ @global.label ?? label ] \"\"}}</span>',\n    showIcon: 'auto',\n    showText: true,\n    defaultExport: 'label'\n});\n\nexport default Label;\n","import { define } from \"./core/define.js\";\nimport { parseIconAndExecute, shouldExecuteOnClick } from \"./util/defineUtil.js\";\nimport _Label from \"./Label.js\";\n\nfunction executeButton(e, self) {\n    if (e.type !== 'click' || shouldExecuteOnClick(e, 'button')) {\n        return self.execute();\n    }\n}\n\nconst Button = define('button', {\n    template: '<button class=\"danger:{{danger}}\"><z:label></z:label><children/></button>',\n    danger: false,\n    defaultExport: 'execute',\n    parseOptions: parseIconAndExecute,\n    enter: executeButton,\n    click: executeButton\n});\n\nexport default Button;\n","import { define } from \"./core/define.js\";\r\nimport _ from \"./Button.js\";\r\n\r\nconst SubmitButton = define('submit', {\r\n    template: '<z:button/>',\r\n    defaultExport: 'execute',\r\n    parseOptions: function (options, iter) {\r\n        options.icon = iter.string();\r\n        options.execute = function (self) {\r\n            for (var cur = self; cur && !cur.hasRole('form'); cur = cur.parent);\r\n            return cur && cur.execute();\r\n        };\r\n    }\r\n});\r\n\r\nexport default SubmitButton;\r\n","import { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\n\r\nconst ButtonSet = define('buttonset', {\r\n    templates: {\r\n        textbox: '<z:textbox show-placeholder=\"auto\"/>'\r\n    },\r\n    requireChildControls: true,\r\n    hiddenWhenDisabled: true,\r\n    parseOptions: parseControlsAndExecute\r\n});\r\n\r\nexport default ButtonSet;\r\n","import { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\n\r\nconst GenericComponent = define('generic', {\r\n    parseOptions: parseControlsAndExecute\r\n});\r\n\r\nexport default GenericComponent;\r\n","import { defineLayout } from \"../../core/define.js\";\r\nimport { either } from \"../../include/zeta-dom/util.js\";\r\nimport include from \"../../include/external/zeta-editor.js\";\r\n\r\nfunction setValue(control, value) {\r\n    var editor = control.editor;\r\n    if (!editor) {\r\n        return;\r\n    }\r\n    if (!editor.focused(true) && value !== editor.getValue()) {\r\n        editor.setValue(value);\r\n    }\r\n    control.setValue(editor.getValue());\r\n}\r\n\r\ndefineLayout('contenteditable', {\r\n    template: '<div class=\"zui-editable\" contenteditable spellcheck=\"{{spellcheck}}\"></div>',\r\n    init: function (e, self) {\r\n        var target = self.getElementForRole('contenteditable') || self.element;\r\n        self.editor = new include.Editor(target, self.editorOptions);\r\n        self.editor.enable('stateclass', {\r\n            target: self.element,\r\n            focused: ''\r\n        });\r\n        self.editor.on('contentChange', function () {\r\n            if (self.setValue(self.editor.getValue())) {\r\n                self.execute();\r\n            }\r\n        });\r\n        setValue(self, self.value);\r\n    },\r\n    stateChange: function (e, self) {\r\n        if (either(self.editor.enabled(), self.enabled)) {\r\n            self.editor[self.enabled ? 'enable' : 'disable']();\r\n        }\r\n    },\r\n    focusin: function (e, self) {\r\n        if (!self.editor.focused()) {\r\n            self.editor.focus();\r\n        }\r\n    },\r\n    setValue: function (e, self) {\r\n        setValue(self, e.newValue);\r\n        e.handled();\r\n    },\r\n    validate: function (e, self) {\r\n        return self.editor.validate();\r\n    }\r\n});\r\n\r\nexport default null;\r\n","import { defineLayout } from \"./core/define.js\";\r\nimport { matchSelector } from \"./include/zeta-dom/domUtil.js\";\r\nimport _Label from \"./Label.js\";\r\n\r\ndefineLayout('textboxlike', {\r\n    template: '<label class=\"zui-textbox keep-placeholder:{{showPlaceholder == always && ! $placeholder}}\"><z:label show-text=\"false\" show-icon=\"auto\"></z:label><div class=\"zui-textbox-wrapper\" data-label=\"{{? $placeholder label}}\"><div class=\"zui-textbox-inner\"><children></children><div class=\"zui-textbox-placeholder\">{{placeholder || label}}</div></div><div class=\"zui-textbox-error\"></div><div class=\"zui-textbox-clear\"></div></div></label>',\r\n    click: function (e, self) {\r\n        if (matchSelector(e.target, '.zui-textbox-clear')) {\r\n            self.execute('');\r\n            self.editor.focus();\r\n        }\r\n    }\r\n});\r\n\r\nexport default null;\r\n","import { define } from \"./core/define.js\";\r\nimport { each, extend, isFunction, kv } from \"./include/zeta-dom/util.js\";\r\nimport { parseExecute } from \"./util/defineUtil.js\";\r\nimport _contenteditable from \"./renderer/default/contenteditable.js\";\r\nimport _TextBoxLike from \"./TextBoxLike.js\";\r\n\r\nconst PRESET_KEY = '__preset__';\r\nconst DEFAULT_PRESET = {\r\n    overrides: {\r\n        getValue: function () {\r\n            return this.extractText();\r\n        }\r\n    }\r\n};\r\n\r\nfunction initOptions(preset, options) {\r\n    var presetDefinition = {};\r\n    var originalInit = (options || '').init;\r\n\r\n    options = extend({\r\n        inline: true,\r\n        defaultOptions: false,\r\n        disallowedElement: '*'\r\n    }, kv(PRESET_KEY, extend({}, options)));\r\n    each(preset, function (i, v) {\r\n        (isFunction(v) || i === 'options' || i === 'commands' ? presetDefinition : options)[i] = v;\r\n    });\r\n    each(options[PRESET_KEY], function (i, v) {\r\n        if (!presetDefinition.options || !(i in presetDefinition.options)) {\r\n            options[i] = v;\r\n            delete options[PRESET_KEY][i];\r\n        }\r\n    });\r\n    options.widgets = extend(options.widgets, kv(PRESET_KEY, presetDefinition));\r\n    options.init = function (e) {\r\n        var presetWidget = e.typer.getStaticWidget(PRESET_KEY);\r\n        each(preset.overrides, function (i, v) {\r\n            e.typer[i] = function (value) {\r\n                return v.call(this, presetWidget, value);\r\n            };\r\n        });\r\n        if (isFunction(originalInit)) {\r\n            originalInit.call(options, e);\r\n        }\r\n    };\r\n    return options;\r\n}\r\n\r\nconst TextBox = define('textbox', {\r\n    template: '<z:textboxlike><z:contenteditable spellcheck=\"false\"></z:contenteditable></z:textboxlike>',\r\n    hideCalloutOnExecute: false,\r\n    preventLeave: true,\r\n    value: '',\r\n    placeholder: '',\r\n    parseOptions: parseExecute,\r\n    init: function (e, self) {\r\n        self.editorOptions = initOptions(self.preset || DEFAULT_PRESET, self.options);\r\n        self.watch('editor', function (editor) {\r\n            self.options = editor.getStaticWidget(PRESET_KEY).options;\r\n            self.editorOptions.options = extend({}, self.options);\r\n        });\r\n    },\r\n    reset: function (e, self) {\r\n        self.options = self.editor.getStaticWidget(PRESET_KEY).options;\r\n        extend(self.options, self.editorOptions.options);\r\n    }\r\n});\r\n\r\nexport default TextBox;\r\n","import { define, definePrototype, extend, is, isFunction, resolve } from \"./include/zeta-dom/util.js\";\r\nimport { snap } from \"./util/cssUtil.js\";\r\nimport ArgumentIterator from \"./core/ArgumentIterator.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport Dialog from \"./Dialog.js\";\r\nimport Button from \"./Button.js\";\r\nimport SubmitButton from \"./SubmitButton.js\";\r\nimport ButtonSet from \"./ButtonSet.js\";\r\nimport GenericComponent from \"./Generic.js\";\r\nimport TextBox from \"./TextBox.js\";\r\n\r\nvar ui = new UIToolset('dialog').use(Dialog, Button, SubmitButton, ButtonSet, GenericComponent, TextBox);\r\nvar currentNotify;\r\n\r\nui.i18n('en', {\r\n    action: 'OK',\r\n    cancel: 'Cancel',\r\n    leaveForm: 'There are unsubmitted information on the page. Are you sure to leave?'\r\n});\r\n\r\nui.export('dialog.prompt', ui.dialog({\r\n    preventLeave: false,\r\n    data: null,\r\n    exports: 'title description errorMessage data',\r\n    controls: [\r\n        ui.textbox('value', {\r\n            hiddenWhenDisabled: true,\r\n            exports: 'enabled label'\r\n        }),\r\n        ui.buttonset(\r\n            ui.submit('action', 'done', {\r\n                defaultExport: 'label',\r\n                exports: 'icon'\r\n            }),\r\n            ui.button('cancel', 'close', {\r\n                exports: 'visible',\r\n                execute: function (self) {\r\n                    return self.all.dialog.destroy();\r\n                }\r\n            })\r\n        )\r\n    ],\r\n    execute: function (self) {\r\n        return (isFunction(self.context.callback) || resolve)(self.context.value);\r\n    }\r\n}));\r\n\r\nui.export('dialog.notify', ui.generic({\r\n    template: '<z:overlay class=\"zui-root zui-snackbar notify:{{kind}}\"><div class=\"zui-float\"><z:buttonset><z:label/><z:button icon=\"close\" show-text=\"false\" show-icon=\"true\"/></z:buttonset></div></z:overlay>',\r\n    data: null,\r\n    init: function (e, self) {\r\n        if (currentNotify) {\r\n            currentNotify.destroy();\r\n        }\r\n        extend(self, self.context);\r\n        // @ts-ignore: custom control property\r\n        snap(e.target, self.within || document.body, 'top center inset');\r\n        // @ts-ignore: custom control property\r\n        if (self.timeout) {\r\n            setTimeout(function () {\r\n                self.destroy();\r\n                // @ts-ignore: custom control property\r\n            }, self.timeout);\r\n        }\r\n        currentNotify = self;\r\n    },\r\n    click: function (e, self) {\r\n        self.destroy();\r\n    }\r\n}));\r\n\r\n\r\n/* --------------------------------------\r\n * Exports\r\n * -------------------------------------- */\r\n\r\nfunction initPrompt(targetUI, type, value, message, iter) {\r\n    targetUI = is(targetUI, UIToolset) || ui;\r\n    return targetUI.import('dialog.prompt').render({\r\n        value: value,\r\n        valueEnabled: type === 'prompt',\r\n        valueLabel: message,\r\n        cancelVisible: type !== 'alert',\r\n        action: iter.string(),\r\n        dialogTitle: iter.string(),\r\n        dialogDescription: type === 'prompt' ? iter.string() : message,\r\n        dialogData: iter.next('object') && iter.value,\r\n        callback: iter.fn()\r\n    }).dialog;\r\n}\r\n\r\nfunction alert(message, action, title, data, callback) {\r\n    return initPrompt(this, 'alert', true, message, new ArgumentIterator([action, title, data, callback]));\r\n}\r\n\r\nfunction confirm(message, action, title, data, callback) {\r\n    return initPrompt(this, 'confirm', true, message, new ArgumentIterator([action, title, data, callback]));\r\n}\r\n\r\nfunction prompt(message, value, action, title, description, data, callback) {\r\n    return initPrompt(this, 'prompt', value, message, new ArgumentIterator([action, title, description, data, callback]));\r\n}\r\n\r\nfunction notify(message, kind, timeout, within, data) {\r\n    var targetUI = is(this, UIToolset) || ui;\r\n    var iter = new ArgumentIterator([kind, timeout, within, data]);\r\n    return targetUI.import('dialog.notify').render({\r\n        label: message,\r\n        kind: iter.string() || true,\r\n        timeout: iter.next('number') && iter.value,\r\n        within: iter.next(Node) && iter.value,\r\n        data: iter.next('object') && iter.value\r\n    }).dialog;\r\n}\r\n\r\nconst factory = { alert, confirm, prompt, notify };\r\ndefine(UIToolset, factory);\r\ndefinePrototype(UIToolset, factory);\r\n\r\nexport {\r\n    alert,\r\n    confirm,\r\n    prompt,\r\n    notify\r\n};\r\n","import { define } from \"./core/define.js\";\r\nimport { each } from \"./include/zeta-dom/util.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {'previousSibling' | 'nextSibling'} prop\r\n */\r\nfunction getNextVisible(control, prop) {\r\n    for (var cur = control[prop]; cur && !cur.visible; cur = cur[prop]);\r\n    return cur;\r\n}\r\n\r\nconst ButtonList = define('buttonlist', {\r\n    template: '<div class=\"sep-before:{{showSeparatorBefore}} sep-after:{{showSeparatorAfter}}\"><children show-text=\"true\" show-icon=\"true\" controls/></div>',\r\n    templates: {\r\n        button: '<z:button><span class=\"zui-label zui-label-description\">{{description ?? [ shortcut :zui-shortcut ]}}</span></z:button>',\r\n    },\r\n    showIcon: true,\r\n    showText: true,\r\n    showSeparatorBefore: false,\r\n    showSeparatorAfter: false,\r\n    requireChildControls: true,\r\n    hiddenWhenDisabled: true,\r\n    parseOptions: parseControlsAndExecute,\r\n    stateChange: function (e, self) {\r\n        each(self.controls, function (i, v) {\r\n            if (v.type === 'buttonlist') {\r\n                var prevVisible = getNextVisible(v, 'previousSibling');\r\n                var nextVisible = getNextVisible(v, 'nextSibling');\r\n                // @ts-ignore\r\n                v.showSeparatorBefore = !!prevVisible;\r\n                // @ts-ignore\r\n                v.showSeparatorAfter = !!nextVisible && nextVisible.type !== 'buttonlist'\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\nexport default ButtonList;\r\n","import { defineLayout } from \"./core/define.js\";\r\n\r\ndefineLayout('buttonlike', {\r\n    template: '<label role=\"button\"><children/></label>'\r\n});\r\n\r\nexport default null;\r\n","import { define } from \"./core/define.js\";\r\nimport UIControlSpecies from \"./core/UIControlSpecies.js\";\r\nimport _ButtonLike from \"./ButtonLike.js\";\r\n\r\nconst Callout = define('callout', {\r\n    template: '<div><controls of=\"not parent.alwaysShowCallout && parent.controls where enabled as _enabled && _enabled.length == 1 && _enabled.0.id == id\"></controls><z:buttonlike class=\"hidden:{{[ not alwaysShowCallout ] && controls where enabled length == 1}}\"><z:label></z:label></z:buttonlike><z:menu></z:menu></div>',\r\n    requireChildControls: true,\r\n    hideCalloutOnExecute: true,\r\n    hideCalloutOnBlur: true,\r\n    alwaysShowCallout: true,\r\n    parseOptions: function (options, iter) {\r\n        options.icon = iter.string();\r\n        options.controls = iter.nextAll(UIControlSpecies);\r\n    }\r\n});\r\n\r\nexport default Callout;\r\n","import { define } from \"./core/define.js\";\r\nimport { parseExecute, shouldExecuteOnClick } from \"./util/defineUtil.js\";\r\n\r\nfunction checkboxToggleValue(e, self) {\r\n    if (e.type !== 'click' || shouldExecuteOnClick(e, 'checkbox')) {\r\n        self.value = !self.value;\r\n        return self.type === 'checkbox' ? self.execute() : e.handled();\r\n    }\r\n}\r\n\r\nconst Checkbox = define('checkbox', {\r\n    template: '<z:button class=\"checked:{{value}}\" show-icon=\"false\" show-text=\"true\"/>',\r\n    value: false,\r\n    preventLeave: true,\r\n    parseOptions: parseExecute,\r\n    click: checkboxToggleValue,\r\n    enter: checkboxToggleValue,\r\n    space: checkboxToggleValue\r\n});\r\n\r\nexport default Checkbox;\r\n","import { runCSSTransition } from \"./include/zeta-dom/cssUtil.js\";\r\nimport { bind, containsOrEquals, getClass, removeNode, setClass } from \"./include/zeta-dom/domUtil.js\";\r\nimport dom from \"./include/zeta-dom/dom.js\";\r\nimport { each, is, defineHiddenProperty, catchAsync } from \"./include/zeta-dom/util.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\nimport { position, snap } from \"./util/cssUtil.js\";\r\n\r\nfunction getNextItem(self, cur, dir) {\r\n    var arr = [];\r\n    (function getButtonList(control) {\r\n        each(control.controls, function (i, v) {\r\n            if (v.hasRole('buttonlist') && !v.hasRole('menu')) {\r\n                getButtonList(v);\r\n            } else if (v.hasRole('button') && v.enabled && v.visible) {\r\n                arr[arr.length] = v;\r\n            }\r\n        });\r\n    }(self));\r\n    var i = arr.indexOf(cur);\r\n    return arr[i < 0 ? 0 : i + dir];\r\n}\r\n\r\nfunction showCallout(self, to, dir, within, offset) {\r\n    var callout = self.callout;\r\n    if (self.parent && containsOrEquals(self.element, callout)) {\r\n        setClass(callout, 'hidden', false);\r\n        position(callout, self.element, 'right top inset-y');\r\n    } else {\r\n        if (self.calloutParent) {\r\n            snap(callout, self.calloutParent);\r\n        } else if (is(to, Node)) {\r\n            snap(callout, to, dir, offset);\r\n        } else {\r\n            position(callout, to, dir, within, offset);\r\n        }\r\n        dom.focus(callout);\r\n        if (getClass(callout, 'closing')) {\r\n            setClass(callout, 'open', false);\r\n            setClass(callout, 'closing', false);\r\n        }\r\n        catchAsync(runCSSTransition(callout, 'open'));\r\n    }\r\n}\r\n\r\nfunction hideCallout(self) {\r\n    var callout = self.callout;\r\n    if (self.parent && containsOrEquals(self.element, callout)) {\r\n        setClass(callout, 'hidden', true);\r\n    } else {\r\n        catchAsync(runCSSTransition(callout, 'closing', function () {\r\n            removeNode(callout);\r\n        }));\r\n    }\r\n    self.activeButton = null;\r\n}\r\n\r\nfunction isSubMenu(self) {\r\n    if (self.parent) {\r\n        for (var cur = self.parent; cur && cur.hasRole('buttonlist') && !cur.hasRole('menu'); cur = cur.parent);\r\n        return !cur || cur.hasRole('menu');\r\n    }\r\n}\r\n\r\nconst Menu = define('menu', {\r\n    template: '<div scrollable class=\"zui-root zui-float\"><z:buttonlist/></div>',\r\n    waitForExecution: false,\r\n    parseOptions: parseControlsAndExecute,\r\n    init: function (e, self) {\r\n        var callout = e.context.getElementForRole('menu') || self.element;\r\n        if (isSubMenu(self)) {\r\n            bind(self.element, {\r\n                mouseenter: showCallout.bind(null, self),\r\n                mouseleave: hideCallout.bind(null, self)\r\n            });\r\n        } else if (!self.parent && callout === self.element) {\r\n            defineHiddenProperty(self.context, 'showMenu', showCallout.bind(null, self));\r\n            defineHiddenProperty(self.context, 'hideMenu', hideCallout.bind(null, self));\r\n            defineHiddenProperty(self.context, 'element', callout);\r\n        } else {\r\n            self.calloutParent = callout.parentNode;\r\n            dom.retainFocus(self.element, callout);\r\n            removeNode(callout);\r\n        }\r\n        bind(self.element, 'mousemove', function () {\r\n            self.activeButton = null;\r\n        });\r\n        setClass(callout, 'is-' + self.type, true);\r\n        self.callout = callout;\r\n        self.activeButton = null;\r\n        self.watch('activeButton', function (cur, old) {\r\n            (old || {}).active = false;\r\n            (cur || {}).active = true;\r\n            (cur || self).focus();\r\n        });\r\n        hideCallout(self);\r\n    },\r\n    focusin: function (e, self) {\r\n        if (e.source === 'keyboard' && !self.parent) {\r\n            showCallout(self);\r\n            self.activeButton = getNextItem(self, self, 1);\r\n        }\r\n    },\r\n    focusout: function (e, self) {\r\n        self.activeButton = null;\r\n        if (self.hideCalloutOnBlur) {\r\n            hideCallout(self);\r\n        }\r\n    },\r\n    click: function (e, self) {\r\n        if (!containsOrEquals(self.callout, e.target)) {\r\n            showCallout(self);\r\n            e.handled();\r\n        }\r\n    },\r\n    keystroke: function (e, self) {\r\n        var cur = self.activeButton;\r\n        var dir = /^(up|down|left|right)Arrow$/.test(e.data) && RegExp.$1[0];\r\n        if (dir === 'l') {\r\n            if (!self.parent) {\r\n                e.handled();\r\n            } else if (cur) {\r\n                hideCallout(self);\r\n                e.handled();\r\n            }\r\n        } else if (dir === 'r') {\r\n            showCallout(self);\r\n            self.activeButton = cur || getNextItem(self, self, 1);\r\n            e.handled();\r\n        } else if (dir && (cur || !self.parent || self.calloutParent)) {\r\n            self.activeButton = getNextItem(self, cur, dir === 'u' ? -1 : 1) || cur;\r\n            e.handled();\r\n        }\r\n    },\r\n    childExecuted: function (e, self) {\r\n        self.activeButton = null;\r\n        // @ts-ignore: type inference issue\r\n        for (var cur = e.control; cur && cur !== self.parent; cur = cur.parent) {\r\n            if (!cur.hideCalloutOnExecute) {\r\n                return;\r\n            }\r\n        }\r\n        hideCallout(self);\r\n    },\r\n    beforeDestroy: function (e, self) {\r\n        hideCallout(self);\r\n    }\r\n});\r\n\r\nexport default Menu;\r\n","import { any, each, isPlainObject, extend, createPrivateStore } from \"./include/zeta-dom/util.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\nimport { parseTemplateConstant } from \"./util/common.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport Button from \"./Button.js\";\r\nimport ButtonLike from \"./ButtonLike.js\";\r\n\r\nconst _ = createPrivateStore();\r\n\r\nfunction setDropdownValue(dropdown, value, forceUpdate) {\r\n    var choices = _(dropdown).all(dropdown);\r\n    var defaultChoice;\r\n    var match = any(choices, function (v) {\r\n        defaultChoice = defaultChoice || v;\r\n        return v.value === value;\r\n    });\r\n    if (!match && !dropdown.allowEmpty) {\r\n        match = defaultChoice;\r\n    }\r\n    if (dropdown.setValue(match ? match.value : '') || forceUpdate) {\r\n        dropdown.hintValue = value;\r\n        dropdown.selectedText = (match && dropdown.valueAsLabel ? match : dropdown).label;\r\n        each(choices, function (i, v) {\r\n            v.selected = v === match;\r\n        });\r\n    }\r\n}\r\n\r\nfunction updateDropdownChoices(dropdown, choiceObj) {\r\n    var isArray = Array.isArray(choiceObj);\r\n    var choices = [];\r\n    each(choiceObj, function (i, v) {\r\n        choices[choices.length] = isArray && isPlainObject(v) ? v : {\r\n            value: isArray ? v : parseTemplateConstant(i),\r\n            label: v\r\n        };\r\n    });\r\n\r\n    var choiceButton = _(dropdown);\r\n    var newButtons = [];\r\n    for (var i = 0, len = choices.length - Object.keys(choiceButton.all(dropdown)).length; i < len; i++) {\r\n        newButtons[i] = choiceButton;\r\n    }\r\n    dropdown.append(newButtons);\r\n    each(choiceButton.all(dropdown), function (i, v) {\r\n        v.enabled = v.visible = !!choices[0];\r\n        extend(v, choices.shift());\r\n    });\r\n    setDropdownValue(dropdown, dropdown.hintValue, true);\r\n}\r\n\r\nconst Dropdown = define('dropdown', {\r\n    template: '<z:buttonlike label=\"{{selectedText}}\" show-text=\"true\"><z:label></z:label><z:menu></z:menu></z:buttonlike>',\r\n    requireChildControls: true,\r\n    hideCalloutOnBlur: true,\r\n    hideCalloutOnExecute: true,\r\n    preventLeave: true,\r\n    allowEmpty: true,\r\n    valueAsLabel: true,\r\n    value: '',\r\n    parseOptions: function (options, iter) {\r\n        options.icon = iter.string();\r\n        if (iter.next(Array) || iter.next(Map)) {\r\n            options.choices = iter.value;\r\n            options.value = iter.next('string') || iter.next('number') ? iter.value : '';\r\n        }\r\n        parseControlsAndExecute(options, iter);\r\n    },\r\n    init: function (e, self) {\r\n        _(self, new UIToolset(self.state.name).use(Button).button({\r\n            template: '<z:button class=\"selected:{{selected}}\" show-icon=\"true\" show-text=\"true\"/>',\r\n            execute: function (choice) {\r\n                setDropdownValue(self, choice.value);\r\n                self.execute();\r\n            }\r\n        }));\r\n        self.hintValue = self.value;\r\n        self.selectedText = self.label;\r\n        self.watch('choices', function (cur) {\r\n            updateDropdownChoices(self, cur);\r\n        }, true);\r\n    },\r\n    setValue: function (e, self) {\r\n        updateDropdownChoices(self, self.choices);\r\n        setDropdownValue(self, e.newValue);\r\n        e.handled();\r\n    }\r\n});\r\n\r\nexport default Dropdown;\r\n","import $ from \"./include/external/jquery.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport dom from \"./include/zeta-dom/dom.js\";\r\nimport { bind, containsOrEquals, getRect, matchSelector } from \"./include/zeta-dom/domUtil.js\";\r\nimport { IS_TOUCH } from \"./include/zeta-dom/env.js\";\r\nimport { extend, isFunction, reject, repeat } from \"./include/zeta-dom/util.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport TextBox from \"./TextBox.js\";\r\nimport GenericComponent from \"./Generic.js\";\r\nimport ButtonSet from \"./ButtonSet.js\";\r\nimport Menu from \"./Menu.js\";\r\nimport Dropdown from \"./Dropdown.js\";\r\nimport Button from \"./Button.js\";\r\nimport SubmitButton from \"./SubmitButton.js\";\r\nimport Label from \"./Label.js\";\r\nimport globalContext from \"./globalContext.js\";\r\n\r\nconst MS_PER_DAY = 86400000;\r\nconst TIMEZONE_OFFSET = new Date().getTimezoneOffset() * 60000;\r\nconst INPUT_TYPES = {\r\n    datetime: 'datetime-local',\r\n    day: 'date',\r\n    week: 'week',\r\n    month: 'month'\r\n};\r\nconst MONTH_NAMES = [];\r\nconst WEEKDAYS_NAMES = [];\r\n\r\nconst ui = new UIToolset('zeta.ui.datepicker').use(GenericComponent, ButtonSet, Menu, Dropdown, Button, SubmitButton, Label, TextBox);\r\nconst defaultLocale = globalContext.language;\r\n\r\nvar controls;\r\nvar callout;\r\nvar activeTyper;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction range(count, callback) {\r\n    var arr = [];\r\n    for (var i = 0; i < count; i++) {\r\n        arr[i] = callback(i);\r\n    }\r\n    return arr;\r\n}\r\n\r\nfunction loadLabels(lang) {\r\n    var key = lang || 'default';\r\n    var locale = lang || defaultLocale;\r\n    var monthFormatter = new Intl.DateTimeFormat(locale, { month: 'long' });\r\n    var weekdayFormatter = new Intl.DateTimeFormat(locale, { weekday: 'narrow' });\r\n    var importDefaultLabels = import(\r\n        /* webpackMode: \"eager\" */\r\n        \"./locale/\" + locale + \"/zeta.ui.datepicker.json\"\r\n    );\r\n    importDefaultLabels.then(function (labels) {\r\n        ui.i18n(key, labels.default);\r\n    });\r\n    range(12, function (i) {\r\n        var str = monthFormatter.format(new Date(1970, i));\r\n        MONTH_NAMES[i] = str;\r\n        ui.i18n(key, 'month_' + i, str);\r\n    });\r\n    range(7, function (i) {\r\n        var date = new Date(1970, 0, i);\r\n        WEEKDAYS_NAMES[date.getDay()] = weekdayFormatter.format(date);\r\n    });\r\n}\r\n\r\nfunction getFullYear(d) {\r\n    return d.getFullYear();\r\n}\r\n\r\nfunction getMonth(d) {\r\n    return d.getMonth();\r\n}\r\n\r\nfunction getDate(d) {\r\n    return d.getDate();\r\n}\r\n\r\nfunction getHours(d) {\r\n    return d.getHours();\r\n}\r\n\r\nfunction getMinutes(d) {\r\n    return d.getMinutes();\r\n}\r\n\r\nfunction sameMonth(x, y) {\r\n    return getFullYear(x) === getFullYear(y) && getMonth(x) === getMonth(y);\r\n}\r\n\r\nfunction parseMaxima(d) {\r\n    if (typeof d === 'string' && /^today|([+-]\\d+)(day|week|month|year)?$/g.test(d)) {\r\n        return RegExp.$1 ? stepDate(RegExp.$2 || 'day', new Date(), +RegExp.$1) : new Date();\r\n    }\r\n    d = d === null ? undefined : d instanceof Date ? d : new Date(d);\r\n    return isNaN(d) ? undefined : d;\r\n}\r\n\r\nfunction makeTime(h, m) {\r\n    var date = new Date();\r\n    date.setHours(h, m, 0, 0);\r\n    return date;\r\n}\r\n\r\nfunction toNumericValue(mode, value) {\r\n    // timestamp values for native controls are based on local time against local time epoch for \"datetime-local\" and\r\n    // UTC midnight against UTC epoch for other non-time types; which is exactly the opposite in this library:\r\n    // local time against UTC epoch and local midnight against UTC epoch respectively\r\n    switch (mode) {\r\n        case 'datetime':\r\n            return +value - TIMEZONE_OFFSET;\r\n        case 'month':\r\n            return (getFullYear(value) - 1970) * 12 + getMonth(value);\r\n    }\r\n    return +value + TIMEZONE_OFFSET;\r\n}\r\n\r\nfunction fromNumericValue(mode, value) {\r\n    switch (mode) {\r\n        case 'datetime':\r\n            return new Date(value + TIMEZONE_OFFSET);\r\n        case 'month':\r\n            return new Date(1970, value);\r\n    }\r\n    return new Date(value - TIMEZONE_OFFSET);\r\n}\r\n\r\nfunction normalizeDate(options, date) {\r\n    var min = parseMaxima(options.min);\r\n    var max = parseMaxima(options.max);\r\n    date = new Date(+(date < min ? min : date > max ? max : date));\r\n    switch (options.mode || options) {\r\n        case 'week':\r\n            date.setDate(getDate(date) - date.getDay());\r\n            break;\r\n        case 'month':\r\n            date.setDate(1);\r\n            break;\r\n    }\r\n    if ((options.mode || options) !== 'datetime') {\r\n        date.setHours(0, 0, 0, 0);\r\n    } else {\r\n        date.setSeconds(0, 0);\r\n    }\r\n    return date;\r\n}\r\n\r\nfunction stepDate(mode, date, dir, step) {\r\n    switch (mode) {\r\n        case 'minute':\r\n            var d = dir / Math.abs(dir);\r\n            return new Date(+date + 60000 * ((((d > 0 ? step : 0) - (getMinutes(date) % step)) || (step * d)) + (step * (dir - d))));\r\n        case 'day':\r\n            return new Date(+date + MS_PER_DAY * dir);\r\n        case 'week':\r\n            return new Date(+date + MS_PER_DAY * 7 * dir);\r\n        case 'month':\r\n            return new Date(getFullYear(date), getMonth(date) + dir, getDate(date));\r\n        case 'year':\r\n            return new Date(getFullYear(date) + dir, getMonth(date), getDate(date));\r\n    }\r\n}\r\n\r\nfunction formatDate(mode, date) {\r\n    switch (mode) {\r\n        case 'month':\r\n            return MONTH_NAMES[getMonth(date)] + ' ' + getFullYear(date);\r\n        case 'week':\r\n            var end = stepDate('day', date, 6);\r\n            return MONTH_NAMES[getMonth(date)] + ' ' + getDate(date) + ' - ' + (getMonth(end) !== getMonth(date) ? MONTH_NAMES[getMonth(end)] + ' ' : '') + getDate(end) + ', ' + getFullYear(date);\r\n    }\r\n    var monthPart = MONTH_NAMES[getMonth(date)] + ' ' + getDate(date) + ', ' + getFullYear(date);\r\n    return mode === 'datetime' ? monthPart + ' ' + (getHours(date) || 12) + ':' + ('0' + getMinutes(date)).slice(-2) + ' ' + (getHours(date) >= 12 ? 'PM' : 'AM') : monthPart;\r\n}\r\n\r\nfunction showMonth(self, date) {\r\n    if (isNaN(+date)) {\r\n        return;\r\n    }\r\n    if (typeof date === 'number') {\r\n        date = stepDate('month', self.currentMonth, date);\r\n    }\r\n    var min = parseMaxima(self.min);\r\n    var max = parseMaxima(self.max);\r\n    var currentMonth = normalizeDate({\r\n        mode: 'month',\r\n        min: min,\r\n        max: max\r\n    }, date);\r\n    var y = getFullYear(currentMonth);\r\n    var m = getMonth(currentMonth);\r\n    var all = controls.year.all(self)[0].all;\r\n    var firstDay = currentMonth.getDay();\r\n    var $buttons = $('td', self.element).removeClass('selected disabled');\r\n\r\n    if (!self.currentMonth || !sameMonth(currentMonth, self.currentMonth)) {\r\n        var numDays = new Date(y, m + 1, 0).getDate();\r\n        var numDaysLast = new Date(y, m, 0).getDate();\r\n        $buttons.removeClass('prev cur next today');\r\n        $buttons.each(function (i, v) {\r\n            if (i < firstDay) {\r\n                $(v).children().text(i + 1 - firstDay + numDaysLast).end().addClass('prev');\r\n            } else if (i >= numDays + firstDay) {\r\n                $(v).children().text(i + 1 - firstDay - numDays).end().addClass('next');\r\n            } else {\r\n                $(v).children().text(i + 1 - firstDay).end().addClass('cur');\r\n            }\r\n        });\r\n        var today = new Date();\r\n        if (sameMonth(currentMonth, today)) {\r\n            $buttons.eq(getDate(today) + firstDay - 1).addClass('today');\r\n        }\r\n        $('tr:last', self.element).toggle(firstDay + numDays > 35);\r\n\r\n        all.year.choices = range(11, function (v) {\r\n            return y + v - 5;\r\n        });\r\n        self.currentMonth = currentMonth;\r\n    }\r\n    all.year.value = y;\r\n    all.month.value = m;\r\n\r\n    var isMinMonth = min && sameMonth(currentMonth, min);\r\n    var isMaxMonth = max && sameMonth(currentMonth, max);\r\n    all.prevMonth.enabled = !isMinMonth;\r\n    all.nextMonth.enabled = !isMaxMonth;\r\n    if (isMinMonth) {\r\n        $buttons.slice(0, getDate(min) + firstDay - 1).addClass('disabled');\r\n    }\r\n    if (isMaxMonth) {\r\n        $buttons.slice(getDate(max) + firstDay).addClass('disabled');\r\n    }\r\n\r\n    var selected = sameMonth(currentMonth, self.value);\r\n    if (selected || (self.mode === 'week' && sameMonth(currentMonth, stepDate('day', self.value, 6)))) {\r\n        switch (self.mode) {\r\n            case 'day':\r\n                $buttons.eq(getDate(self.value) + firstDay - 1).addClass('selected');\r\n                break;\r\n            case 'week':\r\n                $buttons.slice(selected ? getDate(self.value) + firstDay - 1 : 0).slice(0, 7).addClass('selected');\r\n                break;\r\n            case 'month':\r\n                $buttons.filter('td.cur').addClass('selected');\r\n                break;\r\n        }\r\n    }\r\n    $(self.element).toggleClass('select-range', self.mode !== 'day');\r\n}\r\n\r\nfunction initControls() {\r\n    var dropdownOptions = {\r\n        template: '<z:callout label=\"{{selectedText}}\" show-text=\"true\"/>'\r\n    };\r\n    var monthChoices = new Map();\r\n    range(12, function (v) {\r\n        monthChoices.set(v, 'month_' + v);\r\n    });\r\n    controls = {\r\n        year: ui.dropdown('year', function (self) {\r\n            // @ts-ignore: parent is not null\r\n            return showMonth(self.parent, new Date(self.value, getMonth(self.parent.currentMonth)));\r\n        }, dropdownOptions),\r\n        month: ui.dropdown('month', monthChoices, function (self) {\r\n            // @ts-ignore: parent is not null\r\n            return showMonth(self.parent, new Date(getFullYear(self.parent.currentMonth), self.value));\r\n        }, dropdownOptions),\r\n        prev: ui.button('prevMonth', '\\ue314', function (self) {\r\n            return showMonth(self.parent, -1);\r\n        }),\r\n        setToday: ui.button('setToday', '\\ue8df', function (self) {\r\n            // @ts-ignore: parent is not null\r\n            return self.parent.execute(new Date());\r\n        }),\r\n        next: ui.button('nextMonth', '\\ue315', function (self) {\r\n            return showMonth(self.parent, 1);\r\n        }),\r\n        hour: ui.number('hour', {\r\n            options: {\r\n                min: 0,\r\n                max: 23,\r\n                loop: true\r\n            },\r\n            execute: function (self) {\r\n                // @ts-ignore: parent is not null\r\n                self.parent.execute(makeTime(self.value, self.all.minute.value));\r\n            }\r\n        }),\r\n        timeSeperator: ui.label('timeSeperator'),\r\n        minute: ui.number('minute', {\r\n            options: {\r\n                min: 0,\r\n                max: 59,\r\n                digits: 'fixed',\r\n                loop: true\r\n            },\r\n            execute: function (self) {\r\n                // @ts-ignore: parent is not null\r\n                self.parent.execute(makeTime(self.all.hour.value, self.value));\r\n            }\r\n        }),\r\n        meridiem: ui.button('meridiem', {\r\n            value: false,\r\n            label: 'am',\r\n            showText: true,\r\n            propertyChange: function (e, self) {\r\n                self.label = self.value ? 'pm' : 'am';\r\n            },\r\n            execute: function (self) {\r\n                self.value = !self.value;\r\n                // @ts-ignore: parent is not null\r\n                self.parent.execute(makeTime(self.all.hour.value % 12 + (self.value ? 12 : 0), self.all.minute.value));\r\n            }\r\n        })\r\n    };\r\n}\r\n\r\nfunction initDatepickerCallout() {\r\n    var executed = function (e, self) {\r\n        var date = new Date(+self.all.calendar.value);\r\n        date.setHours(getHours(self.all.clock.value), getMinutes(self.all.clock.value));\r\n        if (activeTyper) {\r\n            activeTyper.setValue(date);\r\n        }\r\n    };\r\n    var calender = ui.calendar({\r\n        executed: executed,\r\n        contextChange: function (e, self) {\r\n            // @ts-ignore: custom control property\r\n            self.min = callout.min;\r\n            // @ts-ignore: custom control property\r\n            self.max = callout.max;\r\n            // @ts-ignore: custom control property\r\n            self.mode = callout.mode === 'datetime' ? 'day' : callout.mode;\r\n        }\r\n    });\r\n    var clock = ui.clock({\r\n        hiddenWhenDisabled: true,\r\n        executed: executed,\r\n        contextChange: function (e, self) {\r\n            // @ts-ignore: custom control property\r\n            self.step = callout.minuteStep;\r\n            self.enabled = callout.mode === 'datetime';\r\n        }\r\n    });\r\n    var okButton = ui.submit('done', 'done', {\r\n        execute: function (self) {\r\n            callout.hideMenu();\r\n        }\r\n    });\r\n    callout = ui.menu(\r\n        ui.buttonset(calender, clock),\r\n        ui.generic({\r\n            controls: [ui.buttonset(okButton)],\r\n            template: '<z:generic><controls layout=\"dialog\"/></z:generic>'\r\n        }), {\r\n        hideCalloutOnBlur: false\r\n    }).render();\r\n}\r\n\r\nfunction stepValue(tx) {\r\n    var options = tx.widget.options;\r\n    var date = stepDate(options.mode === 'datetime' ? 'minute' : options.mode, tx.typer.getValue() || new Date(), tx.commandName === 'stepUp' ? -1 : 1, options.minuteStep);\r\n    tx.typer.setValue(date);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Control types\r\n * -------------------------------------- */\r\n\r\nconst Calendar = define('calendar', {\r\n    template: '<div><div class=\"zui-calendar-header\"><z:buttonset show-text=\"false\"/></div><div class=\"zui-calendar-body\"><table></table></div></div>',\r\n    hideCalloutOnExecute: false,\r\n    value: null,\r\n    mode: 'day',\r\n    min: null,\r\n    max: null,\r\n    setValue: function (e, self) {\r\n        var value = normalizeDate(this, e.newValue);\r\n        self.selectedDate = value;\r\n        self.value = value;\r\n        showMonth(self, value);\r\n    },\r\n    init: function (e, self) {\r\n        if (!controls) {\r\n            initControls();\r\n        }\r\n        self.append([controls.year, controls.month, controls.prev, controls.setToday, controls.next]);\r\n\r\n        var updateValue = function () {\r\n            self.value = normalizeDate(self, self.selectedDate);\r\n        };\r\n        self.watch('mode', updateValue);\r\n        self.watch('min', updateValue);\r\n        self.watch('max', updateValue);\r\n\r\n        var $table = $('table', self.element);\r\n        $(repeat('<tr></tr>', 7)).appendTo($table);\r\n        $(repeat('<th></th>', 7)).appendTo($table.find('tr:first'));\r\n        $(repeat('<td></td>', 7)).appendTo($table.find('tr+tr'));\r\n        $('<button>').appendTo($table.find('td'));\r\n        $table.find('th').text(function (i) {\r\n            return WEEKDAYS_NAMES[i];\r\n        });\r\n        $table.find('td').on('click', function () {\r\n            var monthDelta = $(this).hasClass('prev') ? -1 : $(this).hasClass('next') ? 1 : 0;\r\n            // @ts-ignore: type inference issue\r\n            self.execute(new Date(getFullYear(self.currentMonth), getMonth(self.currentMonth) + monthDelta, +this.textContent));\r\n        });\r\n        if (!self.value) {\r\n            self.value = new Date();\r\n        } else {\r\n            showMonth(self, 0);\r\n        }\r\n    },\r\n    mousewheel: function (e, self) {\r\n        if (self.context === callout) {\r\n            showMonth(self, e.data);\r\n            e.handled();\r\n        }\r\n    },\r\n    contextChange: function (e, self) {\r\n        showMonth(self, self.currentMonth || self.value || new Date());\r\n    }\r\n});\r\n\r\nconst Clock = define('clock', {\r\n    template: '<div><div class=\"zui-clock-face\"><s hand=\"h\"></s><s hand=\"m\"></s><i></i><i></i></div><z:buttonset/></div>',\r\n    hideCalloutOnExecute: false,\r\n    step: 1,\r\n    value: null,\r\n    init: function (e, self) {\r\n        if (!controls) {\r\n            initControls();\r\n        }\r\n        self.append([controls.hour, controls.timeSeperator, controls.minute, controls.meridiem]);\r\n        self.watch('step', function (step) {\r\n            // only allow minute interval that is a factor of 60\r\n            // to maintain consistent step over hours\r\n            if (60 % step) {\r\n                self.step = 1;\r\n            }\r\n            controls.minute.all(self)[0].options.step = step;\r\n        }, true);\r\n        self.setValue(new Date());\r\n    },\r\n    setValue: function (e, self) {\r\n        var date = e.newValue;\r\n        var all = controls.hour.all(self)[0].all;\r\n        all.hour.value = getHours(date) || 12;\r\n        all.minute.value = getMinutes(date);\r\n        all.meridiem.value = getHours(date) >= 12;\r\n        $('s[hand=\"h\"]', self.element).css('transform', 'rotate(' + (getHours(date) * 30 + getMinutes(date) * 0.5 - 90) + 'deg)');\r\n        $('s[hand=\"m\"]', self.element).css('transform', 'rotate(' + (getMinutes(date) * 6 - 90) + 'deg)');\r\n    },\r\n    mousedown: function (e, self) {\r\n        if (matchSelector(e.target, 's')) {\r\n            // @ts-ignore: parent is not null\r\n            var rect = getRect(e.target.parentNode);\r\n            var promise = dom.beginDrag(function (x, y) {\r\n                var rad = Math.atan2(y - rect.centerY, x - rect.centerX) / Math.PI;\r\n                var curM = getMinutes(self.value);\r\n                var curH = getHours(self.value);\r\n                if (e.target.getAttribute('hand') === 'm') {\r\n                    // @ts-ignore: custom control property\r\n                    var m = (Math.round((rad * 30 + 75) / self.step) * self.step) % 60;\r\n                    if (m !== curM) {\r\n                        var deltaH = Math.floor(Math.abs(curM - m) / 30) * (m > curM ? -1 : 1);\r\n                        self.setValue(makeTime(curH + deltaH, m));\r\n                    }\r\n                } else {\r\n                    var h = Math.round(rad * 6 + 15) % 12 + (controls.meridiem.all(self)[0].value ? 12 : 0);\r\n                    if (h !== curH) {\r\n                        self.setValue(makeTime(h, curM));\r\n                    }\r\n                }\r\n            });\r\n            promise.then(function () {\r\n                self.execute();\r\n            });\r\n        }\r\n    },\r\n    mousewheel: function (e, self) {\r\n        self.setValue(stepDate('minute', self.value, e.data, self.step));\r\n        self.mousewheelTimeout = self.mousewheelTimeout || setTimeout(function () {\r\n            self.mousewheelTimeout = null;\r\n            self.execute();\r\n        });\r\n        e.preventDefault();\r\n        e.handled();\r\n    }\r\n});\r\n\r\nconst DatePicker = define('datepicker', {\r\n    template: '<z:textbox/>',\r\n    preventLeave: true,\r\n    value: '',\r\n    options: {},\r\n    init: function (e, self) {\r\n        if (IS_TOUCH) {\r\n            var mode = self.options.mode || self.preset.options.mode;\r\n            self.nativeInput = $('<input type=\"' + INPUT_TYPES[mode] + '\">').appendTo(self.element)[0];\r\n            bind(self.nativeInput, 'change', function (e) {\r\n                self.setValue(fromNumericValue(mode, self.nativeInput.valueAsNumber));\r\n            });\r\n        }\r\n    },\r\n    focusin: function (e, self) {\r\n        if (IS_TOUCH) {\r\n            var mode = self.options.mode || self.preset.options.mode;\r\n            if (!self.value) {\r\n                self.value = new Date();\r\n            }\r\n            // input type \"datetime-local\" does not support valueAsDate so we need to use with valueAsNumber (timestamp)\r\n            self.nativeInput.valueAsNumber = toNumericValue(mode, self.value);\r\n            self.nativeInput.focus();\r\n            e.preventDefault();\r\n        }\r\n    },\r\n    preset: {\r\n        options: {\r\n            mode: 'day',\r\n            minuteStep: 1,\r\n            min: null,\r\n            max: null,\r\n            required: false,\r\n            formatDate: null\r\n        },\r\n        overrides: {\r\n            getValue: function (preset) {\r\n                return preset.selectedDate ? normalizeDate(preset.options, preset.selectedDate) : null;\r\n            },\r\n            setValue: function (preset, date) {\r\n                date = date ? normalizeDate(preset.options, date) : null;\r\n                preset.selectedDate = date;\r\n                preset.softSelectedDate = null;\r\n\r\n                var text = '';\r\n                if (date && !isNaN(+date)) {\r\n                    var format = function (fn) {\r\n                        return isFunction(fn) && fn(preset.options.mode, date);\r\n                    };\r\n                    text = format(preset.options.formatDate) || format(formatDate);\r\n                }\r\n                if (text !== this.extractText()) {\r\n                    this.invoke(function (tx) {\r\n                        tx.selection.selectAll();\r\n                        tx.insertText(text);\r\n                    });\r\n                    if (this === activeTyper) {\r\n                        callout.calendar = callout.clock = preset.selectedDate || new Date();\r\n                    }\r\n                }\r\n            },\r\n            validate: function (preset) {\r\n                if (preset.options.required && !!preset.selectedDate) {\r\n                    return reject('required');\r\n                }\r\n            }\r\n        },\r\n        commands: {\r\n            stepUp: stepValue,\r\n            stepDown: stepValue\r\n        },\r\n        contentChange: function (e) {\r\n            if (e.typer === activeTyper && e.source !== 'script') {\r\n                var date = new Date(e.typer.extractText());\r\n                if (!isNaN(+date)) {\r\n                    callout.calendar = callout.clock = normalizeDate(e.widget.options, date);\r\n                }\r\n                e.widget.softSelectedDate = date;\r\n            }\r\n        },\r\n        click: function (e) {\r\n            if (e.typer === activeTyper) {\r\n                callout.showMenu(e.typer.element, 'left bottom', null, 10);\r\n            }\r\n        },\r\n        escape: function (e) {\r\n            if (containsOrEquals(document, callout.element)) {\r\n                callout.hideMenu();\r\n                e.handled();\r\n            }\r\n        },\r\n        focusin: function (e) {\r\n            if (!callout) {\r\n                initDatepickerCallout();\r\n            }\r\n            e.typer.retainFocus(callout.element);\r\n            activeTyper = e.typer;\r\n\r\n            var options = e.widget.options;\r\n            var value = e.typer.getValue() || new Date();\r\n            extend(callout, {\r\n                mode: options.mode,\r\n                minuteStep: options.minuteStep,\r\n                min: options.min,\r\n                max: options.max,\r\n                calendar: value,\r\n                clock: value\r\n            });\r\n            callout.update();\r\n            if (e.source !== 'script') {\r\n                callout.showMenu(e.typer.element, 'left bottom', null, 10);\r\n            }\r\n        },\r\n        focusout: function (e) {\r\n            if (e.typer === activeTyper) {\r\n                var softDate = e.widget.softSelectedDate;\r\n                e.typer.setValue(!softDate || isNaN(+softDate) ? e.widget.selectedDate : softDate);\r\n                activeTyper = null;\r\n                callout.hideMenu();\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nloadLabels();\r\n\r\nexport {\r\n    DatePicker,\r\n    Calendar,\r\n    Clock\r\n}\r\n","import { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\n\r\nfunction updateFlag(self) {\r\n    self.value = self.optional ? !!self.value : undefined;\r\n    self.enableChildren = !self.optional || self.value;\r\n}\r\n\r\nconst FieldSet = define('fieldset', {\r\n    template: '<div class=\"optional:{{optional && [ ? value checked [ ! value ] ]}}\"><div class=\"zui-fieldset-title\"><z:checkbox/><p>{{description}}</p></div><div class=\"zui-form hidden:{{not enableChildren}}\"><children controls/></div></div>',\r\n    templates: {\r\n        textbox: '<z:textbox show-placeholder=\"always\"/>'\r\n    },\r\n    value: false,\r\n    optional: false,\r\n    parseOptions: parseControlsAndExecute,\r\n    init: function (e, self) {\r\n        updateFlag(self);\r\n    },\r\n    propertyChange: function (e, self) {\r\n        if ('optional' in e.newValues || 'value' in e.newValues) {\r\n            updateFlag(self);\r\n        }\r\n    }\r\n});\r\n\r\nexport default FieldSet;\r\n","import $ from \"./include/external/jquery.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { makeArray } from \"./include/zeta-dom/util.js\";\r\nimport { parseIconAndExecute } from \"./util/defineUtil.js\";\r\n\r\nfunction resetFileInput(e) {\r\n    var input = $(':file', e.target)[0];\r\n    var originalParent = input.parentNode;\r\n    var form = document.createElement('form');\r\n    form.appendChild(input);\r\n    form.reset();\r\n    // @ts-ignore: originalParent is not null\r\n    $(input).prependTo(originalParent);\r\n}\r\n\r\nconst FileInput = define('file', {\r\n    template: '<z:buttonlike><z:label show-icon=\"auto\"></z:label><input type=\"file\" multiple=\"{{multiple}}\"/></z:buttonlike>',\r\n    autoReset: true,\r\n    multiple: false,\r\n    parseOptions: parseIconAndExecute,\r\n    reset: resetFileInput,\r\n    init: function (e, self) {\r\n        $(':file', e.target).on('change', function (e) {\r\n            // @ts-ignore: e.target is file input\r\n            self.execute(makeArray(e.target.files));\r\n        });\r\n    },\r\n    afterExecute: function (e, self) {\r\n        if (self.autoReset) {\r\n            resetFileInput(e);\r\n        }\r\n    }\r\n});\r\n\r\nexport default FileInput;\r\n","import Promise from \"./include/external/promise-polyfill.js\";\r\nimport { lock } from \"./include/zeta-dom/domLock.js\";\r\nimport { defineHiddenProperty, mapGet, mapRemove, resolve } from \"./include/zeta-dom/util.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { parseControlsAndExecute } from \"./util/defineUtil.js\";\r\nimport { confirm } from \"./promptFactory.js\";\r\n\r\nconst guards = new WeakMap();\r\nconst deferreds = new WeakMap();\r\n\r\nfunction ensureFormPromise(form, store) {\r\n    return mapGet(store, form, function () {\r\n        var obj = {};\r\n        obj.promise = new Promise(function (resolve, reject) {\r\n            obj.resolve = resolve;\r\n            obj.reject = reject;\r\n        });\r\n        return obj;\r\n    });\r\n}\r\n\r\nfunction settleFormPromise(form, store, resolveOrReject, data) {\r\n    var deferred = mapRemove(store, form);\r\n    if (deferred) {\r\n        deferred[resolveOrReject ? 'resolve' : 'reject'](data);\r\n    }\r\n}\r\n\r\nfunction initForm(form) {\r\n    var deferred = ensureFormPromise(form, deferreds);\r\n    defineHiddenProperty(form.context, form.name, deferred.promise);\r\n    settleFormPromise(form, guards, true);\r\n}\r\n\r\nconst Form = define('form', {\r\n    templates: {\r\n        buttonset: '<z:buttonset><children controls show-text=\"true\"/></z:buttonset>',\r\n        textbox: '<z:textbox show-placeholder=\"always\"/>'\r\n    },\r\n    parseOptions: parseControlsAndExecute,\r\n    defaultExport: 'promise',\r\n    preventLeave: true,\r\n    init: function (e, self) {\r\n        initForm(self);\r\n    },\r\n    childExecuted: function (e, self) {\r\n        if (e.source !== 'script' && e.control.preventLeave && !guards.get(self)) {\r\n            lock(self.element, ensureFormPromise(self, guards).promise, function () {\r\n                return self.preventLeave ? confirm('leaveForm') : resolve();\r\n            });\r\n        }\r\n    },\r\n    beforeExecute: function (e, self) {\r\n        settleFormPromise(self, guards, true);\r\n    },\r\n    executed: function (e, self) {\r\n        settleFormPromise(self, deferreds, true, e.data !== null ? e.data : self.value !== undefined ? self.value : self.context.toJSON());\r\n        self.reset();\r\n    },\r\n    cancelled: function (e, self) {\r\n        settleFormPromise(self, deferreds, false);\r\n    },\r\n    destroy: function (e, self) {\r\n        settleFormPromise(self, deferreds, false);\r\n    },\r\n    reset: function (e, self) {\r\n        if (!deferreds.get(self)) {\r\n            initForm(self);\r\n        }\r\n    }\r\n});\r\n\r\nexport default Form;\r\n","import $ from \"./include/external/jquery.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport { IS_TOUCH } from \"./include/zeta-dom/env.js\";\r\nimport { extend, isArray, isFunction, reject, resolve } from \"./include/zeta-dom/util.js\";\r\nimport dom from \"./include/zeta-dom/dom.js\";\r\nimport { containsOrEquals } from \"./include/zeta-dom/domUtil.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport Menu from \"./Menu.js\";\r\nimport Dropdown from \"./Dropdown.js\";\r\nimport Dialog from \"./Dialog.js\";\r\nimport TextBox from \"./TextBox.js\";\r\nimport Button from \"./Button.js\";\r\nimport SubmitButton from \"./SubmitButton.js\";\r\nimport ButtonSet from \"./ButtonSet.js\";\r\nimport ButtonList from \"./ButtonList.js\";\r\nimport globalContext from \"./globalContext.js\";\r\n\r\nconst SHOW_DIALOG = IS_TOUCH;\r\n\r\nconst ui = new UIToolset('zeta.ui.keyword').use(Menu, Dropdown, Dialog, TextBox, Button, SubmitButton, ButtonSet, ButtonList);\r\nconst defaultLocale = globalContext.language;\r\n\r\nvar activeInput;\r\nvar activeDialog;\r\nvar callout;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction loadLabels(lang) {\r\n    const importDefaultLabels = import(\r\n        /* webpackMode: \"eager\" */\r\n        \"./locale/\" + (lang || defaultLocale) + \"/zeta.ui.keyword.json\"\r\n    );\r\n    return importDefaultLabels.then(function (labels) {\r\n        ui.i18n(lang || 'default', labels.default);\r\n    });\r\n}\r\n\r\nfunction initCallout() {\r\n    callout = ui.menu({\r\n        hideCalloutOnBlur: false,\r\n        hideCalloutOnExecute: false,\r\n        controls: [\r\n            ui.dropdown({\r\n                template: '<z:buttonlist/>',\r\n                execute: function (self) {\r\n                    insertItem(callout.preset, self.value);\r\n                    callout.preset.typer.focus();\r\n                },\r\n                contextChange: function (e, self) {\r\n                    self.choices = self.context.suggestions;\r\n                }\r\n            })\r\n        ]\r\n    }).render();\r\n}\r\n\r\nfunction encode(v, keepWS) {\r\n    var a = document.createTextNode(keepWS ? v : v.replace(/\\s/g, '\\u00a0')),\r\n        b = document.createElement('div');\r\n    b.appendChild(a);\r\n    return b.innerHTML;\r\n}\r\n\r\nfunction toValue(v) {\r\n    return v.value;\r\n}\r\n\r\nfunction toValueObject(v) {\r\n    if (typeof v !== 'object') {\r\n        return {\r\n            value: v,\r\n            label: v\r\n        };\r\n    }\r\n    return v;\r\n}\r\n\r\nfunction sortValues(a, b) {\r\n    return a.value.localeCompare(b.value);\r\n}\r\n\r\nfunction valueChanged(x, y) {\r\n    return x.length !== y.length || x.some(function (v) {\r\n        return y.indexOf(v) < 0;\r\n    });\r\n}\r\n\r\nfunction fuzzyMatch(haystack, needle) {\r\n    haystack = String(haystack || '');\r\n    var vector = [];\r\n    var str = haystack.toLowerCase();\r\n    var j = 0;\r\n    var lastpos = -1;\r\n    for (var i = 0; i < needle.length; i++) {\r\n        var l = needle.charAt(i).toLowerCase();\r\n        if (l == ' ') {\r\n            continue;\r\n        }\r\n        j = str.indexOf(l, j);\r\n        if (j == -1) {\r\n            return {\r\n                firstIndex: Infinity,\r\n                consecutiveMatches: -1,\r\n                formattedText: haystack\r\n            };\r\n        }\r\n        vector[vector.length] = j - lastpos - 1;\r\n        lastpos = j++;\r\n    }\r\n    var firstIndex = vector[0];\r\n    var consecutiveMatches = /^(0+)/.test(vector.slice(0).sort().join('')) && RegExp.$1.length;\r\n    var formattedText = '';\r\n    j = 0;\r\n    for (i = 0; i < vector.length; i++) {\r\n        formattedText += haystack.substr(j, vector[i]) + '**' + haystack[j + vector[i]] + '**';\r\n        j += vector[i] + 1;\r\n    }\r\n    formattedText += haystack.slice(j);\r\n    return {\r\n        firstIndex: firstIndex,\r\n        consecutiveMatches: consecutiveMatches,\r\n        formattedText: formattedText.replace(/\\*\\*(\\ *)\\*\\*/g, '$1')\r\n    };\r\n}\r\n\r\nfunction getSuggestions(preset, value, exclude) {\r\n    var suggestions = preset.options.suggestions || preset.options.allowedValues || [];\r\n    if (isFunction(suggestions)) {\r\n        suggestions = suggestions(value);\r\n    }\r\n    return resolve(suggestions).then(function (suggestions) {\r\n        suggestions = suggestions.map(toValueObject);\r\n        suggestions.forEach(function (v) {\r\n            preset.knownValues[v.value] = v.label;\r\n        });\r\n        if (exclude) {\r\n            suggestions = suggestions.filter(function (v) {\r\n                return exclude.indexOf(v.value) < 0;\r\n            });\r\n        }\r\n        return suggestions;\r\n    });\r\n}\r\n\r\nfunction processSuggestions(suggestions, needle, count) {\r\n    suggestions = suggestions.filter(function (v) {\r\n        extend(v, fuzzyMatch(v.label, needle));\r\n        [v.value].concat(v.matches || []).forEach(function (w) {\r\n            var m = fuzzyMatch(w, needle);\r\n            v.firstIndex = Math.min(v.firstIndex, m.firstIndex);\r\n            v.consecutiveMatches = Math.max(v.consecutiveMatches, m.consecutiveMatches || 0);\r\n        });\r\n        return v.firstIndex !== Infinity;\r\n    });\r\n    suggestions.sort(function (a, b) {\r\n        return ((b.consecutiveMatches - a.consecutiveMatches) + (a.firstIndex - b.firstIndex)) || sortValues(a, b);\r\n    });\r\n    return suggestions.slice(0, count);\r\n}\r\n\r\nfunction showSuggestions(preset) {\r\n    var editor = preset.typer;\r\n    var value = editor.extractText();\r\n    var promise = getSuggestions(preset, value, editor.getValue());\r\n    promise.then(function (suggestions) {\r\n        if (editor.focused()) {\r\n            suggestions = processSuggestions(suggestions, value, preset.options.suggestionCount);\r\n            if (value && preset.options.allowFreeInput && !suggestions.some(function (v) {\r\n                return v.label === value;\r\n            })) {\r\n                suggestions.push({\r\n                    value: value,\r\n                    label: value,\r\n                    formattedText: '*' + value + '*'\r\n                });\r\n            }\r\n            if (!callout) {\r\n                initCallout();\r\n            }\r\n            callout.update({\r\n                preset: preset,\r\n                suggestions: suggestions.map(function (v) {\r\n                    return {\r\n                        value: v.value,\r\n                        label: v.formattedText,\r\n                        icon: v.icon || ''\r\n                    };\r\n                })\r\n            });\r\n            dom.retainFocus(editor.element, callout.element);\r\n            callout.showMenu(editor.element, 'left bottom', null, 10);\r\n            editor.focus();\r\n        }\r\n    });\r\n}\r\n\r\nfunction showSuggestionDialog(preset, control) {\r\n    var knownValues = getSuggestions(preset);\r\n    loadLabels(globalContext.language).catch(function () {\r\n        return loadLabels();\r\n    }).then(function () {\r\n        ui.dialog({\r\n            title: control.label,\r\n            description: control.placeholder,\r\n            controls: [\r\n                ui.textbox('newValue', {\r\n                    enter: function (e, self) {\r\n                        self.all.list.append(ui.checkbox({\r\n                            showIcon: true,\r\n                            label: self.value,\r\n                            entry: self.value,\r\n                            value: true,\r\n                            description: 'new value',\r\n                            before: '*'\r\n                        }));\r\n                        return self.execute();\r\n                    },\r\n                    visible: function () {\r\n                        return preset.options.allowFreeInput;\r\n                    }\r\n                }),\r\n                ui.buttonlist('list'),\r\n                ui.buttonset(\r\n                    ui.submit('done', 'done'),\r\n                    ui.button('cancel', 'close', function (self) {\r\n                        self.all.dialog.destroy();\r\n                    })\r\n                )\r\n            ],\r\n            childExecuted: function (e, self) {\r\n                self.value = self.all.list.controls.filter(function (v) {\r\n                    return v.value;\r\n                }).map(function (v) {\r\n                    // @ts-ignore: custom control property\r\n                    return v.entry;\r\n                });\r\n            },\r\n            init: function (e, self) {\r\n                var currentValues = preset.typer.getValue();\r\n                self.all.dialog.value = currentValues.slice(0);\r\n                activeDialog = true;\r\n\r\n                knownValues.then(function (knownValues) {\r\n                    var allValues = knownValues.map(toValue);\r\n                    knownValues = knownValues.concat(currentValues.filter(function (v) {\r\n                        return allValues.indexOf(v) < 0;\r\n                    }).map(toValueObject));\r\n                    knownValues.sort(sortValues);\r\n                    self.all.list.append(knownValues.map(function (v) {\r\n                        var checked = currentValues.indexOf(v.value) >= 0;\r\n                        return ui.checkbox({\r\n                            showIcon: true,\r\n                            label: v.label,\r\n                            icon: v.icon,\r\n                            entry: v.value,\r\n                            value: checked,\r\n                            before: checked ? '*' : ''\r\n                        });\r\n                    }));\r\n                });\r\n            },\r\n            destroy: function (e, self) {\r\n                activeDialog = false;\r\n            }\r\n        }).render().dialog.then(function (values) {\r\n            preset.typer.setValue(values);\r\n        });\r\n    });\r\n}\r\n\r\nfunction insertItem(preset, value) {\r\n    if (!value || preset.typer.getValue().indexOf(value.value || value) >= 0) {\r\n        return;\r\n    }\r\n    if (typeof value !== 'object') {\r\n        value = {\r\n            value: value,\r\n            label: preset.knownValues[value] || value\r\n        };\r\n    }\r\n    var span = $('<span class=\"zui-keyword-item\" data-value=\"' + encode(value.value, true) + '\">' + encode(value.label) + '<i>delete</i></span>')[0];\r\n    var lastChild = preset.typer.rootNode.lastChild;\r\n    preset.typer.invoke(function (tx) {\r\n        tx.selection.selectAll();\r\n        if (lastChild) {\r\n            tx.selection.baseCaret.moveTo(lastChild.element, false);\r\n        }\r\n        tx.insertHtml(span);\r\n    });\r\n    if (!preset.options.allowFreeInput) {\r\n        getSuggestions(preset, value.value).then(function () {\r\n            if (!preset.knownValues[value.value]) {\r\n                $(span).addClass('invalid');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Control types\r\n * -------------------------------------- */\r\n\r\nconst KeywordInput = define('keyword', {\r\n    template: '<z:textbox/>',\r\n    preventLeave: true,\r\n    options: {},\r\n    value: [],\r\n    init: function (e, self) {\r\n        self.watch('required', function (required) {\r\n            self.options.required = required;\r\n        }, true);\r\n    },\r\n    focusin: function (e, self) {\r\n        activeInput = self;\r\n    },\r\n    setValue: function (e, self) {\r\n        var newValue = e.newValue || [];\r\n        if (valueChanged(e.oldValue, newValue)) {\r\n            self.setValue(newValue);\r\n            self.editor.setValue(newValue);\r\n        }\r\n        e.handled();\r\n    },\r\n    preset: {\r\n        options: {\r\n            required: false,\r\n            allowFreeInput: true,\r\n            allowedValues: null,\r\n            suggestionCount: 5,\r\n            suggestions: false\r\n        },\r\n        overrides: {\r\n            getValue: function (preset) {\r\n                return $('span', this.element).map(function (i, v) {\r\n                    return String($(v).data('value'));\r\n                }).get();\r\n            },\r\n            setValue: function (preset, values) {\r\n                values = (isArray(values) || String(values).split(/\\s+/)).filter(function (v) {\r\n                    return v;\r\n                });\r\n                if (valueChanged(values, this.getValue())) {\r\n                    this.invoke(function (tx) {\r\n                        tx.selection.selectAll();\r\n                        tx.insertText('');\r\n                        values.forEach(function (v) {\r\n                            insertItem(preset, v);\r\n                        });\r\n                    });\r\n                }\r\n            },\r\n            validate: function (preset) {\r\n                if (preset.options.required && !this.getValue().length) {\r\n                    return reject('required');\r\n                }\r\n                if ($('.invalid', this.element)[0]) {\r\n                    return reject('invalid-value');\r\n                }\r\n            }\r\n        },\r\n        widgets: {\r\n            tag: {\r\n                element: 'span',\r\n                inline: true,\r\n                editable: 'none',\r\n                click: function (e) {\r\n                    if (e.target !== e.widget.element) {\r\n                        $(e.widget.element).detach();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setup: function (e) {\r\n            e.typer.select(e.typer.element, -0);\r\n            e.widget.knownValues = {};\r\n        },\r\n        focusin: function (e) {\r\n            if (!SHOW_DIALOG) {\r\n                showSuggestions(e.widget);\r\n            } else {\r\n                showSuggestionDialog(e.widget, activeInput);\r\n            }\r\n        },\r\n        focusout: function (e) {\r\n            insertItem(e.widget, e.typer.extractText());\r\n            if (!SHOW_DIALOG) {\r\n                callout.hideMenu();\r\n            }\r\n        },\r\n        click: function (e) {\r\n            if (SHOW_DIALOG && !activeDialog) {\r\n                showSuggestionDialog(e.widget, activeInput);\r\n            }\r\n        },\r\n        upArrow: function (e) {\r\n            dom.focus(callout.element);\r\n            e.handled();\r\n        },\r\n        downArrow: function (e) {\r\n            dom.focus(callout.element);\r\n            e.handled();\r\n        },\r\n        textInput: function (e) {\r\n            var lastChild = e.typer.rootNode.lastChild;\r\n            if (lastChild && e.typer.getSelection().comparePosition(lastChild.element) < 0) {\r\n                e.typer.select(e.typer.element, -0);\r\n            }\r\n        },\r\n        enter: function (e) {\r\n            var suggestions = callout.suggestions;\r\n            insertItem(e.widget, suggestions.length === 1 || (suggestions[0] && suggestions[0].label === '**' + e.widget.knownValues[suggestions[0].value] + '**') ? suggestions[0].value : e.typer.extractText());\r\n            e.handled();\r\n        },\r\n        escape: function (e) {\r\n            if (containsOrEquals(document, callout.element)) {\r\n                callout.hideMenu();\r\n                e.handled();\r\n            }\r\n        },\r\n        contentChange: function (e) {\r\n            if (!SHOW_DIALOG && e.source !== 'script') {\r\n                showSuggestions(e.widget);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nexport default KeywordInput;\r\n","import { define } from \"./core/define.js\";\r\nimport _ from \"./ButtonLike.js\";\r\n\r\nconst LinkButton = define('link', {\r\n    template: '<z:buttonlike><a href=\"{{value}}\" target=\"{{target}}\"><z:label show-icon=\"auto\"></z:label></a></z:buttonlike>',\r\n    parseOptions: function (options, iter) {\r\n        options.icon = iter.string();\r\n        options.value = iter.string();\r\n        options.target = iter.string();\r\n    }\r\n});\r\n\r\nexport default LinkButton;\r\n","import { define } from \"./core/define.js\";\r\nimport TextBox from \"./TextBox.js\";\r\n\r\nfunction setValue(widget, value, isKeyboardEvent) {\r\n    if (value === null || value === '' || isNaN(value)) {\r\n        value = value ? '0' : '';\r\n        widget.value = null;\r\n    } else {\r\n        var min = parseInt(widget.options.min);\r\n        var max = parseInt(widget.options.max);\r\n        var loop = widget.options.loop && min === min && max === max;\r\n        if ((loop && value < min) || (!loop && max === max && value > max)) {\r\n            value = max;\r\n        } else if ((loop && value > max) || (!loop && min === min && value < min)) {\r\n            value = min;\r\n        }\r\n        widget.value = +value | 0;\r\n        value = String(+value | 0);\r\n    }\r\n    var numOfDigits = String(+widget.options.max || 0).length;\r\n    var currentText = widget.typer.extractText();\r\n    if (widget.options.digits === 'fixed') {\r\n        value = (new Array(numOfDigits + 1).join('0') + value).substr(-numOfDigits);\r\n    }\r\n    if (value !== currentText && (!isKeyboardEvent || currentText.length >= numOfDigits)) {\r\n        widget.typer.invoke(function (tx) {\r\n            tx.selection.selectAll();\r\n            tx.insertText(value);\r\n        });\r\n    }\r\n}\r\n\r\nfunction stepValue(tx) {\r\n    setValue(tx.widget, (tx.widget.value || 0) + (tx.commandName === 'stepUp' ? 1 : -1) * tx.widget.options.step);\r\n}\r\n\r\nconst NumberInput = define('number', {\r\n    template: '<z:textbox/>',\r\n    preventLeave: true,\r\n    value: null,\r\n    preset: {\r\n        validation: {\r\n            allowChars: '0-9'\r\n        },\r\n        options: {\r\n            max: null,\r\n            min: null,\r\n            digits: 'auto',\r\n            step: 1,\r\n            loop: false\r\n        },\r\n        overrides: {\r\n            getValue: function (preset) {\r\n                return preset.value;\r\n            },\r\n            setValue: function (preset, value) {\r\n                setValue(preset, value);\r\n            }\r\n        },\r\n        commands: {\r\n            stepUp: stepValue,\r\n            stepDown: stepValue\r\n        },\r\n        focusout: function (e) {\r\n            setValue(e.widget, e.widget.value);\r\n        },\r\n        contentChange: function (e) {\r\n            setValue(e.widget, parseInt(e.typer.extractText()), e.source === 'keyboard');\r\n        }\r\n    }\r\n});\r\n\r\nexport default NumberInput;\r\n","import $ from \"./include/external/jquery.js\";\r\nimport { define } from \"./core/define.js\";\r\nimport { reject } from \"./include/zeta-dom/util.js\";\r\nimport { parseExecute } from \"./util/defineUtil.js\";\r\nimport _ from \"./renderer/default/contenteditable.js\";\r\n\r\nconst RichTextInput = define('richtext', {\r\n    template: '<div><div class=\"zui-richtext-toolbar\"></div><label class=\"zui-textbox\"><z:contenteditable></z:contenteditable><div class=\"zui-textbox-placeholder\"><p>{{label}}</p></div></label></div>',\r\n    hideCalloutOnExecute: false,\r\n    preventLeave: true,\r\n    value: '',\r\n    parseOptions: parseExecute,\r\n    init: function (e, self) {\r\n        self.editorOptions = self.options || {};\r\n        self.editorOptions.toolbar = {\r\n            container: $('.zui-richtext-toolbar', e.target)[0]\r\n        };\r\n    },\r\n    validate: function (e, self) {\r\n        if (self.required && !self.editor.extractText()) {\r\n            return reject('required');\r\n        }\r\n    }\r\n});\r\n\r\nexport default RichTextInput;\r\n","import zeta from \"./include/zeta-dom/index.js\";\r\nimport UI from \"./index.js\";\r\nimport { } from \"./promptFactory.js\";\r\n\r\nimport { } from \"./Button.js\";\r\nimport { } from \"./ButtonList.js\";\r\nimport { } from \"./ButtonSet.js\";\r\nimport { } from \"./Callout.js\";\r\nimport { } from \"./Checkbox.js\";\r\nimport { } from \"./DatePicker.js\";\r\nimport { } from \"./Dropdown.js\";\r\nimport { } from \"./Fieldset.js\";\r\nimport { } from \"./FileInput.js\";\r\nimport { } from \"./Form.js\";\r\nimport { } from \"./Generic.js\";\r\nimport { } from \"./KeywordInput.js\";\r\nimport { } from \"./Label.js\";\r\nimport { } from \"./LinkButton.js\";\r\nimport { } from \"./Menu.js\";\r\nimport { } from \"./NumberInput.js\";\r\nimport { } from \"./RichTextInput.js\";\r\nimport { } from \"./SubmitButton.js\";\r\nimport { } from \"./TextBox.js\";\r\n\r\n// @ts-ignore: extend namespace for UMD export\r\nzeta.UI = UI;\r\n\r\nexport default UI;\r\n","var defaultLocale = 'en';\r\nif (typeof process !== 'undefined' && process.env.ZETA_UI_LOCALE) {\r\n    defaultLocale = process.env.ZETA_UI_LOCALE;\r\n}\r\n\r\n/** @type {ZetaUI.UIGlobalContext} */\r\nconst globalContext = {\r\n    language: defaultLocale\r\n};\r\nexport default globalContext;\r\n","// @ts-nocheck\r\n\r\n/** @type {JQueryStatic} */\r\nconst jQuery = window.jQuery || require('jquery');\r\nmodule.exports = jQuery;\r\n","// @ts-nocheck\r\n\r\n/** @type {PromiseConstructor} */\r\nconst Promise = window.Promise || require('promise-polyfill').default;\r\nmodule.exports = Promise;\r\n","// @ts-nocheck\r\n\r\n/** @type {Waterpipe} */\r\nconst waterpipe = window.waterpipe || require('waterpipe');\r\nmodule.exports = waterpipe;\r\n\r\n// assign to a new variable to avoid incompatble declaration issue by typescript compiler\r\nconst waterpipe_ = waterpipe;\r\nwaterpipe_.pipes['{'] = function (_, varargs) {\r\n    var o = {};\r\n    while (varargs.hasArgs()) {\r\n        var key = varargs.raw();\r\n        if (key === '}') {\r\n            break;\r\n        }\r\n        o[String(key).replace(/:$/, '')] = varargs.next();\r\n    }\r\n    return o;\r\n};\r\n// @ts-ignore: add member to function\r\nwaterpipe_.pipes['{'].varargs = true;\r\n","// @ts-nocheck\n\nmodule.exports = {\n    get Editor() {\n        try {\n            return (window.zeta && zeta.Editor) || require('zeta-editor');\n        } catch (e) { }\n    }\n};\n","import zeta from \"zeta-dom\";const { parseCSS, isCssUrlValue, runCSSTransition } = zeta.css; export { parseCSS, isCssUrlValue, runCSSTransition };","import zeta from \"zeta-dom\";const _defaultExport = zeta.dom; export default _defaultExport;const { textInputAllowed, beginDrag, beginPinchZoom, getShortcut, setShortcut, focusable, focused, setModal, retainFocus, releaseFocus, focus } = zeta.dom; export { textInputAllowed, beginDrag, beginPinchZoom, getShortcut, setShortcut, focusable, focused, setModal, retainFocus, releaseFocus, focus };","import zeta from \"zeta-dom\";const { lock, locked, cancelLock } = zeta.dom; export { lock, locked, cancelLock };","import zeta from \"zeta-dom\";const { domReady, tagName, isVisible, matchSelector, comparePosition, connected, containsOrEquals, acceptNode, combineNodeFilters, iterateNode, iterateNodeToArray, getCommonAncestor, parentsAndSelf, selectIncludeSelf, selectClosestRelative, createNodeIterator, createTreeWalker, bind, bindUntil, dispatchDOMMouseEvent, removeNode, getClass, setClass, getScrollOffset, getScrollParent, getContentRect, scrollBy, scrollIntoView, makeSelection, getRect, getRects, toPlainRect, rectEquals, rectCovers, rectIntersects, pointInRect, mergeRect, elementFromPoint } = zeta.util; export { domReady, tagName, isVisible, matchSelector, comparePosition, connected, containsOrEquals, acceptNode, combineNodeFilters, iterateNode, iterateNodeToArray, getCommonAncestor, parentsAndSelf, selectIncludeSelf, selectClosestRelative, createNodeIterator, createTreeWalker, bind, bindUntil, dispatchDOMMouseEvent, removeNode, getClass, setClass, getScrollOffset, getScrollParent, getContentRect, scrollBy, scrollIntoView, makeSelection, getRect, getRects, toPlainRect, rectEquals, rectCovers, rectIntersects, pointInRect, mergeRect, elementFromPoint };","import zeta from \"zeta-dom\";const { IS_IOS, IS_IE10, IS_IE, IS_MAC, IS_TOUCH } = zeta; export { IS_IOS, IS_IE10, IS_IE, IS_MAC, IS_TOUCH };","import zeta from \"zeta-dom\";const { noop, either, is, isUndefinedOrNull, isArray, isFunction, isThenable, isPlainObject, isArrayLike, makeArray, extend, each, map, grep, splice, any, single, kv, pick, exclude, mapGet, mapRemove, setAdd, equal, combineFn, createPrivateStore, setTimeoutOnce, setImmediate, setImmediateOnce, throwNotFunction, keys, values, hasOwnProperty, getOwnPropertyDescriptors, define, definePrototype, defineOwnProperty, defineGetterProperty, defineHiddenProperty, defineAliasProperty, defineObservableProperty, watch, watchOnce, watchable, inherit, deepFreeze, iequal, randomId, repeat, camel, hyphenate, ucfirst, lcfirst, trim, matchWord, htmlDecode, resolve, reject, always, resolveAll, catchAsync, setPromiseTimeout } = zeta.util; export { noop, either, is, isUndefinedOrNull, isArray, isFunction, isThenable, isPlainObject, isArrayLike, makeArray, extend, each, map, grep, splice, any, single, kv, pick, exclude, mapGet, mapRemove, setAdd, equal, combineFn, createPrivateStore, setTimeoutOnce, setImmediate, setImmediateOnce, throwNotFunction, keys, values, hasOwnProperty, getOwnPropertyDescriptors, define, definePrototype, defineOwnProperty, defineGetterProperty, defineHiddenProperty, defineAliasProperty, defineObservableProperty, watch, watchOnce, watchable, inherit, deepFreeze, iequal, randomId, repeat, camel, hyphenate, ucfirst, lcfirst, trim, matchWord, htmlDecode, resolve, reject, always, resolveAll, catchAsync, setPromiseTimeout };","import defaultRenderer from \"./renderer/default/index.js\";\r\nimport globalContext from \"./globalContext.js\";\r\nimport UIToolset from \"./core/UIToolset.js\";\r\nimport { extend } from \"./include/zeta-dom/util.js\";\r\n\r\nextend(UIToolset, {\r\n    defaultRenderer,\r\n    globalContext\r\n});\r\nexport default UIToolset;\r\n","// @ts-nocheck\r\nimport UIToolset from \"../index.js\";\r\nimport zeta_ui_datepicker from \"./en/zeta.ui.datepicker.json\";\r\nimport zeta_ui_keyword from \"./en/zeta.ui.keyword.json\";\r\n\r\nUIToolset.i18n('zeta.ui.datepicker', 'en', zeta_ui_datepicker);\r\nUIToolset.i18n('zeta.ui.keyword', 'en', zeta_ui_keyword);\r\n","import waterpipe from \"../include/external/waterpipe.js\";\r\nimport { lcfirst, ucfirst } from \"../include/zeta-dom/util.js\";\r\nimport { IS_MAC } from \"../include/zeta-dom/env.js\";\r\n\r\nconst MAC_CTRLKEY = {\r\n    ctrl: '\\u2318',\r\n    alt: '\\u2325',\r\n    shift: '\\u21e7',\r\n    enter: '\\u21a9',\r\n    tab: '\\u2135',\r\n    pageUp: '\\u21de',\r\n    pageDown: '\\u21df',\r\n    backspace: '\\u232b',\r\n    escape: '\\u238b',\r\n    leftArrow: '\\u2b60',\r\n    upArrow: '\\u2b61',\r\n    rightArrow: '\\u2b62',\r\n    downArrow: '\\u2b63',\r\n    home: '\\u2b66',\r\n    end: '\\u2b68'\r\n};\r\n\r\nfunction formatShortcutWin(value) {\r\n    return waterpipe.string(value).replace(/ctrl|alt|shift/gi, function (v) {\r\n        return ucfirst(v) + '+';\r\n    });\r\n}\r\nfunction formatShortcutMac(value) {\r\n    var flag = {};\r\n    var str = waterpipe.string(value).replace(/ctrl|alt|shift/gi, function (v) {\r\n        v = lcfirst(v);\r\n        flag[v] = MAC_CTRLKEY[v];\r\n        return '';\r\n    });\r\n    return (flag.alt || '') + (flag.shift || '') + (flag.ctrl || '') + (MAC_CTRLKEY[lcfirst(str)] || str);\r\n}\r\n\r\nconst formatShortcut = IS_MAC ? formatShortcutMac : formatShortcutWin;\r\nexport default formatShortcut;\r\n","import $ from \"../../include/external/jquery.js\";\r\nimport { runCSSTransition } from \"../../include/zeta-dom/cssUtil.js\";\r\nimport { always } from \"../../include/zeta-dom/util.js\";\r\nimport { bind, getRect } from \"../../include/zeta-dom/domUtil.js\";\r\nimport { IS_TOUCH } from \"../../include/zeta-dom/env.js\";\r\nimport dom from \"../../include/zeta-dom/dom.js\";\r\n\r\nfunction createRipple(elm, x, y, until) {\r\n    var rect = getRect(elm);\r\n    var p1 = Math.pow(y - rect.top, 2) + Math.pow(x - rect.left, 2);\r\n    var p2 = Math.pow(y - rect.top, 2) + Math.pow(x - rect.right, 2);\r\n    var p3 = Math.pow(y - rect.bottom, 2) + Math.pow(x - rect.left, 2);\r\n    var p4 = Math.pow(y - rect.bottom, 2) + Math.pow(x - rect.right, 2);\r\n    var scalePercent = 0.5 + 2 * Math.sqrt(Math.max(p1, p2, p3, p4)) / parseFloat($.css(elm, 'font-size'));\r\n\r\n    var $overlay = $('<div class=\"zui-clickeffect\"><i></i></div>').appendTo(elm);\r\n    var $anim = $overlay.children().css({\r\n        top: y - rect.top,\r\n        left: x - rect.left,\r\n    });\r\n    setTimeout(function () {\r\n        $anim.css('transform', $anim.css('transform') + ' scale(' + scalePercent + ')').addClass('animate-in');\r\n    });\r\n    $overlay.css('border-radius', $.css(elm, 'border-radius'));\r\n    always(until, function () {\r\n        runCSSTransition($overlay.children()[0], 'animate-out', function () {\r\n            $overlay.remove();\r\n        });\r\n    });\r\n}\r\n\r\nbind(window, IS_TOUCH ? 'touchstart' : 'mousedown', function (e) {\r\n    // @ts-ignore: type inference issue\r\n    var elm = $(e.target).closest('.zui-root .zui-button, .zui-root .zui-buttonlike')[0];\r\n    if (elm) {\r\n        // @ts-ignore: e can be TouchEvent\r\n        var p = (e.touches || [e])[0];\r\n        createRipple(elm, p.clientX, p.clientY, dom.beginDrag());\r\n    }\r\n});\r\n\r\nexport default null;\r\n","import waterpipe from \"../../include/external/waterpipe.js\";\r\nimport $ from \"../../include/external/jquery.js\";\r\nimport { createNodeIterator, createTreeWalker, iterateNode, iterateNodeToArray, removeNode, setClass, tagName } from \"../../include/zeta-dom/domUtil.js\";\r\nimport { any, camel, definePrototype, each, extend, hasOwnProperty, hyphenate, inherit, is, keys, mapGet, matchWord, single } from \"../../include/zeta-dom/util.js\";\r\nimport { eachAttr, parseTemplateConstant } from \"../../util/common.js\";\r\nimport { clearFlag } from \"../../core/flags.js\";\r\nimport UIToolset from \"../../core/UIToolset.js\";\r\nimport formatShortcut from \"../../util/formatShortcut.js\";\r\nimport _effects from \"./effects.js\";\r\n\r\nconst BOOL_ATTRS = 'checked selected disabled readonly multiple ismap';\r\nconst RE_PIPE = /\\{\\{((?:[^\\}]|\\}(?!\\}))+)\\}\\}/;\r\n\r\n/** @type {WeakMap<any, DOMState>} */\r\nconst states = new WeakMap();\r\nconst parsedTemplates = new WeakMap();\r\nconst defaultTemplates = {};\r\nconst overrideTemplates = {};\r\n\r\nwaterpipe.pipes[':zui-shortcut'] = formatShortcut;\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction DOMState() {\r\n    this.position = null;\r\n    this.current = null;\r\n    this.layouts = {};\r\n}\r\n\r\nfunction _(control) {\r\n    return mapGet(states, control, DOMState);\r\n}\r\n\r\nfunction createDocumentFragment(content) {\r\n    // @ts-ignore: type inference issue\r\n    return is(content, DocumentFragment) || $(document.createDocumentFragment()).append(content)[0];\r\n}\r\n\r\nfunction parseTemplate(template, templates, cacheKeyObj, parentTemplateName) {\r\n    var cached = mapGet(parsedTemplates, cacheKeyObj || templates, Object)[template];\r\n    if (cached) {\r\n        return cached;\r\n    }\r\n\r\n    var index = 0;\r\n    var binds = { 0: [] };\r\n    var roles = {};\r\n\r\n    function addBind(index, expression, name, type) {\r\n        var arr = binds[index] || (binds[index] = []);\r\n        arr[arr.length] = {\r\n            type: type || 'text',\r\n            name: name || '',\r\n            expression: expression\r\n        };\r\n    }\r\n\r\n    function extractPartialBinds(attr) {\r\n        var partialBind;\r\n        attr.value = attr.value.replace(/([\\w-]+)\\:(\\{\\{(?:[^\\}]|\\}(?!\\}))+\\}\\})/g, function (v, a, b) {\r\n            partialBind = true;\r\n            return addBind(index, b, a, attr.nodeName), '';\r\n        });\r\n        return partialBind;\r\n    }\r\n\r\n    function hasOverrideTemplate(templates, roles) {\r\n        return single(roles, function (v, i) {\r\n            return hasOwnProperty(templates, i) && i;\r\n        });\r\n    }\r\n\r\n    function includeTemplate(name, node) {\r\n        // prevent infinite recursion when mentioning the original template in overriden definition\r\n        var haystack = parentTemplateName === name ? Object.getPrototypeOf(templates) : templates;\r\n        var includeTemplate = (haystack[name] || '<div><children controls/></div>');\r\n\r\n        // replace children placeholder with the actual child contents\r\n        var tmp = $.parseHTML(includeTemplate)[0];\r\n        $('children', tmp).each(function (i, v) {\r\n            // @ts-ignore: type inference issue\r\n            var childNodes = createDocumentFragment(v.attributes.controls && !node.childNodes[0] ? [document.createElement('controls')] : node.cloneNode(true).childNodes);\r\n            var $controls = $('controls', childNodes);\r\n            eachAttr(v, function (i, v) {\r\n                $controls.attr(i, v);\r\n            });\r\n            $(v).replaceWith(childNodes);\r\n        });\r\n        // @ts-ignore: tmp is element\r\n        includeTemplate = tmp.outerHTML;\r\n\r\n        // check whether we can use cached template from parent\r\n        // if such cached template does not refer to altered template by current template definitions\r\n        var cacheKeyObj = templates;\r\n        for (var parent = templates; parent; parent = Object.getPrototypeOf(parent)) {\r\n            var cache = mapGet(parsedTemplates, parent, Object)[includeTemplate];\r\n            if (cache) {\r\n                cacheKeyObj = hasOverrideTemplate(templates, cache.roles) ? templates : parent;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // set layout type of the further included template to the included one only if this is a true control type\r\n        var include = parseTemplate(includeTemplate, templates, cacheKeyObj, UIToolset.prototype[name] ? name : parentTemplateName);\r\n        var dom = include.dom.cloneNode(true);\r\n        var $controls = $('controls', dom);\r\n        var context = {};\r\n        eachAttr(node, function (i, v, attr) {\r\n            if (i === 'class') {\r\n                extractPartialBinds(attr);\r\n                $(dom).addClass(attr.value);\r\n            } else {\r\n                var expr = RE_PIPE.test(v) && RegExp.$1;\r\n                context[camel(i)] = !expr ? parseTemplateConstant(v) : {\r\n                    expression: v,\r\n                    evalAsObject: expr.length === v.length - 4\r\n                };\r\n                if (!expr) {\r\n                    $controls.attr(i, v);\r\n                }\r\n            }\r\n        });\r\n        each(include.binds, function (i, v) {\r\n            var j = (+i) + index;\r\n            binds[j] = v.concat(binds[j] || []);\r\n            binds[j].context = extend({}, v.context, context);\r\n        });\r\n        roles[name] = index;\r\n        each(include.roles, function (i, v) {\r\n            roles[i] = (+v) + index;\r\n        });\r\n        index += include.nodeCount;\r\n        $(dom).addClass('zui-' + name.toLowerCase());\r\n        return dom;\r\n    }\r\n\r\n    function processDOM(element) {\r\n        var nodeToReplace = new Map();\r\n        var iterator = createTreeWalker(element, 5, function (v) {\r\n            // @ts-ignore: tagName return empty for non-element\r\n            if (/z\\:([\\w-]+)/.test(tagName(v))) {\r\n                nodeToReplace.set(v, includeTemplate(camel(RegExp.$1), v));\r\n                return 2;\r\n            }\r\n            return 1;\r\n        });\r\n\r\n        iterateNode(iterator, function (v) {\r\n            if (v.nodeType === 1) {\r\n                eachAttr(v, function (i, w, attr) {\r\n                    if (RE_PIPE.test(w) && (!matchWord(i, 'class style') || !extractPartialBinds(attr))) {\r\n                        addBind(index, w, i, matchWord(i, BOOL_ATTRS) && i in v ? 'prop' : 'attr');\r\n                        attr.value = '';\r\n                    }\r\n                });\r\n                index++;\r\n                // @ts-ignore: v is text node\r\n            } else if (RE_PIPE.test(v.data)) {\r\n                if (v.previousSibling || v.nextSibling) {\r\n                    // @ts-ignore: v is text node\r\n                    addBind(index, v.data);\r\n                    nodeToReplace.set(v, document.createElement('span'));\r\n                    index++;\r\n                } else {\r\n                    // @ts-ignore: v is text node\r\n                    addBind(index - 1, v.data);\r\n                }\r\n                // @ts-ignore: v is text node\r\n                v.data = '';\r\n            }\r\n        });\r\n        nodeToReplace.forEach(function (v, i) {\r\n            $(i).replaceWith(v);\r\n        });\r\n        return element.childNodes[0];\r\n    }\r\n\r\n    var result = {\r\n        dom: processDOM(createDocumentFragment($.parseHTML(template)[0])),\r\n        roles: waterpipe.eval('sortby [ . ]', roles),\r\n        binds: binds,\r\n        nodeCount: index\r\n    };\r\n    cacheKeyObj = cacheKeyObj || templates;\r\n    do {\r\n        mapGet(parsedTemplates, cacheKeyObj, Object)[template] = result;\r\n    } while (cacheKeyObj !== defaultTemplates && !hasOverrideTemplate(cacheKeyObj, roles) && (cacheKeyObj = Object.getPrototypeOf(cacheKeyObj)));\r\n    return result;\r\n}\r\n\r\nfunction evalTemplate(expression, context, globals, evalAsObject) {\r\n    var options = { globals };\r\n    return evalAsObject ? waterpipe.eval(expression.slice(2, -2), context, options) : waterpipe(expression, context, options);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * UIControlDOM\r\n * -------------------------------------- */\r\n\r\nfunction UIControlDOM(control, layoutType) {\r\n    var self = this;\r\n    var template = parseTemplate(control.template || '<z:' + hyphenate(control.type) + '/>', overrideTemplates[layoutType] || defaultTemplates);\r\n    var element = template.dom.cloneNode(true);\r\n    var nodes = iterateNodeToArray(createNodeIterator(element, 1));\r\n    var bindedNode = nodes.filter(function (v, i) {\r\n        return template.binds[i];\r\n    });\r\n    var positions = waterpipe.eval('sortby [ ! condition ]', $('controls', element).map(function (i, v) {\r\n        return new UIControlDOMPosition(control, v);\r\n    }).get());\r\n\r\n    self.control = control;\r\n    self.element = element;\r\n    self.roles = template.roles;\r\n    self.binds = template.binds;\r\n    self.bindedNode = bindedNode;\r\n    self.positions = positions;\r\n    self.layoutType = layoutType;\r\n    if (control.cssClass) {\r\n        $(element).addClass(control.cssClass);\r\n    }\r\n    _(control).current = self;\r\n\r\n    // bind all defined event handlers to the cloned element\r\n    // assign element to control so that handlers can be registered to correct element\r\n    control.element = element;\r\n    control.on('stateChange', function () {\r\n        // @ts-ignore: type inference issue\r\n        self.update();\r\n    });\r\n}\r\n\r\ndefinePrototype(UIControlDOM, {\r\n    update: function () {\r\n        var self = this;\r\n        var element = self.element;\r\n        var control = self.control;\r\n        if (control.parent) {\r\n            appendControl(control, control.parent);\r\n        }\r\n        var position = _(control).position;\r\n        if (!position) {\r\n            return;\r\n        }\r\n\r\n        var reBold = /\\*\\*(([^*]|\\*(?!\\*))+)\\*\\*/g;\r\n        var reItalic = /\\*([^*]+)\\*/g;\r\n        var context = control.getTemplateContext();\r\n        var index = 0;\r\n        each(self.binds, function (i, v) {\r\n            var node = self.bindedNode[index++];\r\n            var globals = extend({}, position.context);\r\n            each(v.context, function (i, v) {\r\n                globals[i] = !v.expression ? v : evalTemplate(v.expression, context, null, v.evalAsObject);\r\n            });\r\n            each(v, function (i, v) {\r\n                var value = evalTemplate(v.expression, context, globals, v.type === 'class' || v.type === 'prop');\r\n                switch (v.type) {\r\n                    case 'class':\r\n                        return setClass(node, v.name, value);\r\n                    case 'style':\r\n                        return $(node).css(v.name, value);\r\n                    case 'prop':\r\n                        node[v.name] = !!value;\r\n                        return;\r\n                    case 'attr':\r\n                        value = value.replace(reBold, '$1').replace(reItalic, '$1');\r\n                        return $(node).attr(v.name, value || null);\r\n                }\r\n                value = value.replace(reBold, '<b>$1</b>').replace(reItalic, '<i>$1</i>').replace(/\\n/g, '<br>');\r\n                if (value !== node.innerHTML) {\r\n                    node.innerHTML = value;\r\n                }\r\n            });\r\n        });\r\n        setClass(element, {\r\n            active: context.active,\r\n            loading: context.pending,\r\n            error: context.errors,\r\n            disabled: !context.enabled,\r\n            hidden: !context.visible,\r\n            focused: context.focused && context.focusedBy\r\n        });\r\n        if ('disabled' in element) {\r\n            // @ts-ignore: disabled checked for existence\r\n            element.disabled = !context.enabled;\r\n        }\r\n        if (control.controls[1]) {\r\n            var map = new Map();\r\n            each(control.controls, function (i, v) {\r\n                map.set(v.element, i);\r\n            });\r\n            // perform bubble sort for controls in each position\r\n            each(self.positions, function (k, v) {\r\n                for (var j = v.count - 1; j > 0; j--) {\r\n                    // @ts-ignore: type inferene issue\r\n                    for (var i = 0, cur = v.start; i < j; i++, cur = cur.nextSibling) {\r\n                        if (map.get(cur) > map.get(cur.nextSibling)) {\r\n                            // @ts-ignore: type inferene issue\r\n                            $(cur.nextSibling).insertBefore(cur);\r\n                            // @ts-ignore: type inferene issue\r\n                            cur = cur.previousSibling;\r\n                            if (i === 0) {\r\n                                v.start = cur;\r\n                            } else if (i === v.count - 1) {\r\n                                // @ts-ignore: type inferene issue\r\n                                v.end = cur.nextSibling;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        each(control.controls, function (i, v) {\r\n            appendControl(v, control);\r\n        });\r\n    }\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * UIControlDOMPosition\r\n * -------------------------------------- */\r\n\r\nfunction UIControlDOMPosition(control, placeholder) {\r\n    placeholder = placeholder || document.createElement('controls');\r\n    placeholder.style.display = 'none!important';\r\n\r\n    var context = {};\r\n    eachAttr(placeholder, function (i, v) {\r\n        context[camel(i)] = parseTemplateConstant(v);\r\n    });\r\n    var self = this;\r\n    self.control = control;\r\n    self.context = context;\r\n    self.placeholder = placeholder;\r\n    self.condition = context.of || '';\r\n    self.layoutType = context.layout || control.type || 'default';\r\n    self.start = placeholder;\r\n    self.end = placeholder;\r\n    self.count = 0;\r\n}\r\n\r\ndefinePrototype(UIControlDOMPosition, {\r\n    get enabled() {\r\n        return this.control.enableChildren !== false;\r\n    }\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * Exports\r\n * -------------------------------------- */\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n * @param {ZetaUI.UIControl | Internal.UIEventContainer} parent\r\n * @param {boolean=} suppressEvent\r\n */\r\nfunction appendControl(control, parent, suppressEvent) {\r\n    var state = _(control);\r\n    var parentState = _(parent);\r\n    if (!parentState.current) {\r\n        parentState.current = { positions: [] };\r\n    }\r\n\r\n    // compute and update if this control should be positioned in different location\r\n    var positions = parentState.current.positions;\r\n    var prevPos = state.position;\r\n    var nextPos;\r\n    if (!positions[0]) {\r\n        nextPos = new UIControlDOMPosition(parent);\r\n        // @ts-ignore: fallback for parent with no type\r\n        nextPos.layoutType = parent.type || '';\r\n        $(nextPos.placeholder).appendTo(parent.element);\r\n        positions[0] = nextPos;\r\n    } else {\r\n        var context = control.getTemplateContext();\r\n        nextPos = any(positions, function (v) {\r\n            return !v.condition || waterpipe.eval(v.condition, context);\r\n        });\r\n        // clear flags because the state may be invalid when building control tree\r\n        clearFlag(control);\r\n    }\r\n    if (prevPos === nextPos) {\r\n        return;\r\n    }\r\n\r\n    var prev = state.current;\r\n    var next = prev;\r\n    if (prev) {\r\n        removeControl(control);\r\n    }\r\n    state.position = nextPos;\r\n    if (nextPos) {\r\n        var layoutType = nextPos.layoutType;\r\n        if (!prev || layoutType !== prev.layoutType) {\r\n            next = state.layouts[layoutType] || (state.layouts[layoutType] = new UIControlDOM(control, layoutType));\r\n            state.current = next;\r\n            // @ts-ignore: internal update read-only property\r\n            control.element = next.element;\r\n        }\r\n        var element = control.element;\r\n        if (!nextPos.count) {\r\n            $(nextPos.start).replaceWith(element);\r\n            nextPos.start = nextPos.end = element;\r\n        } else {\r\n            $(element).insertAfter(nextPos.end);\r\n            nextPos.end = element;\r\n        }\r\n        nextPos.count++;\r\n        if (parent && !suppressEvent && next !== prev) {\r\n            next.update();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * @param {ZetaUI.UIControl} control\r\n */\r\nfunction removeControl(control) {\r\n    var elm = control.element;\r\n    var pos = mapGet(states, control, DOMState).position;\r\n    if (pos.count === 1) {\r\n        pos.start = pos.end = $(pos.placeholder).insertBefore(elm)[0];\r\n    } else if (pos.start === elm) {\r\n        pos.start = elm.nextSibling;\r\n    } else if (pos.end === elm) {\r\n        pos.end = elm.previousSibling;\r\n    }\r\n    pos.count--;\r\n    removeNode(elm);\r\n}\r\n\r\n/** @type {ZetaUI.UIControlRenderer} */\r\nconst defaultRenderer = {\r\n    append: appendControl,\r\n    remove: removeControl,\r\n    getElementForRole: function (control, role) {\r\n        var dom = _(control).current;\r\n        return dom.bindedNode[keys(dom.binds).indexOf(String(dom.roles[role]))];\r\n    },\r\n    getRoles: function (control) {\r\n        var dom = _(control).current;\r\n        return keys(dom.roles);\r\n    },\r\n    isEnabled: function (control) {\r\n        var pos = _(control).position;\r\n        return !pos || pos.enabled;\r\n    }\r\n};\r\nexport default defaultRenderer;\r\n\r\nexport function setDefaultTemplate(type, template, overrides) {\r\n    defaultTemplates[type] = template;\r\n    overrideTemplates[type] = overrides && inherit(defaultTemplates, overrides);\r\n}\r\n","import waterpipe from \"../include/external/waterpipe.js\";\r\nimport { each } from \"../include/zeta-dom/util.js\";\r\n\r\nexport function copy(dst, src) {\r\n    // use each() instead of extend()\r\n    // to ensure all values copied even if the value is undefined\r\n    each(src, function (i, v) {\r\n        dst[i] = v;\r\n    });\r\n    return dst;\r\n}\r\n\r\nexport function eachAttr(node, callback) {\r\n    each(node.attributes, function (i, v) {\r\n        callback(v.nodeName, v.value, v);\r\n    });\r\n}\r\n\r\nexport function parseTemplateConstant(value) {\r\n    return waterpipe.eval('\"' + value + '\"');\r\n}\r\n\r\nexport function createNamedFunction(name, body) {\r\n    if (!/^[$_a-z][$_a-z0-9]*$/i.test(name)) {\r\n        throw new Error('Invalid function name \\'' + name + '\\'');\r\n    }\r\n    return new Function('fn', 'return function ' + name + '() { return fn.apply(this, arguments) }')(body);\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__609__;","module.exports = __WEBPACK_EXTERNAL_MODULE__804__;","module.exports = __WEBPACK_EXTERNAL_MODULE__160__;","module.exports = __WEBPACK_EXTERNAL_MODULE__163__;","if(typeof __WEBPACK_EXTERNAL_MODULE__47__ === 'undefined') { var e = new Error(\"Cannot find module 'undefined'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__47__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(594);\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}